import{R as $,r as p,u as en,j as l,P as H,a as tn,c as G,b as je,d as Q,e as Kt,f as qt,g as rn,h as X,i as A,k as ft,S as nn,l as B,T as on,m as sn,n as an}from"./index-C-vvSRI1.js";var Xt={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jt=$.createContext&&$.createContext(Xt),ln=["attr","size","title"];function cn(e,r){if(e==null)return{};var t=un(e,r),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function un(e,r){if(e==null)return{};var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;t[n]=e[n]}return t}function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Be.apply(this,arguments)}function Vt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function $e(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Vt(Object(t),!0).forEach(function(n){dn(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function dn(e,r,t){return r=fn(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function fn(e){var r=hn(e,"string");return typeof r=="symbol"?r:r+""}function hn(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Yt(e){return e&&e.map((r,t)=>$.createElement(r.tag,$e({key:t},r.attr),Yt(r.child)))}function q(e){return r=>$.createElement(mn,Be({attr:$e({},e.attr)},r),Yt(e.child))}function mn(e){var r=t=>{var{attr:n,size:o,title:i}=e,s=cn(e,ln),c=o||t.size||"1em",a;return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),$.createElement("svg",Be({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,s,{className:a,style:$e($e({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&$.createElement("title",null,i),e.children)};return jt!==void 0?$.createElement(jt.Consumer,null,t=>r(t)):r(Xt)}var qe="Collapsible",[pn]=qt(qe),[vn,ht]=pn(qe),Zt=p.forwardRef((e,r)=>{const{__scopeCollapsible:t,open:n,defaultOpen:o,disabled:i,onOpenChange:s,...c}=e,[a,d]=en({prop:n,defaultProp:o??!1,onChange:s,caller:qe});return l.jsx(vn,{scope:t,disabled:i,contentId:tn(),open:a,onOpenToggle:p.useCallback(()=>d(u=>!u),[d]),children:l.jsx(H.div,{"data-state":pt(a),"data-disabled":i?"":void 0,...c,ref:r})})});Zt.displayName=qe;var Qt="CollapsibleTrigger",Jt=p.forwardRef((e,r)=>{const{__scopeCollapsible:t,...n}=e,o=ht(Qt,t);return l.jsx(H.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":pt(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...n,ref:r,onClick:G(e.onClick,o.onOpenToggle)})});Jt.displayName=Qt;var mt="CollapsibleContent",er=p.forwardRef((e,r)=>{const{forceMount:t,...n}=e,o=ht(mt,e.__scopeCollapsible);return l.jsx(je,{present:t||o.open,children:({present:i})=>l.jsx(gn,{...n,ref:r,present:i})})});er.displayName=mt;var gn=p.forwardRef((e,r)=>{const{__scopeCollapsible:t,present:n,children:o,...i}=e,s=ht(mt,t),[c,a]=p.useState(n),d=p.useRef(null),u=Q(r,d),f=p.useRef(0),h=f.current,m=p.useRef(0),v=m.current,b=s.open||c,y=p.useRef(b),g=p.useRef(void 0);return p.useEffect(()=>{const w=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(w)},[]),Kt(()=>{const w=d.current;if(w){g.current=g.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const j=w.getBoundingClientRect();f.current=j.height,m.current=j.width,y.current||(w.style.transitionDuration=g.current.transitionDuration,w.style.animationName=g.current.animationName),a(n)}},[s.open,n]),l.jsx(H.div,{"data-state":pt(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!b,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:b&&o})});function pt(e){return e?"open":"closed"}var bn=Zt,yn="Label",tr=p.forwardRef((e,r)=>l.jsx(H.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));tr.displayName=yn;var wn=tr;function xn(e,[r,t]){return Math.min(t,Math.max(r,e))}function Sn(e,r){return p.useReducer((t,n)=>r[t][n]??t,e)}var vt="ScrollArea",[rr]=qt(vt),[Fn,_]=rr(vt),nr=p.forwardRef((e,r)=>{const{__scopeScrollArea:t,type:n="hover",dir:o,scrollHideDelay:i=600,...s}=e,[c,a]=p.useState(null),[d,u]=p.useState(null),[f,h]=p.useState(null),[m,v]=p.useState(null),[b,y]=p.useState(null),[g,w]=p.useState(0),[j,V]=p.useState(0),[F,E]=p.useState(!1),[M,P]=p.useState(!1),x=Q(r,O=>a(O)),C=rn(o);return l.jsx(Fn,{scope:t,type:n,dir:C,scrollHideDelay:i,scrollArea:c,viewport:d,onViewportChange:u,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:F,onScrollbarXEnabledChange:E,scrollbarY:b,onScrollbarYChange:y,scrollbarYEnabled:M,onScrollbarYEnabledChange:P,onCornerWidthChange:w,onCornerHeightChange:V,children:l.jsx(H.div,{dir:C,...s,ref:x,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});nr.displayName=vt;var or="ScrollAreaViewport",ir=p.forwardRef((e,r)=>{const{__scopeScrollArea:t,children:n,nonce:o,...i}=e,s=_(or,t),c=p.useRef(null),a=Q(r,c,s.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),l.jsx(H.div,{"data-radix-scroll-area-viewport":"",...i,ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:l.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});ir.displayName=or;var W="ScrollAreaScrollbar",sr=p.forwardRef((e,r)=>{const{forceMount:t,...n}=e,o=_(W,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=o,c=e.orientation==="horizontal";return p.useEffect(()=>(c?i(!0):s(!0),()=>{c?i(!1):s(!1)}),[c,i,s]),o.type==="hover"?l.jsx(Mn,{...n,ref:r,forceMount:t}):o.type==="scroll"?l.jsx(jn,{...n,ref:r,forceMount:t}):o.type==="auto"?l.jsx(ar,{...n,ref:r,forceMount:t}):o.type==="always"?l.jsx(gt,{...n,ref:r}):null});sr.displayName=W;var Mn=p.forwardRef((e,r)=>{const{forceMount:t,...n}=e,o=_(W,e.__scopeScrollArea),[i,s]=p.useState(!1);return p.useEffect(()=>{const c=o.scrollArea;let a=0;if(c){const d=()=>{window.clearTimeout(a),s(!0)},u=()=>{a=window.setTimeout(()=>s(!1),o.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",u),()=>{window.clearTimeout(a),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",u)}}},[o.scrollArea,o.scrollHideDelay]),l.jsx(je,{present:t||i,children:l.jsx(ar,{"data-state":i?"visible":"hidden",...n,ref:r})})}),jn=p.forwardRef((e,r)=>{const{forceMount:t,...n}=e,o=_(W,e.__scopeScrollArea),i=e.orientation==="horizontal",s=Ye(()=>a("SCROLL_END"),100),[c,a]=Sn("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>a("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,o.scrollHideDelay,a]),p.useEffect(()=>{const d=o.viewport,u=i?"scrollLeft":"scrollTop";if(d){let f=d[u];const h=()=>{const m=d[u];f!==m&&(a("SCROLL"),s()),f=m};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[o.viewport,i,a,s]),l.jsx(je,{present:t||c!=="hidden",children:l.jsx(gt,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:r,onPointerEnter:G(e.onPointerEnter,()=>a("POINTER_ENTER")),onPointerLeave:G(e.onPointerLeave,()=>a("POINTER_LEAVE"))})})}),ar=p.forwardRef((e,r)=>{const t=_(W,e.__scopeScrollArea),{forceMount:n,...o}=e,[i,s]=p.useState(!1),c=e.orientation==="horizontal",a=Ye(()=>{if(t.viewport){const d=t.viewport.offsetWidth<t.viewport.scrollWidth,u=t.viewport.offsetHeight<t.viewport.scrollHeight;s(c?d:u)}},10);return de(t.viewport,a),de(t.content,a),l.jsx(je,{present:n||i,children:l.jsx(gt,{"data-state":i?"visible":"hidden",...o,ref:r})})}),gt=p.forwardRef((e,r)=>{const{orientation:t="vertical",...n}=e,o=_(W,e.__scopeScrollArea),i=p.useRef(null),s=p.useRef(0),[c,a]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=fr(c.viewport,c.content),u={...n,sizes:c,onSizesChange:a,hasThumb:d>0&&d<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:h=>s.current=h};function f(h,m){return On(h,s.current,c,m)}return t==="horizontal"?l.jsx(Vn,{...u,ref:r,onThumbPositionChange:()=>{if(o.viewport&&i.current){const h=o.viewport.scrollLeft,m=Et(h,c,o.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollLeft=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollLeft=f(h,o.dir))}}):t==="vertical"?l.jsx(En,{...u,ref:r,onThumbPositionChange:()=>{if(o.viewport&&i.current){const h=o.viewport.scrollTop,m=Et(h,c);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollTop=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollTop=f(h))}}):null}),Vn=p.forwardRef((e,r)=>{const{sizes:t,onSizesChange:n,...o}=e,i=_(W,e.__scopeScrollArea),[s,c]=p.useState(),a=p.useRef(null),d=Q(r,a,i.onScrollbarXChange);return p.useEffect(()=>{a.current&&c(getComputedStyle(a.current))},[a]),l.jsx(cr,{"data-orientation":"horizontal",...o,ref:d,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Xe(t)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),mr(h,f)&&u.preventDefault()}},onResize:()=>{a.current&&i.viewport&&s&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:a.current.clientWidth,paddingStart:He(s.paddingLeft),paddingEnd:He(s.paddingRight)}})}})}),En=p.forwardRef((e,r)=>{const{sizes:t,onSizesChange:n,...o}=e,i=_(W,e.__scopeScrollArea),[s,c]=p.useState(),a=p.useRef(null),d=Q(r,a,i.onScrollbarYChange);return p.useEffect(()=>{a.current&&c(getComputedStyle(a.current))},[a]),l.jsx(cr,{"data-orientation":"vertical",...o,ref:d,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Xe(t)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),mr(h,f)&&u.preventDefault()}},onResize:()=>{a.current&&i.viewport&&s&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:a.current.clientHeight,paddingStart:He(s.paddingTop),paddingEnd:He(s.paddingBottom)}})}})}),[Cn,lr]=rr(W),cr=p.forwardRef((e,r)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:o,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:c,onThumbPositionChange:a,onDragScroll:d,onWheelScroll:u,onResize:f,...h}=e,m=_(W,t),[v,b]=p.useState(null),y=Q(r,x=>b(x)),g=p.useRef(null),w=p.useRef(""),j=m.viewport,V=n.content-n.viewport,F=X(u),E=X(a),M=Ye(f,10);function P(x){if(g.current){const C=x.clientX-g.current.left,O=x.clientY-g.current.top;d({x:C,y:O})}}return p.useEffect(()=>{const x=C=>{const O=C.target;v?.contains(O)&&F(C,V)};return document.addEventListener("wheel",x,{passive:!1}),()=>document.removeEventListener("wheel",x,{passive:!1})},[j,v,V,F]),p.useEffect(E,[n,E]),de(v,M),de(m.content,M),l.jsx(Cn,{scope:t,scrollbar:v,hasThumb:o,onThumbChange:X(i),onThumbPointerUp:X(s),onThumbPositionChange:E,onThumbPointerDown:X(c),children:l.jsx(H.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:G(e.onPointerDown,x=>{x.button===0&&(x.target.setPointerCapture(x.pointerId),g.current=v.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),P(x))}),onPointerMove:G(e.onPointerMove,P),onPointerUp:G(e.onPointerUp,x=>{const C=x.target;C.hasPointerCapture(x.pointerId)&&C.releasePointerCapture(x.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),g.current=null})})})}),ze="ScrollAreaThumb",ur=p.forwardRef((e,r)=>{const{forceMount:t,...n}=e,o=lr(ze,e.__scopeScrollArea);return l.jsx(je,{present:t||o.hasThumb,children:l.jsx(An,{ref:r,...n})})}),An=p.forwardRef((e,r)=>{const{__scopeScrollArea:t,style:n,...o}=e,i=_(ze,t),s=lr(ze,t),{onThumbPositionChange:c}=s,a=Q(r,f=>s.onThumbChange(f)),d=p.useRef(void 0),u=Ye(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const f=i.viewport;if(f){const h=()=>{if(u(),!d.current){const m=Tn(f,c);d.current=m,c()}};return c(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[i.viewport,u,c]),l.jsx(H.div,{"data-state":s.hasThumb?"visible":"hidden",...o,ref:a,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:G(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),v=f.clientX-m.left,b=f.clientY-m.top;s.onThumbPointerDown({x:v,y:b})}),onPointerUp:G(e.onPointerUp,s.onThumbPointerUp)})});ur.displayName=ze;var bt="ScrollAreaCorner",dr=p.forwardRef((e,r)=>{const t=_(bt,e.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?l.jsx(Pn,{...e,ref:r}):null});dr.displayName=bt;var Pn=p.forwardRef((e,r)=>{const{__scopeScrollArea:t,...n}=e,o=_(bt,t),[i,s]=p.useState(0),[c,a]=p.useState(0),d=!!(i&&c);return de(o.scrollbarX,()=>{const u=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(u),a(u)}),de(o.scrollbarY,()=>{const u=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(u),s(u)}),d?l.jsx(H.div,{...n,ref:r,style:{width:i,height:c,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function He(e){return e?parseInt(e,10):0}function fr(e,r){const t=e/r;return isNaN(t)?0:t}function Xe(e){const r=fr(e.viewport,e.content),t=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-t)*r;return Math.max(n,18)}function On(e,r,t,n="ltr"){const o=Xe(t),i=o/2,s=r||i,c=o-s,a=t.scrollbar.paddingStart+s,d=t.scrollbar.size-t.scrollbar.paddingEnd-c,u=t.content-t.viewport,f=n==="ltr"?[0,u]:[u*-1,0];return hr([a,d],f)(e)}function Et(e,r,t="ltr"){const n=Xe(r),o=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,i=r.scrollbar.size-o,s=r.content-r.viewport,c=i-n,a=t==="ltr"?[0,s]:[s*-1,0],d=xn(e,a);return hr([0,s],[0,c])(d)}function hr(e,r){return t=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(e[1]-e[0]);return r[0]+n*(t-e[0])}}function mr(e,r){return e>0&&e<r}var Tn=(e,r=()=>{})=>{let t={left:e.scrollLeft,top:e.scrollTop},n=0;return(function o(){const i={left:e.scrollLeft,top:e.scrollTop},s=t.left!==i.left,c=t.top!==i.top;(s||c)&&r(),t=i,n=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(n)};function Ye(e,r){const t=X(e),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,r)},[t,r])}function de(e,r){const t=X(r);Kt(()=>{let n=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return o.observe(e),()=>{window.cancelAnimationFrame(n),o.unobserve(e)}}},[e,t])}var kn=nr,In=ir,Ln=dr,Rn="Separator",Ct="horizontal",_n=["horizontal","vertical"],pr=p.forwardRef((e,r)=>{const{decorative:t,orientation:n=Ct,...o}=e,i=Dn(n)?n:Ct,c=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return l.jsx(H.div,{"data-orientation":i,...c,...o,ref:r})});pr.displayName=Rn;function Dn(e){return _n.includes(e)}var Nn=pr;const ce=new WeakMap,_e=new WeakMap,We={current:[]};let et=!1,ye=0;const be=new Set,Pe=new Map;function vr(e){const r=Array.from(e).sort((t,n)=>t instanceof z&&t.options.deps.includes(n)?1:n instanceof z&&n.options.deps.includes(t)?-1:0);for(const t of r){if(We.current.includes(t))continue;We.current.push(t),t.recompute();const n=_e.get(t);if(n)for(const o of n){const i=ce.get(o);i&&vr(i)}}}function Bn(e){const r={prevVal:e.prevState,currentVal:e.state};for(const t of e.listeners)t(r)}function $n(e){const r={prevVal:e.prevState,currentVal:e.state};for(const t of e.listeners)t(r)}function gr(e){if(ye>0&&!Pe.has(e)&&Pe.set(e,e.prevState),be.add(e),!(ye>0)&&!et)try{for(et=!0;be.size>0;){const r=Array.from(be);be.clear();for(const t of r){const n=Pe.get(t)??t.prevState;t.prevState=n,Bn(t)}for(const t of r){const n=ce.get(t);n&&(We.current.push(t),vr(n))}for(const t of r){const n=ce.get(t);if(n)for(const o of n)$n(o)}}}finally{et=!1,We.current=[],Pe.clear()}}function N(e){ye++;try{e()}finally{if(ye--,ye===0){const r=be.values().next().value;r&&gr(r)}}}function zn(e){return typeof e=="function"}class nt{constructor(r,t){this.listeners=new Set,this.subscribe=n=>{var o,i;this.listeners.add(n);const s=(i=(o=this.options)==null?void 0:o.onSubscribe)==null?void 0:i.call(o,n,this);return()=>{this.listeners.delete(n),s?.()}},this.prevState=r,this.state=r,this.options=t}setState(r){var t,n,o;this.prevState=this.state,(t=this.options)!=null&&t.updateFn?this.state=this.options.updateFn(this.prevState)(r):zn(r)?this.state=r(this.prevState):this.state=r,(o=(n=this.options)==null?void 0:n.onUpdate)==null||o.call(n),gr(this)}}class z{constructor(r){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const t=this.options.deps.length,n=new Array(t),o=new Array(t);for(let i=0;i<t;i++){const s=this.options.deps[i];n[i]=s.prevState,o[i]=s.state}return this.lastSeenDepValues=o,{prevDepVals:n,currDepVals:o,prevVal:this.prevState??void 0}},this.recompute=()=>{var t,n;this.prevState=this.state;const o=this.getDepVals();this.state=this.options.fn(o),(n=(t=this.options).onUpdate)==null||n.call(t)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof z&&i.checkIfRecalculationNeededDeeply();let t=!1;const n=this.lastSeenDepValues,{currDepVals:o}=this.getDepVals();for(let i=0;i<o.length;i++)if(o[i]!==n[i]){t=!0;break}t&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const t of this._subscriptions)t()}),this.subscribe=t=>{var n,o;this.listeners.add(t);const i=(o=(n=this.options).onSubscribe)==null?void 0:o.call(n,t,this);return()=>{this.listeners.delete(t),i?.()}},this.options=r,this.state=r.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(r=this.options.deps){for(const t of r)if(t instanceof z)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof nt){let n=ce.get(t);n||(n=new Set,ce.set(t,n)),n.add(this);let o=_e.get(this);o||(o=new Set,_e.set(this,o)),o.add(t)}}unregisterFromGraph(r=this.options.deps){for(const t of r)if(t instanceof z)this.unregisterFromGraph(t.options.deps);else if(t instanceof nt){const n=ce.get(t);n&&n.delete(this);const o=_e.get(this);o&&o.delete(t)}}}var Hn=class{constructor(e,r){this.fn=e,this.options=r,this.lastExecutionTime=0,this.isPending=!1,this.maybeExecute=(...t)=>{const n=Date.now()-this.lastExecutionTime;if(this.options.leading&&n>=this.options.wait)this.execute(...t);else if(this.lastArgs=t,!this.timeoutId&&this.options.trailing){const o=this.options.wait-n;this.isPending=!0,this.timeoutId=setTimeout(()=>{this.lastArgs!==void 0&&this.execute(...this.lastArgs)},o)}},this.execute=(...t)=>{this.fn(...t),this.options.onExecute?.(t,this),this.lastExecutionTime=Date.now(),this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.flush=()=>{this.isPending&&this.lastArgs&&this.execute(...this.lastArgs)},this.cancel=()=>{this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.clearTimeout=()=>{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},this.options.leading===void 0&&this.options.trailing===void 0&&(this.options.leading=!0,this.options.trailing=!0)}};function Wn(e,r){return new Hn(e,r).maybeExecute}class Un{#i=!0;#t;#e;#d;#r;#a;#n;#l;#f=0;#m=5;#s=!1;#c=!1;#o=null;#h=()=>{this.debugLog("Connected to event bus"),this.#a=!0,this.#s=!1,this.debugLog("Emitting queued events",this.#r),this.#r.forEach(r=>this.emitEventToBus(r)),this.#r=[],this.stopConnectLoop(),this.#e().removeEventListener("tanstack-connect-success",this.#h)};#u=()=>{if(this.#f<this.#m){this.#f++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#e().removeEventListener("tanstack-connect",this.#u),this.#c=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#p=()=>{this.#s||(this.#s=!0,this.#e().addEventListener("tanstack-connect-success",this.#h),this.#u())};constructor({pluginId:r,debug:t=!1,enabled:n=!0,reconnectEveryMs:o=300}){this.#t=r,this.#i=n,this.#e=this.getGlobalTarget,this.#d=t,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#r=[],this.#a=!1,this.#c=!1,this.#n=null,this.#l=o}startConnectLoop(){this.#n!==null||this.#a||(this.debugLog(`Starting connect loop (every ${this.#l}ms)`),this.#n=setInterval(this.#u,this.#l))}stopConnectLoop(){this.#s=!1,this.#n!==null&&(clearInterval(this.#n),this.#n=null,this.#r=[],this.debugLog("Stopped connect loop"))}debugLog(...r){this.#d&&console.log(`ðŸŒ´ [tanstack-devtools:${this.#t}-plugin]`,...r)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const r=typeof EventTarget<"u"?new EventTarget:void 0;return typeof r>"u"||typeof r.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),r)}getPluginId(){return this.#t}dispatchCustomEventShim(r,t){try{const n=new Event(r,{detail:t});this.#e().dispatchEvent(n)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(r,t){try{this.#e().dispatchEvent(new CustomEvent(r,{detail:t}))}catch{this.dispatchCustomEventShim(r,t)}}emitEventToBus(r){this.debugLog("Emitting event to client bus",r),this.dispatchCustomEvent("tanstack-dispatch-event",r)}createEventPayload(r,t){return{type:`${this.#t}:${r}`,payload:t,pluginId:this.#t}}emit(r,t){if(!this.#i){this.debugLog("Event bus client is disabled, not emitting event",r,t);return}if(this.#o&&(this.debugLog("Emitting event to internal event target",r,t),this.#o.dispatchEvent(new CustomEvent(`${this.#t}:${r}`,{detail:this.createEventPayload(r,t)}))),this.#c){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#a){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#r.push(this.createEventPayload(r,t)),typeof CustomEvent<"u"&&!this.#s&&(this.#p(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(r,t))}on(r,t,n){const o=n?.withEventTarget??!1,i=`${this.#t}:${r}`;if(o&&(this.#o||(this.#o=new EventTarget),this.#o.addEventListener(i,c=>{t(c.detail)})),!this.#i)return this.debugLog("Event bus client is disabled, not registering event",i),()=>{};const s=c=>{this.debugLog("Received event from bus",c.detail),t(c.detail)};return this.#e().addEventListener(i,s),this.debugLog("Registered event to bus",i),()=>{o&&this.#o?.removeEventListener(i,s),this.#e().removeEventListener(i,s)}}onAll(r){if(!this.#i)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const t=n=>{const o=n.detail;r(o)};return this.#e().addEventListener("tanstack-devtools-global",t),()=>this.#e().removeEventListener("tanstack-devtools-global",t)}onAllPluginEvents(r){if(!this.#i)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const t=n=>{const o=n.detail;this.#t&&o.pluginId!==this.#t||r(o)};return this.#e().addEventListener("tanstack-devtools-global",t),()=>this.#e().removeEventListener("tanstack-devtools-global",t)}}class Gn extends Un{constructor(){super({pluginId:"form-devtools",reconnectEveryMs:1e3})}}const L=new Gn;function Ve(e,r){return typeof e=="function"?e(r):e}function se(e,r){return Ze(r).reduce((n,o)=>{if(n===null)return null;if(typeof n<"u")return n[o]},e)}function Oe(e,r,t){const n=Ze(r);function o(i){if(!n.length)return Ve(t,i);const s=n.shift();if(typeof s=="string"||typeof s=="number"&&!Array.isArray(i))return typeof i=="object"?(i===null&&(i={}),{...i,[s]:o(i[s])}):{[s]:o()};if(Array.isArray(i)&&typeof s=="number"){const c=i.slice(0,s);return[...c.length?c:new Array(s),o(i[s]),...i.slice(s+1)]}return[...new Array(s),o()]}return o(e)}function Kn(e,r){const t=Ze(r);function n(o){if(!o)return;if(t.length===1){const s=t[0];if(Array.isArray(o)&&typeof s=="number")return o.filter((d,u)=>u!==s);const{[s]:c,...a}=o;return a}const i=t.shift();if((typeof i=="string"||typeof i=="number"&&!Array.isArray(o))&&typeof o=="object")return{...o,[i]:n(o[i])};if(typeof i=="number"&&Array.isArray(o)){if(i>=o.length)return o;const s=o.slice(0,i);return[...s.length?s:new Array(i),n(o[i]),...o.slice(i+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return n(e)}const qn=/^(\d+)$/gm,Xn=/\.(\d+)(?=\.)/gm,Yn=/^(\d+)\./gm,Zn=/\.(\d+$)/gm,Qn=/\.{2,}/gm,ot="__int__",Te=`${ot}$1`;function Ze(e){if(Array.isArray(e))return[...e];if(typeof e!="string")throw new Error("Path must be a string.");return e.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(qn,Te).replace(Xn,`.${Te}.`).replace(Yn,`${Te}.`).replace(Zn,`.${Te}`).replace(Qn,".").split(".").map(r=>{if(r.startsWith(ot)){const t=r.substring(ot.length),n=parseInt(t,10);return String(n)===t?n:t}return r})}function At(e,r){return e.length===0?r:r.length===0?e:r.startsWith("[")||r.startsWith(".")?e+r:`${e}.${r}`}function Jn(e){return!(Array.isArray(e)&&e.length===0)}function it(e,r){const t=n=>n.validators.filter(Boolean).map(o=>({cause:o.cause,validate:o.fn}));return r.validationLogic({form:r.form,validators:r.validators,event:{type:e,async:!1},runValidation:t})}function st(e,r){const{asyncDebounceMs:t}=r,{onBlurAsyncDebounceMs:n,onChangeAsyncDebounceMs:o,onDynamicAsyncDebounceMs:i}=r.validators||{},s=t??0,c=a=>a.validators.filter(Boolean).map(d=>{const u=d?.cause||e;let f=s;switch(u){case"change":f=o??s;break;case"blur":f=n??s;break;case"dynamic":f=i??s;break;case"submit":f=0;break}return e==="submit"&&(f=0),{cause:u,validate:d.fn,debounceMs:f}});return r.validationLogic({form:r.form,validators:r.validators,event:{type:e,async:!0},runValidation:c})}const at=e=>!!e&&typeof e=="object"&&"fields"in e;function U(e,r){if(Object.is(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(const[o,i]of e)if(!r.has(o)||!Object.is(i,r.get(o)))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(const o of e)if(!r.has(o))return!1;return!0}const t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(const o of t)if(!n.includes(o)||!U(e[o],r[o]))return!1;return!0}const Pt=({newFormValidatorError:e,isPreviousErrorFromFormValidator:r,previousErrorValue:t})=>e?{newErrorValue:e,newSource:"form"}:r?{newErrorValue:void 0,newSource:void 0}:t?{newErrorValue:t,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},Ot=({formLevelError:e,fieldLevelError:r})=>r?{newErrorValue:r,newSource:"field"}:e?{newErrorValue:e,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function k(e,r){return e==null?r:{...e,...r}}let Y=256;const De=[];let ke;for(;Y--;)De[Y]=(Y+256).toString(16).substring(1);function br(){let e=0,r,t="";if(!ke||Y+16>256){for(ke=new Array(256),e=256;e--;)ke[e]=256*Math.random()|0;e=0,Y=0}for(;e<16;e++)r=ke[Y+e],e===6?t+=De[r&15|64]:e===8?t+=De[r&63|128]:t+=De[r],e&1&&e>1&&e<11&&(t+="-");return Y++,t}const eo=Wn(e=>L.emit("form-state",{id:e.formId,state:e.store.state}),{wait:300}),ae=e=>{if(!e.validators)return e.runValidation({validators:[],form:e.form});const r=e.event.async,t=r?void 0:{fn:e.validators.onMount,cause:"mount"},n={fn:r?e.validators.onChangeAsync:e.validators.onChange,cause:"change"},o={fn:r?e.validators.onBlurAsync:e.validators.onBlur,cause:"blur"},i={fn:r?e.validators.onSubmitAsync:e.validators.onSubmit,cause:"submit"},s=r?void 0:{fn:()=>{},cause:"server"};switch(e.event.type){case"mount":return e.runValidation({validators:[t],form:e.form});case"submit":return e.runValidation({validators:[n,o,i,s],form:e.form});case"server":return e.runValidation({validators:[],form:e.form});case"blur":return e.runValidation({validators:[o,s],form:e.form});case"change":return e.runValidation({validators:[n,s],form:e.form});default:throw new Error(`Unknown validation event type: ${e.event.type}`)}};function to(e,r){const t=new Map;for(const n of e){const o=n.path??[];let i=r,s="";for(let c=0;c<o.length;c++){const a=o[c];if(a===void 0)continue;const d=typeof a=="object"?a.key:a,u=Number(d);Array.isArray(i)&&!Number.isNaN(u)?s+=`[${u}]`:s+=(c>0?".":"")+String(d),typeof i=="object"&&i!==null?i=i[d]:i=void 0}t.set(s,(t.get(s)??[]).concat(n))}return Object.fromEntries(t)}const Tt=(e,r)=>{const t=to(e,r);return{form:t,fields:t}},ue={validate({value:e,validationSource:r},t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("async function passed to sync validator");if(n.issues)return r==="field"?n.issues:Tt(n.issues,e)},async validateAsync({value:e,validationSource:r},t){const n=await t["~standard"].validate(e);if(n.issues)return r==="field"?n.issues:Tt(n.issues,e)}},yr=e=>!!e&&"~standard"in e,le={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function Ie(e){function r(u,f,h){const m=s(u,f,"move",h),v=Math.min(f,h),b=Math.max(f,h);for(let g=v;g<=b;g++)m.push(i(u,g));const y=Object.keys(e.fieldInfo).reduce((g,w)=>(w.startsWith(i(u,f))&&g.set(w,e.getFieldMeta(w)),g),new Map);a(m,f<h?"up":"down"),Object.keys(e.fieldInfo).filter(g=>g.startsWith(i(u,h))).forEach(g=>{const w=g.replace(i(u,h),i(u,f)),j=y.get(w);j&&e.setFieldMeta(g,j)})}function t(u,f){const h=s(u,f,"remove");a(h,"up")}function n(u,f,h){s(u,f,"swap",h).forEach(v=>{if(!v.toString().startsWith(i(u,f)))return;const b=v.toString().replace(i(u,f),i(u,h)),[y,g]=[e.getFieldMeta(v),e.getFieldMeta(b)];y&&e.setFieldMeta(b,y),g&&e.setFieldMeta(v,g)})}function o(u,f){const h=s(u,f,"insert");a(h,"down"),h.forEach(m=>{m.toString().startsWith(i(u,f))&&e.setFieldMeta(m,d())})}function i(u,f){return`${u}[${f}]`}function s(u,f,h,m){const v=[i(u,f)];switch(h){case"swap":v.push(i(u,m));break;case"move":{const[b,y]=[Math.min(f,m),Math.max(f,m)];for(let g=b;g<=y;g++)v.push(i(u,g));break}default:{const b=e.getFieldValue(u),y=Array.isArray(b)?b.length:0;for(let g=f+1;g<y;g++)v.push(i(u,g));break}}return Object.keys(e.fieldInfo).filter(b=>v.some(y=>b.startsWith(y)))}function c(u,f){return u.replace(/\[(\d+)\]/,(h,m)=>{const v=parseInt(m,10);return`[${f==="up"?v+1:Math.max(0,v-1)}]`})}function a(u,f){(f==="up"?u:[...u].reverse()).forEach(m=>{const v=c(m.toString(),f),b=e.getFieldMeta(v);b?e.setFieldMeta(m,b):e.setFieldMeta(m,d())})}const d=()=>le;return{handleArrayMove:r,handleArrayRemove:t,handleArraySwap:n,handleArrayInsert:o}}function tt(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,isSubmitSuccessful:e.isSubmitSuccessful??!1,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class kt{constructor(r){this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{const t=this.fieldMetaDerived.mount(),n=this.store.mount(),o=this.store.subscribe(()=>{eo(this)}),i=L.on("request-form-state",u=>{u.payload.id===this._formId&&L.emit("form-api",{id:this._formId,state:this.store.state,options:this.options})}),s=L.on("request-form-reset",u=>{u.payload.id===this._formId&&this.reset()}),c=L.on("request-form-force-submit",u=>{u.payload.id===this._formId&&(this._devtoolsSubmissionOverride=!0,this.handleSubmit(),this._devtoolsSubmissionOverride=!1)}),a=()=>{c(),s(),i(),o(),t(),n(),L.emit("form-unmounted",{id:this._formId})};this.options.listeners?.onMount?.({formApi:this});const{onMount:d}=this.options.validators||{};return L.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}),d&&this.validateSync("mount"),a},this.update=t=>{if(!t)return;const n=this.options;this.options=t;const o=!!t.transform?.deps?.some((c,a)=>c!==this.prevTransformArray[a]),i=t.defaultValues&&!U(t.defaultValues,n.defaultValues)&&!this.state.isTouched,s=!U(t.defaultState,n.defaultState)&&!this.state.isTouched;!i&&!s&&!o||(N(()=>{this.baseStore.setState(()=>tt(Object.assign({},this.state,s?t.defaultState:{},i?{values:t.defaultValues}:{},o?{_force_re_eval:!this.state._force_re_eval}:{})))}),L.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}))},this.reset=(t,n)=>{const{fieldMeta:o}=this.state,i=this.resetFieldMeta(o);t&&!n?.keepDefaultValues&&(this.options={...this.options,defaultValues:t}),this.baseStore.setState(()=>tt({...this.options.defaultState,values:t??this.options.defaultValues??this.options.defaultState?.values,fieldMetaBase:i}))},this.validateAllFields=async t=>{const n=[];return N(()=>{Object.values(this.fieldInfo).forEach(i=>{if(!i.instance)return;const s=i.instance;n.push(Promise.resolve().then(()=>s.validate(t,{skipFormValidation:!0}))),i.instance.state.meta.isTouched||i.instance.setMeta(c=>({...c,isTouched:!0}))})}),(await Promise.all(n)).flat()},this.validateArrayFieldsStartingFrom=async(t,n,o)=>{const i=this.getFieldValue(t),s=Array.isArray(i)?Math.max(i.length-1,0):null,c=[`${t}[${n}]`];for(let f=n+1;f<=(s??0);f++)c.push(`${t}[${f}]`);const a=Object.keys(this.fieldInfo).filter(f=>c.some(h=>f.startsWith(h))),d=[];return N(()=>{a.forEach(f=>{d.push(Promise.resolve().then(()=>this.validateField(f,o)))})}),(await Promise.all(d)).flat()},this.validateField=(t,n)=>{const o=this.fieldInfo[t]?.instance;if(!o){const{hasErrored:i}=this.validateSync(n);return i&&!this.options.asyncAlways?this.getFieldMeta(t)?.errors??[]:this.validateAsync(n).then(()=>this.getFieldMeta(t)?.errors??[])}return o.state.meta.isTouched||o.setMeta(i=>({...i,isTouched:!0})),o.validate(n)},this.validateSync=t=>{const n=it(t,{...this.options,form:this,validationLogic:this.options.validationLogic||ae});let o=!1;const i={};return N(()=>{for(const a of n){if(!a.validate)continue;const d=this.runValidator({validate:a.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:u,fieldErrors:f}=Ne(d),h=ve(a.cause),m=new Set([...Object.keys(this.state.fieldMeta),...Object.keys(f||{})]);for(const v of m){if(this.baseStore.state.fieldMetaBase[v]===void 0&&!f?.[v])continue;const b=this.getFieldMeta(v)??le,{errorMap:y,errorSourceMap:g}=b,w=f?.[v],{newErrorValue:j,newSource:V}=Pt({newFormValidatorError:w,isPreviousErrorFromFormValidator:g?.[h]==="form",previousErrorValue:y?.[h]});V==="form"&&(i[v]={...i[v],[h]:w}),y?.[h]!==j&&this.setFieldMeta(v,(F=le)=>({...F,errorMap:{...F.errorMap,[h]:j},errorSourceMap:{...F.errorSourceMap,[h]:V}}))}this.state.errorMap?.[h]!==u&&this.baseStore.setState(v=>({...v,errorMap:{...v.errorMap,[h]:u}})),(u||f)&&(o=!0)}const s=ve("submit");this.state.errorMap?.[s]&&t!=="submit"&&!o&&this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[s]:void 0}}));const c=ve("server");this.state.errorMap?.[c]&&t!=="server"&&!o&&this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[c]:void 0}}))}),{hasErrored:o,fieldsErrorMap:i}},this.validateAsync=async t=>{const n=st(t,{...this.options,form:this,validationLogic:this.options.validationLogic||ae});this.state.isFormValidating||this.baseStore.setState(a=>({...a,isFormValidating:!0}));const o=[];let i;for(const a of n){if(!a.validate)continue;const d=ve(a.cause);this.state.validationMetaMap[d]?.lastAbortController.abort();const f=new AbortController;this.state.validationMetaMap[d]={lastAbortController:f},o.push(new Promise(async h=>{let m;try{m=await new Promise((g,w)=>{setTimeout(async()=>{if(f.signal.aborted)return g(void 0);try{g(await this.runValidator({validate:a.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:f.signal},type:"validateAsync"}))}catch(j){w(j)}},a.debounceMs)})}catch(g){m=g}const{formError:v,fieldErrors:b}=Ne(m);b&&(i=i?{...i,...b}:b);const y=ve(a.cause);for(const g of Object.keys(this.state.fieldMeta)){if(this.baseStore.state.fieldMetaBase[g]===void 0)continue;const w=this.getFieldMeta(g);if(!w)continue;const{errorMap:j,errorSourceMap:V}=w,F=i?.[g],{newErrorValue:E,newSource:M}=Pt({newFormValidatorError:F,isPreviousErrorFromFormValidator:V?.[y]==="form",previousErrorValue:j?.[y]});j?.[y]!==E&&this.setFieldMeta(g,P=>({...P,errorMap:{...P.errorMap,[y]:E},errorSourceMap:{...P.errorSourceMap,[y]:M}}))}this.baseStore.setState(g=>({...g,errorMap:{...g.errorMap,[y]:v}})),h(i?{fieldErrors:i,errorMapKey:y}:void 0)}))}let s=[];const c={};if(o.length){s=await Promise.all(o);for(const a of s)if(a?.fieldErrors){const{errorMapKey:d}=a;for(const[u,f]of Object.entries(a.fieldErrors)){const m={...c[u]||{},[d]:f};c[u]=m}}}return this.baseStore.setState(a=>({...a,isFormValidating:!1})),c},this.validate=t=>{const{hasErrored:n,fieldsErrorMap:o}=this.validateSync(t);return n&&!this.options.asyncAlways?o:this.validateAsync(t)},this._handleSubmit=async t=>{this.baseStore.setState(i=>({...i,isSubmitted:!1,submissionAttempts:i.submissionAttempts+1,isSubmitSuccessful:!1})),N(()=>{Object.values(this.fieldInfo).forEach(i=>{i.instance&&(i.instance.state.meta.isTouched||i.instance.setMeta(s=>({...s,isTouched:!0})))})});const n=t??this.options.onSubmitMeta;if(!this.state.canSubmit&&!this._devtoolsSubmissionOverride){this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:n});return}this.baseStore.setState(i=>({...i,isSubmitting:!0}));const o=()=>{this.baseStore.setState(i=>({...i,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){o(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:n}),L.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validateAllFields",errors:Object.values(this.state.fieldMeta).map(i=>i.errors).flat()});return}if(await this.validate("submit"),!this.state.isValid){o(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:n}),L.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validate",errors:this.state.errors});return}N(()=>{Object.values(this.fieldInfo).forEach(i=>{i.instance?.options.listeners?.onSubmit?.({value:i.instance.state.value,fieldApi:i.instance})})}),this.options.listeners?.onSubmit?.({formApi:this,meta:n});try{await this.options.onSubmit?.({value:this.state.values,formApi:this,meta:n}),N(()=>{this.baseStore.setState(i=>({...i,isSubmitted:!0,isSubmitSuccessful:!0})),L.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!0}),o()})}catch(i){throw this.baseStore.setState(s=>({...s,isSubmitSuccessful:!1})),L.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"inflight",onError:i}),o(),i}},this.getFieldValue=t=>se(this.state.values,t),this.getFieldMeta=t=>this.state.fieldMeta[t],this.getFieldInfo=t=>this.fieldInfo[t]||={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}},this.setFieldMeta=(t,n)=>{this.baseStore.setState(o=>({...o,fieldMetaBase:{...o.fieldMetaBase,[t]:Ve(n,o.fieldMetaBase[t])}}))},this.resetFieldMeta=t=>Object.keys(t).reduce((n,o)=>{const i=o;return n[i]=le,n},{}),this.setFieldValue=(t,n,o)=>{const i=o?.dontUpdateMeta??!1,s=o?.dontRunListeners??!1,c=o?.dontValidate??!1;N(()=>{i||this.setFieldMeta(t,a=>({...a,isTouched:!0,isDirty:!0,errorMap:{...a?.errorMap,onMount:void 0}})),this.baseStore.setState(a=>({...a,values:Oe(a.values,t,n)}))}),s||this.getFieldInfo(t).instance?.triggerOnChangeListener(),c||this.validateField(t,"change")},this.deleteField=t=>{const o=[...Object.keys(this.fieldInfo).filter(i=>{const s=t.toString();return i!==s&&i.startsWith(s)}),t];this.baseStore.setState(i=>{const s={...i};return o.forEach(c=>{s.values=Kn(s.values,c),delete this.fieldInfo[c],delete s.fieldMetaBase[c]}),s})},this.pushFieldValue=(t,n,o)=>{this.setFieldValue(t,i=>[...Array.isArray(i)?i:[],n],o)},this.insertFieldValue=async(t,n,o,i)=>{this.setFieldValue(t,c=>[...c.slice(0,n),o,...c.slice(n)],k(i,{dontValidate:!0}));const s=i?.dontValidate??!1;s||await this.validateField(t,"change"),Ie(this).handleArrayInsert(t,n),s||await this.validateArrayFieldsStartingFrom(t,n,"change")},this.replaceFieldValue=async(t,n,o,i)=>{this.setFieldValue(t,c=>c.map((a,d)=>d===n?o:a),k(i,{dontValidate:!0})),(i?.dontValidate??!1)||(await this.validateField(t,"change"),await this.validateArrayFieldsStartingFrom(t,n,"change"))},this.removeFieldValue=async(t,n,o)=>{const i=this.getFieldValue(t),s=Array.isArray(i)?Math.max(i.length-1,0):null;if(this.setFieldValue(t,a=>a.filter((d,u)=>u!==n),k(o,{dontValidate:!0})),Ie(this).handleArrayRemove(t,n),s!==null){const a=`${t}[${s}]`;this.deleteField(a)}(o?.dontValidate??!1)||(await this.validateField(t,"change"),await this.validateArrayFieldsStartingFrom(t,n,"change"))},this.swapFieldValues=(t,n,o,i)=>{this.setFieldValue(t,c=>{const a=c[n],d=c[o];return Oe(Oe(c,`${n}`,d),`${o}`,a)},k(i,{dontValidate:!0})),Ie(this).handleArraySwap(t,n,o),(i?.dontValidate??!1)||(this.validateField(t,"change"),this.validateField(`${t}[${n}]`,"change"),this.validateField(`${t}[${o}]`,"change"))},this.moveFieldValues=(t,n,o,i)=>{this.setFieldValue(t,c=>{const a=[...c];return a.splice(o,0,a.splice(n,1)[0]),a},k(i,{dontValidate:!0})),Ie(this).handleArrayMove(t,n,o),(i?.dontValidate??!1)||(this.validateField(t,"change"),this.validateField(`${t}[${n}]`,"change"),this.validateField(`${t}[${o}]`,"change"))},this.clearFieldValues=(t,n)=>{const o=this.getFieldValue(t),i=Array.isArray(o)?Math.max(o.length-1,0):null;if(this.setFieldValue(t,[],k(n,{dontValidate:!0})),i!==null)for(let c=0;c<=i;c++){const a=`${t}[${c}]`;this.deleteField(a)}(n?.dontValidate??!1)||this.validateField(t,"change")},this.resetField=t=>{this.baseStore.setState(n=>({...n,fieldMetaBase:{...n.fieldMetaBase,[t]:le},values:this.options.defaultValues?Oe(n.values,t,se(this.options.defaultValues,t)):n.values}))},this.setErrorMap=t=>{N(()=>{Object.entries(t).forEach(([n,o])=>{const i=n;if(at(o)){const{formError:s,fieldErrors:c}=Ne(o);for(const a of Object.keys(this.fieldInfo))this.getFieldMeta(a)&&this.setFieldMeta(a,u=>({...u,errorMap:{...u.errorMap,[i]:c?.[a]},errorSourceMap:{...u.errorSourceMap,[i]:"form"}}));this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[i]:s}}))}else this.baseStore.setState(s=>({...s,errorMap:{...s.errorMap,[i]:o}}))})})},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((t,[n,o])=>(Object.keys(o).length&&o.errors.length&&(t[n]={errors:o.errors,errorMap:o.errorMap}),t),{})}),this.parseValuesWithSchema=t=>ue.validate({value:this.state.values,validationSource:"form"},t),this.parseValuesWithSchemaAsync=t=>ue.validateAsync({value:this.state.values,validationSource:"form"},t),this.timeoutIds={validations:{},listeners:{},formListeners:{}},this._formId=r?.formId??br(),this._devtoolsSubmissionOverride=!1,this.baseStore=new nt(tt({...r?.defaultState,values:r?.defaultValues??r?.defaultState?.values})),this.fieldMetaDerived=new z({deps:[this.baseStore],fn:({prevDepVals:t,currDepVals:n,prevVal:o})=>{const i=o,s=t?.[0],c=n[0];let a=0;const d={};for(const u of Object.keys(c.fieldMetaBase)){const f=c.fieldMetaBase[u],h=s?.fieldMetaBase[u],m=i?.[u],v=se(c.values,u);let b=m?.errors;if(!h||f.errorMap!==h.errorMap){b=Object.values(f.errorMap??{}).filter(V=>V!==void 0);const j=this.getFieldInfo(u)?.instance;(!j||!j.options.disableErrorFlat)&&(b=b.flat(1))}const y=!Jn(b),g=!f.isDirty,w=U(v,se(this.options.defaultValues,u))||U(v,this.getFieldInfo(u)?.instance?.options.defaultValue);if(m&&m.isPristine===g&&m.isValid===y&&m.isDefaultValue===w&&m.errors===b&&f===h){d[u]=m,a++;continue}d[u]={...f,errors:b??[],isPristine:g,isValid:y,isDefaultValue:w}}return Object.keys(c.fieldMetaBase).length&&i&&a===Object.keys(c.fieldMetaBase).length?i:d}}),this.store=new z({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:t,currDepVals:n,prevVal:o})=>{const i=o,s=t?.[0],c=n[0],a=n[1],d=Object.values(a).filter(Boolean),u=d.some(S=>S.isValidating),f=d.every(S=>S.isValid),h=d.some(S=>S.isTouched),m=d.some(S=>S.isBlurred),v=d.every(S=>S.isDefaultValue),b=h&&c.errorMap?.onMount,y=d.some(S=>S.isDirty),g=!y,w=!!(c.errorMap?.onMount||d.some(S=>S?.errorMap?.onMount)),j=!!u;let V=i?.errors??[];(!s||c.errorMap!==s.errorMap)&&(V=Object.values(c.errorMap).reduce((S,T)=>T===void 0?S:T&&at(T)?(S.push(T.form),S):(S.push(T),S),[]));const F=V.length===0,E=f&&F,M=this.options.canSubmitWhenInvalid??!1,P=c.submissionAttempts===0&&!h&&!w||!j&&!c.isSubmitting&&E||M;let x=c.errorMap;if(b&&(V=V.filter(S=>S!==c.errorMap.onMount),x=Object.assign(x,{onMount:void 0})),i&&s&&i.errorMap===x&&i.fieldMeta===this.fieldMetaDerived.state&&i.errors===V&&i.isFieldsValidating===u&&i.isFieldsValid===f&&i.isFormValid===F&&i.isValid===E&&i.canSubmit===P&&i.isTouched===h&&i.isBlurred===m&&i.isPristine===g&&i.isDefaultValue===v&&i.isDirty===y&&U(s,c))return i;let C={...c,errorMap:x,fieldMeta:this.fieldMetaDerived.state,errors:V,isFieldsValidating:u,isFieldsValid:f,isFormValid:F,isValid:E,canSubmit:P,isTouched:h,isBlurred:m,isPristine:g,isDefaultValue:v,isDirty:y};const O=this.options.transform?.deps??[];if(O.length!==this.prevTransformArray.length||O.some((S,T)=>S!==this.prevTransformArray[T])){const S=Object.assign({},this,{state:C});this.options.transform?.fn(S),C=S.state,this.prevTransformArray=O}return C}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(r||{})}get state(){return this.store.state}get formId(){return this._formId}runValidator(r){return yr(r.validate)?ue[r.type](r.value,r.validate):r.validate(r.value)}handleSubmit(r){return this._handleSubmit(r)}}function Ne(e){if(e){if(at(e)){const r=Ne(e.form).formError,t=e.fields;return{formError:r,fieldErrors:t}}return{formError:e}}return{formError:void 0}}function ve(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}class It{constructor(r){this.options={},this.mount=()=>{const t=this.store.mount();this.options.defaultValue!==void 0&&!this.getMeta().isTouched&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const n=this.getInfo();n.instance=this,this.update(this.options);const{onMount:o}=this.options.validators||{};if(o){const i=this.runValidator({validate:o,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});i&&this.setMeta(s=>({...s,errorMap:{...s?.errorMap,onMount:i},errorSourceMap:{...s?.errorSourceMap,onMount:"field"}}))}return this.options.listeners?.onMount?.({value:this.state.value,fieldApi:this}),t},this.update=t=>{if(this.options=t,this.name=t.name,!this.state.meta.isTouched&&this.options.defaultValue!==void 0){const n=this.form.getFieldValue(this.name);U(n,t.defaultValue)||this.form.setFieldValue(this.name,t.defaultValue,{dontUpdateMeta:!0,dontValidate:!0,dontRunListeners:!0})}this.form.getFieldMeta(this.name)||this.form.setFieldMeta(this.name,this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(t,n)=>{this.form.setFieldValue(this.name,t,k(n,{dontRunListeners:!0,dontValidate:!0})),n?.dontRunListeners||this.triggerOnChangeListener(),n?.dontValidate||this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=t=>this.form.setFieldMeta(this.name,t),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(t,n)=>{this.form.pushFieldValue(this.name,t,k(n,{dontRunListeners:!0})),n?.dontRunListeners||this.triggerOnChangeListener()},this.insertValue=(t,n,o)=>{this.form.insertFieldValue(this.name,t,n,k(o,{dontRunListeners:!0})),o?.dontRunListeners||this.triggerOnChangeListener()},this.replaceValue=(t,n,o)=>{this.form.replaceFieldValue(this.name,t,n,k(o,{dontRunListeners:!0})),o?.dontRunListeners||this.triggerOnChangeListener()},this.removeValue=(t,n)=>{this.form.removeFieldValue(this.name,t,k(n,{dontRunListeners:!0})),n?.dontRunListeners||this.triggerOnChangeListener()},this.swapValues=(t,n,o)=>{this.form.swapFieldValues(this.name,t,n,k(o,{dontRunListeners:!0})),o?.dontRunListeners||this.triggerOnChangeListener()},this.moveValue=(t,n,o)=>{this.form.moveFieldValues(this.name,t,n,k(o,{dontRunListeners:!0})),o?.dontRunListeners||this.triggerOnChangeListener()},this.clearValues=t=>{this.form.clearFieldValues(this.name,k(t,{dontRunListeners:!0})),t?.dontRunListeners||this.triggerOnChangeListener()},this.getLinkedFields=t=>{const n=Object.values(this.form.fieldInfo),o=[];for(const i of n){if(!i.instance)continue;const{onChangeListenTo:s,onBlurListenTo:c}=i.instance.options.validators||{};t==="change"&&s?.includes(this.name)&&o.push(i.instance),t==="blur"&&c?.includes(this.name)&&o.push(i.instance)}return o},this.validateSync=(t,n)=>{const o=it(t,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||ae}),s=this.getLinkedFields(t).reduce((d,u)=>{const f=it(t,{...u.options,form:u.form,validationLogic:u.form.options.validationLogic||ae});return f.forEach(h=>{h.field=u}),d.concat(f)},[]);let c=!1;N(()=>{const d=(u,f)=>{const h=Le(f.cause),m=f.validate?Lt(u.runValidator({validate:f.validate,value:{value:u.store.state.value,validationSource:"field",fieldApi:u},type:"validate"})):void 0,v=n[h],{newErrorValue:b,newSource:y}=Ot({formLevelError:v,fieldLevelError:m});u.state.meta.errorMap?.[h]!==b&&u.setMeta(g=>({...g,errorMap:{...g.errorMap,[h]:b},errorSourceMap:{...g.errorSourceMap,[h]:y}})),b&&(c=!0)};for(const u of o)d(this,u);for(const u of s)u.validate&&d(u.field,u)});const a=Le("submit");return this.state.meta.errorMap?.[a]&&t!=="submit"&&!c&&this.setMeta(d=>({...d,errorMap:{...d.errorMap,[a]:void 0},errorSourceMap:{...d.errorSourceMap,[a]:void 0}})),{hasErrored:c}},this.validateAsync=async(t,n)=>{const o=st(t,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||ae}),i=await n,s=this.getLinkedFields(t),c=s.reduce((m,v)=>{const b=st(t,{...v.options,form:v.form,validationLogic:v.form.options.validationLogic||ae});return b.forEach(y=>{y.field=v}),m.concat(b)},[]),a=[],d=[],u=o.some(m=>m.validate)||c.some(m=>m.validate);if(u){this.state.meta.isValidating||this.setMeta(m=>({...m,isValidating:!0}));for(const m of s)m.setMeta(v=>({...v,isValidating:!0}))}const f=(m,v,b)=>{const y=Le(v.cause);m.getInfo().validationMetaMap[y]?.lastAbortController.abort();const w=new AbortController;this.getInfo().validationMetaMap[y]={lastAbortController:w},b.push(new Promise(async j=>{let V;try{V=await new Promise((x,C)=>{this.timeoutIds.validations[v.cause]&&clearTimeout(this.timeoutIds.validations[v.cause]),this.timeoutIds.validations[v.cause]=setTimeout(async()=>{if(w.signal.aborted)return x(void 0);try{x(await this.runValidator({validate:v.validate,value:{value:m.store.state.value,fieldApi:m,signal:w.signal,validationSource:"field"},type:"validateAsync"}))}catch(O){C(O)}},v.debounceMs)})}catch(x){V=x}if(w.signal.aborted)return j(void 0);const F=Lt(V),E=i[this.name]?.[y],{newErrorValue:M,newSource:P}=Ot({formLevelError:E,fieldLevelError:F});m.setMeta(x=>({...x,errorMap:{...x?.errorMap,[y]:M},errorSourceMap:{...x.errorSourceMap,[y]:P}})),j(M)}))};for(const m of o)m.validate&&f(this,m,a);for(const m of c)m.validate&&f(m.field,m,d);let h=[];if((a.length||d.length)&&(h=await Promise.all(a),await Promise.all(d)),u){this.setMeta(m=>({...m,isValidating:!1}));for(const m of s)m.setMeta(v=>({...v,isValidating:!1}))}return h.filter(Boolean)},this.validate=(t,n)=>{if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:o}=n?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(t),{hasErrored:i}=this.validateSync(t,o[this.name]??{});if(i&&!this.options.asyncAlways)return this.getInfo().validationMetaMap[Le(t)]?.lastAbortController.abort(),this.state.meta.errors;const s=n?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(t);return this.validateAsync(t,s)},this.handleChange=t=>{this.setValue(t)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta(n=>({...n,isTouched:!0})),this.state.meta.isBlurred||this.setMeta(n=>({...n,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.setErrorMap=t=>{this.setMeta(n=>({...n,errorMap:{...n.errorMap,...t}}))},this.parseValueWithSchema=t=>ue.validate({value:this.state.value,validationSource:"field"},t),this.parseValueWithSchemaAsync=t=>ue.validateAsync({value:this.state.value,validationSource:"field"},t),this.triggerOnChangeListener=()=>{const t=this.form.options.listeners?.onChangeDebounceMs;t&&t>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout(()=>{this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this})},t)):this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this});const n=this.options.listeners?.onChangeDebounceMs;n&&n>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},n)):this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},this.form=r.form,this.name=r.name,this.options=r,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new z({deps:[this.form.store],fn:({prevVal:t})=>{const n=t,o=this.form.getFieldMeta(this.name)??{...le,...r.defaultMeta};let i=this.form.getFieldValue(this.name);return!o.isTouched&&i===void 0&&this.options.defaultValue!==void 0&&!U(i,this.options.defaultValue)&&(i=this.options.defaultValue),n&&n.value===i&&n.meta===o?n:{value:i,meta:o}}})}get state(){return this.store.state}runValidator(r){return yr(r.validate)?ue[r.type](r.value,r.validate):r.validate(r.value)}triggerOnBlurListener(){const r=this.form.options.listeners?.onBlurDebounceMs;r&&r>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this})},r)):this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this});const t=this.options.listeners?.onBlurDebounceMs;t&&t>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})},t)):this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}}function Lt(e){if(e)return e}function Le(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}class Ue{constructor(r){if(this.getFormFieldName=t=>{if(typeof this.fieldsMap=="string")return At(this.fieldsMap,t);const n=Ze(t)[0];if(typeof n!="string")return"";const o=t.slice(n.length),i=this.fieldsMap[n];return At(i,o)},this.getFormFieldOptions=t=>{const n={...t},o=n.validators;if(n.name=this.getFormFieldName(t.name),o&&(o.onChangeListenTo||o.onBlurListenTo)){const i={...o},s=c=>{if(c)return c.map(a=>this.getFormFieldName(a))};i.onChangeListenTo=s(o.onChangeListenTo),i.onBlurListenTo=s(o.onBlurListenTo),n.validators=i}return n},this.mount=()=>this.store.mount(),this.validateArrayFieldsStartingFrom=async(t,n,o)=>this.form.validateArrayFieldsStartingFrom(this.getFormFieldName(t),n,o),this.validateField=(t,n)=>this.form.validateField(this.getFormFieldName(t),n),this.getFieldValue=t=>this.form.getFieldValue(this.getFormFieldName(t)),this.getFieldMeta=t=>this.form.getFieldMeta(this.getFormFieldName(t)),this.setFieldMeta=(t,n)=>this.form.setFieldMeta(this.getFormFieldName(t),n),this.setFieldValue=(t,n,o)=>this.form.setFieldValue(this.getFormFieldName(t),n,o),this.deleteField=t=>this.form.deleteField(this.getFormFieldName(t)),this.pushFieldValue=(t,n,o)=>this.form.pushFieldValue(this.getFormFieldName(t),n,o),this.insertFieldValue=async(t,n,o,i)=>this.form.insertFieldValue(this.getFormFieldName(t),n,o,i),this.replaceFieldValue=async(t,n,o,i)=>this.form.replaceFieldValue(this.getFormFieldName(t),n,o,i),this.removeFieldValue=async(t,n,o)=>this.form.removeFieldValue(this.getFormFieldName(t),n,o),this.swapFieldValues=(t,n,o,i)=>this.form.swapFieldValues(this.getFormFieldName(t),n,o,i),this.moveFieldValues=(t,n,o,i)=>this.form.moveFieldValues(this.getFormFieldName(t),n,o,i),this.clearFieldValues=(t,n)=>this.form.clearFieldValues(this.getFormFieldName(t),n),this.resetField=t=>this.form.resetField(this.getFormFieldName(t)),this.validateAllFields=t=>this.form.validateAllFields(t),r.form instanceof Ue){const t=r.form;if(this.form=t.form,typeof r.fields=="string")this.fieldsMap=t.getFormFieldName(r.fields);else{const n={...r.fields};for(const o in n)n[o]=t.getFormFieldName(n[o]);this.fieldsMap=n}}else this.form=r.form,this.fieldsMap=r.fields;this.store=new z({deps:[this.form.store],fn:({currDepVals:t})=>{const n=t[0];let o;if(typeof this.fieldsMap=="string")o=se(n.values,this.fieldsMap);else{o={};const i=this.fieldsMap;for(const s in i)o[s]=se(n.values,i[s])}return{values:o}}})}get state(){return this.store.state}async handleSubmit(r){return this.form.handleSubmit(r)}}function ro({className:e,...r}){return l.jsx(wn,{"data-slot":"label",className:A("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}function wr({className:e,orientation:r="horizontal",decorative:t=!0,...n}){return l.jsx(Nn,{"data-slot":"separator",decorative:t,orientation:r,className:A("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...n})}const no=ft("group/field flex w-full gap-3 data-[invalid=true]:text-destructive",{variants:{orientation:{vertical:["flex-col [&>*]:w-full [&>.sr-only]:w-auto"],horizontal:["flex-row items-center","[&>[data-slot=field-label]]:flex-auto","has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px"],responsive:["flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto","@md/field-group:[&>[data-slot=field-label]]:flex-auto","@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px"]}},defaultVariants:{orientation:"vertical"}});function oo({className:e,orientation:r="vertical",...t}){return l.jsx("div",{role:"group","data-slot":"field","data-orientation":r,className:A(no({orientation:r}),e),...t})}function io({className:e,...r}){return l.jsx(ro,{"data-slot":"field-label",className:A("group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50","has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>*]:data-[slot=field]:p-4","has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10",e),...r})}function so({className:e,...r}){return l.jsx("p",{"data-slot":"field-description",className:A("text-muted-foreground text-sm leading-normal font-normal group-has-[[data-orientation=horizontal]]/field:text-balance","last:mt-0 nth-last-2:-mt-1 [[data-variant=legend]+&]:-mt-1.5","[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4",e),...r})}const ao=ft("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function lo({className:e,variant:r="default",size:t="default",asChild:n=!1,...o}){const i=n?nn:"button";return l.jsx(i,{"data-slot":"button","data-variant":r,"data-size":t,className:A(ao({variant:r,size:t,className:e})),...o})}function yt({className:e,type:r,...t}){return l.jsx("input",{type:r,"data-slot":"input",className:A("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...t})}function co({className:e,...r}){return l.jsx("div",{"data-slot":"input-group",role:"group",className:A("group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none","h-9 min-w-0 has-[>textarea]:h-auto","has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]","has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40",e),...r})}const uo=ft("text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none [&>svg:not([class*='size-'])]:size-4 [&>kbd]:rounded-[calc(var(--radius)-5px)] group-data-[disabled=true]/input-group:opacity-50",{variants:{align:{"inline-start":"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]","inline-end":"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]","block-start":"order-first w-full justify-start px-3 pt-3 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5","block-end":"order-last w-full justify-start px-3 pb-3 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5"}},defaultVariants:{align:"inline-start"}});function K({className:e,align:r="inline-start",...t}){return l.jsx("div",{role:"group","data-slot":"input-group-addon","data-align":r,className:A(uo({align:r}),e),onClick:n=>{n.target.closest("button")||n.currentTarget.parentElement?.querySelector("input")?.focus()},...t})}function fo({className:e,...r}){return l.jsx(yt,{"data-slot":"input-group-control",className:A("flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",e),...r})}const Ee=p.forwardRef(({fieldProps:e,labelProps:r,descriptionProps:t,label:n,description:o,inputProps:i,children:s},c)=>{const a=Uo();return l.jsxs(oo,{...e,children:[n&&l.jsx(io,{htmlFor:a.name,...r,children:n}),s({id:a.name,value:a.state.value,onChange:d=>{if(i?.type==="number"){const u=parseFloat(d);a.handleChange(isNaN(u)?"":u)}else a.handleChange(d)},onBlur:a.handleBlur,ref:c}),o&&l.jsx(so,{...t,children:o})]})});Ee.displayName="TextFieldBase";const xr=p.forwardRef(({fieldProps:e,labelProps:r,inputProps:t,descriptionProps:n,label:o,description:i,addon:s,transformValue:c},a)=>l.jsx(Ee,{fieldProps:e,labelProps:r,descriptionProps:n,inputProps:t,label:o,description:i,ref:a,children:({id:d,value:u,onChange:f,onBlur:h,ref:m})=>l.jsxs(co,{children:[l.jsx(fo,{ref:m,id:d,value:c?c(u):u,onChange:v=>f(v.currentTarget.value),onBlur:h,...t}),s&&s]})}));xr.displayName="InputGroupText";function Rt(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function ho(e,r,t){return r=Ke(r),(function(n,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i})(n)})(e,Mr()?Reflect.construct(r,t||[],Ke(e).constructor):r.apply(e,t))}function mo(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function po(e,r,t){return Object.defineProperty(e,"prototype",{writable:!1}),e}function Sr(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=(function(a,d){if(a){if(typeof a=="string")return Rt(a,d);var u={}.toString.call(a).slice(8,-1);return u==="Object"&&a.constructor&&(u=a.constructor.name),u==="Map"||u==="Set"?Array.from(a):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Rt(a,d):void 0}})(e))||r){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(a){throw a},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var a=t.next();return s=a.done,a},e:function(a){c=!0,i=a},f:function(){try{s||t.return==null||t.return()}finally{if(c)throw i}}}}function Fr(e,r,t){return(r=(function(n){var o=(function(i,s){if(typeof i!="object"||!i)return i;var c=i[Symbol.toPrimitive];if(c!==void 0){var a=c.call(i,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(i)})(n,"string");return typeof o=="symbol"?o:o+""})(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ge.apply(null,arguments)}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ke(e)}function vo(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&lt(e,r)}function Mr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Mr=function(){return!!e})()}function _t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function Re(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?_t(Object(t),!0).forEach((function(n){Fr(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_t(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function jr(e,r){if(e==null)return{};var t,n,o=(function(s,c){if(s==null)return{};var a={};for(var d in s)if({}.hasOwnProperty.call(s,d)){if(c.includes(d))continue;a[d]=s[d]}return a})(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function lt(e,r){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},lt(e,r)}function we(e,r){var t,n=r.replacementChars,o=r.replacement,i=r.separate,s=n,c="",a=Sr(e);try{for(a.s();!(t=a.n()).done;){var d,u=t.value,f=!Object.prototype.hasOwnProperty.call(o,u)&&((d=o[s[0]])===null||d===void 0?void 0:d.test(u));(i&&u===s[0]||f)&&(s=s.slice(1),c+=u)}}catch(h){a.e(h)}finally{a.f()}return c}function Vr(e,r){var t,n=r.mask,o=r.replacement,i=r.separate,s=r.showMask,c=0,a="",d=Sr(n);try{for(d.s();!(t=d.n()).done;){var u=t.value;if(!s&&e[c]===void 0)break;Object.prototype.hasOwnProperty.call(o,u)&&e[c]!==void 0?a+=e[c++]:a+=u}}catch(h){d.e(h)}finally{d.f()}if(i&&!s){for(var f=n.length-1;f>=0&&a[f]===n[f];f--);a=a.slice(0,f+1)}return a}function Er(e,r){for(var t=r.mask,n=r.replacement,o=[],i=0;i<t.length;i++){var s,c=(s=e[i])!==null&&s!==void 0?s:t[i],a=Object.prototype.hasOwnProperty.call(n,c)?"replacement":e[i]!==void 0&&e[i]!==t[i]?"input":"mask";o.push({type:a,value:c,index:i})}return o}function fe(e){return e.length>0?Fr({},e,/./):{}}function ct(e,r){for(var t=r.start,n=t===void 0?0:t,o=r.end,i=r.mask,s=r.replacement,c=r.separate,a=e.slice(n,o),d=i.slice(n,o),u="",f=0;f<d.length;f++){var h=Object.prototype.hasOwnProperty.call(s,d[f]);h&&a[f]!==void 0&&a[f]!==d[f]?u+=a[f]:h&&c&&(u+=d[f])}return u}function Cr(e,r){var t=r.mask,n=r.replacement,o=typeof n=="string"?fe(n):n,i=RegExp("[^".concat(Object.keys(o).join(""),"]"),"g");return Vr(we(e,{replacementChars:t.replace(i,""),replacement:o,separate:!1}),{mask:t,replacement:o,separate:!1,showMask:!1})}function go(e,r){var t=r.mask,n=r.replacement,o=typeof n=="string"?fe(n):n,i=ct(e,{mask:t,replacement:o,separate:!1}),s=RegExp("[^".concat(Object.keys(o).join(""),"]"),"g");return we(i,{replacementChars:t.replace(s,""),replacement:o,separate:!1})}function bo(e,r){var t=r.mask,n=r.replacement,o=typeof n=="string"?fe(n):n;return Er(Cr(e,{mask:t,replacement:o}),{mask:t,replacement:o})}var yo=["[","]","\\","/","^","$",".","|","?","*","+","(",")","{","}"];function Dt(e){return yo.includes(e)?"\\".concat(e):e}function wo(e,r){for(var t=r.mask,n=r.replacement,o=typeof n=="string"?fe(n):n,i=e==="partial"||e==="partial-inexact",s=e==="full"||e==="partial",c="",a=0;a<t.length;a++){var d=t[a];a===0&&(c="^"),i&&(c+="("),c+=Object.prototype.hasOwnProperty.call(o,d)?"".concat(s?"(?!".concat(Dt(d),")"):"","(").concat(o[d].source,")"):Dt(d),a===t.length-1&&(i&&(c+=")?".repeat(t.length)),c+="$")}return c}function xo(e,r){return new Proxy(e,{set:function(t,n,o){return n==="current"&&(o!==e.current&&(e.current!==null&&r.unregister(e.current),o!==null&&r.register(o)),t[n]=o,!0)}})}function So(e,r,t){return r=Se(r),(function(n,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i})(n)})(e,wt()?Reflect.construct(r,t||[],Se(e).constructor):r.apply(e,t))}function Ar(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Pr(e,r,t){return Object.defineProperty(e,"prototype",{writable:!1}),e}function Fo(e,r,t){return(r=(function(n){var o=(function(i,s){if(typeof i!="object"||!i)return i;var c=i[Symbol.toPrimitive];if(c!==void 0){var a=c.call(i,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(i)})(n,"string");return typeof o=="symbol"?o:o+""})(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Se(e)}function Mo(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Fe(e,r)}function wt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(wt=function(){return!!e})()}function Nt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function Bt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Nt(Object(t),!0).forEach((function(n){Fo(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Nt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function jo(e,r){if(e==null)return{};var t,n,o=(function(s,c){if(s==null)return{};var a={};for(var d in s)if({}.hasOwnProperty.call(s,d)){if(c.includes(d))continue;a[d]=s[d]}return a})(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function Fe(e,r){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Fe(e,r)}function ut(e){return ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ut(e)}function dt(e){var r=typeof Map=="function"?new Map:void 0;return dt=function(t){if(t===null||!(function(o){try{return Function.toString.call(o).indexOf("[native code]")!==-1}catch{return typeof o=="function"}})(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return(function(o,i,s){if(wt())return Reflect.construct.apply(null,arguments);var c=[null];c.push.apply(c,i);var a=new(o.bind.apply(o,c));return s&&Fe(a,s.prototype),a})(t,arguments,Se(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Fe(n,t)},dt(e)}var xe=(function(e){function r(t){var n;return Ar(this,r),(n=So(this,r,[t])).name="SyntheticChangeError",n}return Mo(r,e),Pr(r)})(dt(Error)),$t,Vo=["options"],Eo=["text","email","tel","search","url"],Or=Pr((function e(r){var t=r.init,n=r.tracking;Ar(this,e);var o=new WeakMap;this.register=function(i){var s;if(Eo.includes(i.type)){var c=(s=i._wrapperState)!==null&&s!==void 0?s:{},a=c.initialValue,d=a===void 0?"":a,u=c.controlled,f=u!==void 0&&u,h=t({initialValue:i.value||d,controlled:f}),m=h.value,v=h.options,b={value:m,options:v,fallbackOptions:v},y={id:-1,cachedId:-1},g={value:"",selectionStart:0,selectionEnd:0},w=Object.getOwnPropertyDescriptor("_valueTracker"in i?i:HTMLInputElement.prototype,"value");Object.defineProperty(i,"value",Bt(Bt({},w),{},{set:function(E){var M;g.value=E,w==null||(M=w.set)===null||M===void 0||M.call(i,E)}})),i.value=m;var j=function(){var E=function(){var M,P;g.selectionStart=(M=i.selectionStart)!==null&&M!==void 0?M:0,g.selectionEnd=(P=i.selectionEnd)!==null&&P!==void 0?P:0,y.id=window.setTimeout(E)};y.id=window.setTimeout(E)},V=function(){window.clearTimeout(y.id),y.id=-1,y.cachedId=-1},F=function(E){try{var M,P;if(y.cachedId===y.id)throw new xe("The input selection has not been updated.");y.cachedId=y.id;var x=i.value,C=i.selectionStart,O=i.selectionEnd;if(C===null||O===null)throw new xe("The selection attributes have not been initialized.");var I,S=g.value;if(E.inputType===void 0&&(g.selectionStart=0,g.selectionEnd=S.length),C>g.selectionStart?I="insert":C<=g.selectionStart&&C<g.selectionEnd?I="deleteBackward":C===g.selectionEnd&&x.length<S.length&&(I="deleteForward"),I===void 0||(I==="deleteBackward"||I==="deleteForward")&&x.length>S.length)throw new xe("Input type detection error.");var T="",ee=g.selectionStart,te=g.selectionEnd;if(I==="insert")T=x.slice(g.selectionStart,C);else{var me=S.length-x.length;ee=C,te=C+me}b.value!==S?b.options=b.fallbackOptions:b.fallbackOptions=b.options;var pe=b.options,re=n({inputType:I,previousValue:S,previousOptions:pe,value:x,addedValue:T,changeStart:ee,changeEnd:te,selectionStart:C,selectionEnd:O}),Ce=re.options,D=jo(re,Vo);i.value=D.value,i.setSelectionRange(D.selectionStart,D.selectionEnd),b.value=D.value,b.options=Ce,g.selectionStart=D.selectionStart,g.selectionEnd=D.selectionEnd,(M=i._valueTracker)===null||M===void 0||(P=M.setValue)===null||P===void 0||P.call(M,S)}catch(Ae){if(i.value=g.value,i.setSelectionRange(g.selectionStart,g.selectionEnd),E.preventDefault(),E.stopPropagation(),Ae.name!=="SyntheticChangeError")throw Ae}};document.activeElement===i&&j(),i.addEventListener("focus",j),i.addEventListener("blur",V),i.addEventListener("input",F),o.set(i,{onFocus:j,onBlur:V,onInput:F})}},this.unregister=function(i){var s=o.get(i);s!==void 0&&(i.removeEventListener("focus",s.onFocus),i.removeEventListener("blur",s.onBlur),i.removeEventListener("input",s.onInput),o.delete(i))}}));$t=Or,Object.defineProperty($t.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,configurable:!0,value:"Input"});function Co(e,r){return p.useCallback((function(t){e.current=t,typeof r=="function"?r(t):ut(r)==="object"&&r!==null&&(r.current=t)}),[e,r])}var zt,Ao=["track","modify"];function ie(e){var r,t,n,o;return{mask:(r=e.mask)!==null&&r!==void 0?r:"",replacement:typeof e.replacement=="string"?fe(e.replacement):(t=e.replacement)!==null&&t!==void 0?t:{},showMask:(n=e.showMask)!==null&&n!==void 0&&n,separate:(o=e.separate)!==null&&o!==void 0&&o,track:e.track,modify:e.modify}}var Tr=(function(e){function r(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return mo(this,r),(t=ho(this,r,[{init:function(o){var i=o.initialValue,s=o.controlled,c=ie(n),a=c.mask,d=c.replacement,u=c.separate,f=c.showMask;return i=s||i?i:f?a:"",{value:i,options:{mask:a,replacement:d,separate:u}}},tracking:function(o){var i=o.inputType,s=o.previousValue,c=o.previousOptions,a=o.addedValue,d=o.changeStart,u=o.changeEnd,f=ie(n),h=f.track,m=f.modify,v=jr(f,Ao),b=v.mask,y=v.replacement,g=v.showMask,w=v.separate,j=Re(Re({},i==="insert"?{inputType:i,data:a}:{inputType:i,data:null}),{},{value:s,selectionStart:d,selectionEnd:u}),V=h?.(j);if(V===!1)throw new xe("Custom tracking stop.");V===null?a="":V!==!0&&V!==void 0&&(a=V);var F=m?.(j);F?.mask!==void 0&&(b=F.mask),F?.replacement!==void 0&&(y=typeof F?.replacement=="string"?fe(F?.replacement):F.replacement),F?.showMask!==void 0&&(g=F.showMask),F?.separate!==void 0&&(w=F.separate);var E=ct(s,Re({end:d},c)),M=ct(s,Re({start:u},c)),P=RegExp("[^".concat(Object.keys(y).join(""),"]"),"g"),x=b.replace(P,"");if(E&&(E=we(E,{replacementChars:x,replacement:y,separate:w}),x=x.slice(E.length)),a&&(a=we(a,{replacementChars:x,replacement:y,separate:!1}),x=x.slice(a.length)),i==="insert"&&a==="")throw new xe("The character does not match the key value of the `replacement` object.");if(w){var C=b.slice(d,u).replace(P,""),O=C.length-a.length;O<0?M=M.slice(-O):O>0&&(M=C.slice(-O)+M)}M&&(M=we(M,{replacementChars:x,replacement:y,separate:w}));var I=Vr(E+a+M,{mask:b,replacement:y,separate:w,showMask:g}),S=(function(T){var ee,te,me,pe=T.inputType,re=T.value,Ce=T.addedValue,D=T.beforeChangeValue,Ae=T.mask,xt=T.replacement,Jr=T.separate,Qe=Er(re,{mask:Ae,replacement:xt}).filter((function(Je){var Mt=Je.type;return Mt==="input"||Jr&&Mt==="replacement"})),St=(ee=Qe[D.length+Ce.length-1])===null||ee===void 0?void 0:ee.index,ne=(te=Qe[D.length-1])===null||te===void 0?void 0:te.index,oe=(me=Qe[D.length+Ce.length])===null||me===void 0?void 0:me.index;if(pe==="insert"){if(St!==void 0)return St+1;if(oe!==void 0)return oe;if(ne!==void 0)return ne+1}if(pe==="deleteForward"){if(oe!==void 0)return oe;if(ne!==void 0)return ne+1}if(pe==="deleteBackward"){if(ne!==void 0)return ne+1;if(oe!==void 0)return oe}var Ft=re.split("").findIndex((function(Je){return Object.prototype.hasOwnProperty.call(xt,Je)}));return Ft!==-1?Ft:re.length})({inputType:i,value:I,addedValue:a,beforeChangeValue:E,mask:b,replacement:y,separate:w});return{value:I,selectionStart:S,selectionEnd:S,options:{mask:b,replacement:y,separate:w}}}}])).format=function(o){return Cr(o,ie(n))},t.formatToParts=function(o){return bo(o,ie(n))},t.unformat=function(o){return go(o,ie(n))},t.generatePattern=function(o){return wo(o,ie(n))},t}return vo(r,Or),po(r)})();zt=Tr,Object.defineProperty(zt.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,configurable:!0,value:"Mask"});function Po(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.mask,t=e.replacement,n=e.showMask,o=e.separate,i=e.track,s=e.modify,c=p.useRef(null),a=p.useRef({mask:r,replacement:t,showMask:n,separate:o,track:i,modify:s});return a.current.mask=r,a.current.replacement=t,a.current.showMask=n,a.current.separate=o,a.current.track=i,a.current.modify=s,p.useMemo((function(){return xo(c,new Tr(a.current))}),[])}var Oo=["component","mask","replacement","showMask","separate","track","modify"];function To(e,r){var t=e.component,n=e.mask,o=e.replacement,i=e.showMask,s=e.separate,c=e.track,a=e.modify,d=jr(e,Oo),u=Po({mask:n,replacement:o,showMask:i,separate:s,track:c,modify:a}),f=Co(u,r);return t?$.createElement(t,Ge({ref:f},d)):$.createElement("input",Ge({ref:f},d))}var ko=p.forwardRef(To);const kr=p.forwardRef(({fieldProps:e,labelProps:r,inputProps:t,descriptionProps:n,label:o,description:i,mask:s="",replacement:c,showMask:a=!1,separate:d=!1},u)=>l.jsx(Ee,{fieldProps:e,labelProps:r,inputProps:t,descriptionProps:n,label:o,description:i,ref:u,children:({id:f,value:h,onChange:m,onBlur:v,ref:b})=>l.jsx(ko,{ref:b,id:f,mask:s,replacement:c,showMask:a,separate:d,value:String(h),onChange:y=>m(y.target.value),onBlur:v,className:A("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t?.className),...t})}));kr.displayName="InputMask";const Ir=p.forwardRef(({fieldProps:e,labelProps:r,inputProps:t,descriptionProps:n,label:o,description:i},s)=>l.jsx(Ee,{fieldProps:e,labelProps:r,inputProps:t,descriptionProps:n,label:o,description:i,ref:s,children:({id:c,value:a,onChange:d,onBlur:u,ref:f})=>l.jsx(yt,{ref:f,id:c,value:a,onChange:h=>d(h.target.value),onBlur:u,...t})}));Ir.displayName="InputText";const Lr=p.forwardRef(({fieldProps:e,labelProps:r,inputProps:t,descriptionProps:n,label:o,description:i},s)=>{const c=u=>{if(!u)return"";const f=u.padStart(3,"0"),h=f.slice(-2),m=f.slice(0,-2);return`${parseInt(m,10).toString()}:${h}`},a=(u,f)=>h=>{let v=h.target.value.replace(/\D/g,"");if(v=v.slice(0,5),v.length>=2&&parseInt(v.slice(-2),10)>59)return;const b=c(v);f(b)},d=u=>f=>{["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Home","End"].includes(f.key)||f.metaKey||f.ctrlKey||f.altKey||/^\d$/.test(f.key)||f.preventDefault()};return l.jsx(Ee,{fieldProps:e,labelProps:r,inputProps:t,descriptionProps:n,label:o,description:i,ref:s,children:({id:u,value:f,onChange:h,onBlur:m,ref:v})=>l.jsx(yt,{ref:v,id:u,type:"text",value:String(f),onChange:a(String(f),h),onKeyDown:d(),onBlur:m,placeholder:"0:00",className:A("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t?.className),...t})})});Lr.displayName="InputTimeDuration";const Me=typeof window<"u"?p.useLayoutEffect:p.useEffect;function Io(e){const[r,t]=p.useState(()=>({form:e.form,name:e.name})),[n,o]=p.useState(()=>new It({...e}));(r.form!==e.form||r.name!==e.name)&&(o(new It({...e})),t({form:e.form,name:e.name}));const i=B(n.store,e.mode==="array"?m=>Object.keys(m.value??[]).length:m=>m.value),s=B(n.store,m=>m.meta.isTouched),c=B(n.store,m=>m.meta.isBlurred),a=B(n.store,m=>m.meta.isDirty),d=B(n.store,m=>m.meta.errorMap),u=B(n.store,m=>m.meta.errorSourceMap),f=B(n.store,m=>m.meta.isValidating),h=p.useMemo(()=>{const v={...n,get state(){return{value:e.mode==="array"?n.state.value:i,get meta(){return{...n.state.meta,isTouched:s,isBlurred:c,isDirty:a,errorMap:d,errorSourceMap:u,isValidating:f}}}}};return v.Field=Rr,v},[n,e.mode,i,s,c,a,d,u,f]);return Me(n.mount,[n]),Me(()=>{n.update(e)}),h}const Rr=(({children:e,...r})=>{const t=Io(r),n=p.useMemo(()=>Ve(e,t),[e,t]);return l.jsx(l.Fragment,{children:n})});function Lo(){return p.useState(()=>br())[0]}const Ro=p.version.split(".")[0]==="17"?Lo:p.useId;function _o({form:e,selector:r,children:t}){const n=B(e.store,r);return l.jsx(l.Fragment,{children:Ve(t,n)})}function Do(e){const r=Ro(),[t,n]=p.useState(e?.formId),[o,i]=p.useState(()=>new kt({...e,formId:e?.formId??r}));if(t!==e?.formId){const c=e?.formId??r;i(new kt({...e,formId:c})),n(c)}const s=p.useMemo(()=>{const c={...o,handleSubmit:((...a)=>o._handleSubmit(...a)),get formId(){return o._formId},get state(){return o.store.state}};return c.Field=function(d){return l.jsx(Rr,{...d,form:o})},c.Subscribe=function(d){return l.jsx(_o,{form:o,selector:d.selector,children:d.children})},c},[o]);return Me(o.mount,[]),Me(()=>{o.update(e)}),s}function No({lens:e,selector:r,children:t}){const n=B(e.store,r);return l.jsx(l.Fragment,{children:Ve(t,n)})}function Bo(e){const[r]=p.useState(()=>{const t=new Ue(e),n=e.form instanceof Ue?e.form.form:e.form,o=t;return o.AppForm=function(s){return l.jsx(n.AppForm,{...s})},o.AppField=function(s){return l.jsx(n.AppField,{...r.getFormFieldOptions(s)})},o.Field=function(s){return l.jsx(n.Field,{...r.getFormFieldOptions(s)})},o.Subscribe=function(s){return l.jsx(No,{lens:r,selector:s.selector,children:s.children})},Object.assign(o,{...e.formComponents})});return Me(r.mount,[r]),r}const Ht=p.createContext(null),_r=p.createContext(null);function Dr(){const e=p.useContext(_r);if(!e)throw new Error("`formContext` only works when within a `formComponent` passed to `createFormHook`");return e}function $o(){function e(){const r=p.useContext(Ht);if(!r)throw new Error("`fieldContext` only works when within a `fieldComponent` passed to `createFormHook`");return r}return{fieldContext:Ht,useFieldContext:e,useFormContext:Dr,formContext:_r}}function zo({fieldComponents:e,fieldContext:r,formContext:t,formComponents:n}){function o(a){const d=Do(a),u=p.useMemo(()=>({children:m})=>l.jsx(t.Provider,{value:d,children:m}),[d]),f=p.useMemo(()=>(({children:v,...b})=>l.jsx(d.Field,{...b,children:y=>l.jsx(r.Provider,{value:y,children:v(Object.assign(y,e))})})),[d]);return p.useMemo(()=>Object.assign(d,{AppField:f,AppForm:u,...n}),[d,f,u])}function i({render:a,props:d}){return u=>a({...d,...u})}function s({render:a,props:d,defaultValues:u}){return function(h){const m=p.useMemo(()=>({form:h.form,fields:h.fields,defaultValues:u,formComponents:n}),[h.form,h.fields]),v=Bo(m);return a({...d,...h,group:v})}}function c(a){return Dr()}return{useAppForm:o,withForm:i,withFieldGroup:s,useTypedAppFormContext:c}}const{fieldContext:Ho,formContext:Wo,useFieldContext:Uo}=$o(),{useAppForm:Go,withForm:he}=zo({fieldComponents:{InputText:Ir,InputGroupText:xr,InputMask:kr,InputTimeDuration:Lr},formComponents:{},fieldContext:Ho,formContext:Wo}),J={printerPrice:0,printerLifetimeHours:0,filamentCostPerKg:0,filamentUsedGrams:0,electricityCostPerKwh:0,printerPowerConsumption:.2,printDurationHours:"",failureRatePercent:10,profitMarginPercent:30};function Ko(e){return q({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M240,52H16A12,12,0,0,0,4,64V192a12,12,0,0,0,12,12H240a12,12,0,0,0,12-12V64A12,12,0,0,0,240,52ZM181.21,180H74.79A60.18,60.18,0,0,0,28,133.21V122.79A60.18,60.18,0,0,0,74.79,76H181.21A60.18,60.18,0,0,0,228,122.79v10.42A60.18,60.18,0,0,0,181.21,180ZM228,97.94A36.23,36.23,0,0,1,206.06,76H228ZM49.94,76A36.23,36.23,0,0,1,28,97.94V76ZM28,158.06A36.23,36.23,0,0,1,49.94,180H28ZM206.06,180A36.23,36.23,0,0,1,228,158.06V180ZM128,88a40,40,0,1,0,40,40A40,40,0,0,0,128,88Zm0,56a16,16,0,1,1,16-16A16,16,0,0,1,128,144Z"},child:[]}]})(e)}function qo(e){return q({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M214.67,68H204V40a12,12,0,0,0-12-12H64A12,12,0,0,0,52,40V68H41.33C25.16,68,12,80.56,12,96v80a12,12,0,0,0,12,12H52v28a12,12,0,0,0,12,12H192a12,12,0,0,0,12-12V188h28a12,12,0,0,0,12-12V96C244,80.56,230.84,68,214.67,68ZM76,52H180V68H76ZM180,204H76V172H180Zm40-40H204v-4a12,12,0,0,0-12-12H64a12,12,0,0,0-12,12v4H36V96c0-2.17,2.44-4,5.33-4H214.67c2.89,0,5.33,1.83,5.33,4Zm-16-44a16,16,0,1,1-16-16A16,16,0,0,1,204,120Z"},child:[]}]})(e)}function Xo(e){return q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(e)}const R=$.memo(({content:e})=>l.jsxs(on,{children:[l.jsx(sn,{children:l.jsx(Xo,{className:"text-muted-foreground"})}),l.jsx(an,{className:"max-w-xs",children:e})]}));R.displayName="TooltipInfo";const Z=e=>{if(!e)return e;const r=parseFloat(e.toString().replace(/[^0-9.-]+/g,""));return isNaN(r)?e:r.toString()},Yo=e=>{if(typeof e=="number")return e;if(!e||typeof e!="string")return 0;const r=e.split(":");if(r.length!==2)return 0;const t=parseInt(r[0],10)||0,n=parseInt(r[1],10)||0;return t+n/60},Zo=e=>isNaN(e)||e===null||e===void 0||e===0?"":e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),Nr=he({defaultValues:J,render:({form:e})=>l.jsxs(l.Fragment,{children:[l.jsx(e.AppField,{name:"printerPrice",children:r=>l.jsx(r.InputGroupText,{label:l.jsxs(l.Fragment,{children:["PreÃ§o da impressora",l.jsx(R,{content:"Informe o preÃ§o de compra da impressora."})]}),inputProps:{type:"number",step:"0.01"},addon:l.jsx(K,{children:"R$"})})}),l.jsx(e.AppField,{name:"printerLifetimeHours",children:r=>l.jsx(r.InputGroupText,{label:l.jsxs(l.Fragment,{children:["Vida Ãºtil da impressora",l.jsx(R,{content:"Informe a vida Ãºtil estimada da impressora em horas."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Z,addon:l.jsx(K,{children:"H"})})})]})});Nr.displayName="PrinterDepreciationForm";const Br=he({defaultValues:J,render:({form:e})=>l.jsx(l.Fragment,{children:l.jsx(e.AppField,{name:"filamentCostPerKg",children:r=>l.jsx(r.InputGroupText,{label:l.jsxs(l.Fragment,{children:["Custo do filamento",l.jsx(R,{content:"Informe o custo do filamento por quilograma."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Z,addon:l.jsx(K,{children:"R$/kg"})})})})});Br.displayName="FilamentForm";const $r=he({defaultValues:J,render:({form:e})=>l.jsxs(l.Fragment,{children:[l.jsx(e.AppField,{name:"electricityCostPerKwh",children:r=>l.jsx(r.InputGroupText,{label:l.jsxs(l.Fragment,{children:["Custo da eletricidade",l.jsx(R,{content:"Informe o custo da eletricidade por quilowatt-hora."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Z,addon:l.jsx(K,{children:"R$/kWh"})})}),l.jsx(e.AppField,{name:"printerPowerConsumption",children:r=>l.jsx(r.InputGroupText,{label:l.jsxs(l.Fragment,{children:["Consumo de energia da impressora",l.jsx(R,{content:"Informe o consumo de energia da impressora em quilowatts."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Z,addon:l.jsx(K,{children:"kW"})})})]})});$r.displayName="EnergyForm";const zr=he({defaultValues:J,render:({form:e})=>l.jsxs(l.Fragment,{children:[l.jsx(e.AppField,{name:"filamentUsedGrams",children:r=>l.jsx(r.InputGroupText,{label:l.jsxs(l.Fragment,{children:["Quantidade de filamento usado",l.jsx(R,{content:"Informe a quantidade de filamento usado em gramas."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Z,addon:l.jsx(K,{children:"g"})})}),l.jsx(e.AppField,{name:"printDurationHours",children:r=>l.jsx(r.InputTimeDuration,{label:l.jsxs(l.Fragment,{children:["DuraÃ§Ã£o da impressÃ£o",l.jsx(R,{content:"Informe a duraÃ§Ã£o da impressÃ£o."})]})})}),l.jsx(e.AppField,{name:"failureRatePercent",children:r=>l.jsx(r.InputGroupText,{label:l.jsxs(l.Fragment,{children:["Taxa de falha",l.jsx(R,{content:"Informe a taxa de falha em porcentagem."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Z,addon:l.jsx(K,{children:"%"})})})]})});zr.displayName="PrintForm";const Hr=he({defaultValues:J,render:({form:e})=>l.jsx(l.Fragment,{children:l.jsx(e.AppField,{name:"profitMarginPercent",children:r=>l.jsx(r.InputGroupText,{label:l.jsxs(l.Fragment,{children:["Margem de lucro",l.jsx(R,{content:"Informe a margem de lucro em porcentagem."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Z,addon:l.jsx(K,{children:"%"})})})})});Hr.displayName="ProfitForm";function Wr({className:e,...r}){return l.jsx("div",{"data-slot":"card",className:A("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function Ur({className:e,...r}){return l.jsx("div",{"data-slot":"card-header",className:A("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function Gr({className:e,...r}){return l.jsx("div",{"data-slot":"card-title",className:A("leading-none font-semibold",e),...r})}function Kr({className:e,...r}){return l.jsx("div",{"data-slot":"card-description",className:A("text-muted-foreground text-sm",e),...r})}function Qo({className:e,...r}){return l.jsx("div",{"data-slot":"card-action",className:A("col-start-2 row-span-2 row-start-1 self-start justify-self-end",e),...r})}function qr({className:e,...r}){return l.jsx("div",{"data-slot":"card-content",className:A("px-6",e),...r})}function Jo({...e}){return l.jsx(bn,{"data-slot":"collapsible",...e})}function ei({...e}){return l.jsx(Jt,{"data-slot":"collapsible-trigger",...e})}function ti({...e}){return l.jsx(er,{"data-slot":"collapsible-content",...e})}function ri(e){return q({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m7 6 5 5 5-5"},child:[]},{tag:"path",attr:{d:"m7 13 5 5 5-5"},child:[]}]})(e)}function ni(e){return q({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m17 11-5-5-5 5"},child:[]},{tag:"path",attr:{d:"m17 18-5-5-5 5"},child:[]}]})(e)}function Xr({title:e,description:r,children:t,icon:n}){const[o,i]=p.useState(!0);return l.jsx(Jo,{open:o,onOpenChange:i,children:l.jsxs(Wr,{children:[l.jsxs(Ur,{children:[l.jsxs(Gr,{className:"flex items-center gap-2",children:[n,e]}),l.jsx(Kr,{children:r}),l.jsx(Qo,{children:l.jsx(ei,{asChild:!0,children:l.jsx(lo,{variant:"ghost",size:"icon",children:o?l.jsx(ni,{}):l.jsx(ri,{})})})})]}),l.jsx(ti,{children:l.jsx(qr,{className:"flex flex-col gap-4",children:t})})]})})}Xr.displayName="RenderSession";function oi(e){return q({attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M16 14.176c-5.915 0-10.549-2.085-10.549-4.747s4.634-4.747 10.549-4.747 10.549 2.085 10.549 4.747c0 2.662-4.634 4.747-10.549 4.747zM16 5.737c-4.491 0-9.494 1.516-9.494 3.692s5.003 3.692 9.494 3.692c4.491 0 9.494-1.516 9.494-3.692s-5.004-3.692-9.494-3.692zM16 18.396c-5.915 0-10.549-2.085-10.549-4.747v-4.22c0-0.292 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.22c0 2.176 5.003 3.692 9.494 3.692s9.494-1.516 9.494-3.692v-4.22c0-0.292 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.22c0 2.662-4.634 4.747-10.549 4.747zM16 23.143c-5.915 0-10.549-2.085-10.549-4.747v-4.747c0-0.291 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.747c0 2.176 5.003 3.692 9.494 3.692s9.494-1.517 9.494-3.692v-4.747c0-0.291 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.747c0 2.662-4.634 4.747-10.549 4.747zM16 27.89c-5.915 0-10.549-2.085-10.549-4.747v-4.747c0-0.291 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.747c0 2.176 5.003 3.692 9.494 3.692s9.494-1.517 9.494-3.692v-4.747c0-0.291 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.747c0 2.662-4.634 4.747-10.549 4.747z"},child:[]}]})(e)}function ii(e){return q({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M595.344 64.72h.176-.176zm0 0l-72.207 379.377 261.584.88L428.657 959.28l72.208-417.376-261.568-.912zm.049-63.999c-1.728 0-3.455.063-5.151.19-11.296.913-18.785 4.689-27.664 10.657a64.304 64.304 0 0 0-13.392 11.936 56.688 56.688 0 0 0-3.297 4.288L187.281 502.4c-14.16 19.408-16.24 45.025-5.36 66.433 10.864 21.408 32.832 34.976 56.912 35.152l184.736 1.344-58.08 342.192c-5.52 29.408 10.16 58.72 37.76 70.528a64.19 64.19 0 0 0 25.391 5.216c20.112 0 36.64-9.408 49.041-26.4L836.737 482.56c14.16-19.409 16.225-45.057 5.36-66.433-10.864-21.408-32.832-34.977-56.912-35.152l-184.736-.32 57.456-300.88a62.46 62.46 0 0 0 1.825-15.056c0-34.624-27.569-62.848-62.065-63.968-.767-.032-1.52-.032-2.271-.032z"},child:[]}]})(e)}function si(e){return q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 30c-32 64-22.35 180.063 0 208 42.406 53.007 80 80 80 128 0 32-16 80-48 112v16H176v-16c-32.002-31.995-48-80-48-112 0-48 37.594-74.993 80-128 22.35-27.937 32-144 0-208 48-16 48-16 96 0z"},child:[]}]})(e)}function ai({className:e,children:r,...t}){return l.jsxs(kn,{"data-slot":"scroll-area",className:A("relative",e),...t,children:[l.jsx(In,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:r}),l.jsx(Yr,{}),l.jsx(Ln,{})]})}function Yr({className:e,orientation:r="vertical",...t}){return l.jsx(sr,{"data-slot":"scroll-area-scrollbar",orientation:r,className:A("flex touch-none p-px transition-colors select-none",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...t,children:l.jsx(ur,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const Wt=[{title:"DepreciaÃ§Ã£o da Impressora",description:"Informe dados sobre a depreciaÃ§Ã£o da impressora.",icon:l.jsx(qo,{className:"text-3xl"}),form:Nr},{title:"Filamento",description:"Informe dados sobre o filamento.",icon:l.jsx(oi,{className:"text-3xl"}),form:Br},{title:"Energia",description:"Informe dados sobre o consumo de energia.",icon:l.jsx(ii,{className:"text-3xl"}),form:$r},{title:"ImpressÃ£o",description:"Informe dados sobre a impressÃ£o.",icon:l.jsx(si,{className:"text-3xl"}),form:zr},{title:"Lucro",description:"Informe dados sobre o lucro.",icon:l.jsx(Ko,{className:"text-3xl"}),form:Hr}],Zr=he({defaultValues:J,render:({form:e})=>l.jsxs(ai,{className:"flex flex-1 lg:max-h-[90dvh] pr-4",children:[l.jsx("form",{className:"flex flex-col gap-4 flex-1",onSubmit:r=>{r.preventDefault()},children:Wt.map(r=>{const t=r.form;return l.jsxs(p.Fragment,{children:[r.title!==Wt[0].title&&l.jsx(wr,{}),l.jsx(Xr,{title:r.title,description:r.description,icon:r.icon,children:l.jsx(t,{form:e})},r.title)]},r.title)})}),l.jsx(Yr,{orientation:"horizontal"})]})});Zr.displayName="Form";function li({className:e,...r}){return l.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:l.jsx("table",{"data-slot":"table",className:A("w-full caption-bottom text-sm",e),...r})})}function ci({className:e,...r}){return l.jsx("tbody",{"data-slot":"table-body",className:A("[&_tr:last-child]:border-0",e),...r})}function ui({className:e,...r}){return l.jsx("tr",{"data-slot":"table-row",className:A("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function Ut({className:e,...r}){return l.jsx("td",{"data-slot":"table-cell",className:A("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function di({className:e,...r}){return l.jsx("caption",{"data-slot":"table-caption",className:A("text-muted-foreground mt-4 text-sm",e),...r})}function fi(e){return p.useMemo(()=>{const r=Yo(e.printDurationHours),t=e.printerPrice/(e.printerLifetimeHours||1),n=t*r,i=e.filamentUsedGrams/1e3*e.filamentCostPerKg,s=e.failureRatePercent/100,c=i*s,a=i+c,f=e.printerPowerConsumption*r*e.electricityCostPerKwh,h=n+a+f,m=h*(1+e.profitMarginPercent/100),v=m-h;return{depreciationPerHour:t,depreciationCost:n,filamentCost:i,filamentLossCost:c,filamentCostWithFailure:a,energyCost:f,totalCost:h,profitValue:v,salePrice:m}},[e])}function hi({className:e,...r}){return l.jsx("div",{"data-slot":"skeleton",className:A("bg-accent animate-pulse rounded-md",e),...r})}function Qr(e){const r=Zo(e);return r||l.jsx("div",{className:"flex justify-end",children:l.jsx(hi,{className:"w-20 h-5"})})}function ge({label:e,value:r,tooltipContent:t}){return l.jsxs(ui,{children:[l.jsxs(Ut,{className:"font-medium flex items-center gap-1",children:[e,l.jsx(R,{content:t})]}),l.jsx(Ut,{children:Qr(r)})]})}function rt({label:e,value:r,tooltipContent:t,valueClassName:n}){return l.jsxs("div",{className:"flex align-center justify-between gap-2 items-center",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:e}),l.jsx(R,{content:t})]}),l.jsx("div",{className:A("text-2xl font-bold",n),children:Qr(r)})]})}function mi({values:e}){const r=fi(e);return l.jsxs(Wr,{children:[l.jsxs(Ur,{children:[l.jsx(Gr,{children:"Resultados do cÃ¡lculo"}),l.jsx(Kr,{children:"Aqui vocÃª verÃ¡ os resultados do cÃ¡lculo baseado nos dados fornecidos."})]}),l.jsxs(qr,{children:[l.jsxs(li,{children:[l.jsx(di,{children:"CÃ¡lculo de resultados"}),l.jsxs(ci,{children:[l.jsx(ge,{label:"DepreciaÃ§Ã£o por hora",value:r.depreciationPerHour,tooltipContent:l.jsxs(l.Fragment,{children:["A depreciaÃ§Ã£o por hora Ã© calculada dividindo o preÃ§o da impressora pelo nÃºmero total de horas que ela pode ser usada durante sua vida Ãºtil. ",l.jsx("br",{})," Isso representa o custo de desgaste e obsolescÃªncia da impressora para cada hora de uso."]})}),l.jsx(ge,{label:"Custo de depreciaÃ§Ã£o na peÃ§a",value:r.depreciationCost,tooltipContent:l.jsxs(l.Fragment,{children:["O custo de depreciaÃ§Ã£o na peÃ§a Ã© calculado multiplicando a depreciaÃ§Ã£o por hora pelo nÃºmero de horas que a impressora foi usada para imprimir a peÃ§a. ",l.jsx("br",{})," Isso representa o custo associado ao desgaste da impressora para aquela peÃ§a especÃ­fica."]})}),l.jsx(ge,{label:"Custo do filamento",value:r.filamentCost,tooltipContent:l.jsxs(l.Fragment,{children:["O custo do filamento Ã© calculado multiplicando a quantidade de filamento usado (em kg) pelo custo por kg do filamento. ",l.jsx("br",{})," ","Isso representa o custo do material consumido para imprimir a peÃ§a."]})}),l.jsx(ge,{label:"Custo de perda de filamento",value:r.filamentLossCost,tooltipContent:l.jsxs(l.Fragment,{children:["O custo de perda de filamento representa o valor do filamento que foi desperdiÃ§ado durante o processo de impressÃ£o. ",l.jsx("br",{})," ","Isso pode incluir falhas na impressÃ£o, suportes removidos ou qualquer outro desperdÃ­cio de material."]})}),l.jsx(ge,{label:"Custo de energia",value:r.energyCost,tooltipContent:l.jsxs(l.Fragment,{children:["O custo de energia Ã© calculado multiplicando a quantidade de energia consumida (em kWh) pelo custo por kWh da eletricidade."," ",l.jsx("br",{})," Isso representa o custo da energia elÃ©trica utilizada para imprimir a peÃ§a."]})})]})]}),l.jsx(wr,{className:"my-4"}),l.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[l.jsx(rt,{label:"Custo Total",value:r.totalCost,tooltipContent:l.jsxs(l.Fragment,{children:["O custo total Ã© a soma de todos os custos envolvidos na impressÃ£o da peÃ§a, incluindo depreciaÃ§Ã£o, custo do filamento, custo de perda de filamento e custo de energia.",l.jsx("br",{})," Ele representa o valor total gasto para produzir a peÃ§a."]})}),l.jsx(rt,{label:"Lucro Estimado",value:r.profitValue,valueClassName:"text-green-600",tooltipContent:l.jsxs(l.Fragment,{children:["O lucro estimado Ã© calculado subtraindo o custo total do preÃ§o de venda sugerido. ",l.jsx("br",{})," Ele representa o valor potencial de lucro que pode ser obtido com a venda da peÃ§a com base nos custos calculados e na margem de lucro definida."]})}),l.jsx(rt,{label:"PreÃ§o de Venda Sugerido",value:r.salePrice,valueClassName:"text-green-600",tooltipContent:l.jsxs(l.Fragment,{children:["O preÃ§o de venda sugerido Ã© calculado multiplicando o custo total por (1 + margem de lucro). ",l.jsx("br",{})," Ele representa o preÃ§o recomendado para vender a peÃ§a, levando em consideraÃ§Ã£o os custos envolvidos e a margem de lucro desejada."]})})]})]})]})}const Gt={Form:Zr,Result:mi};function vi(){const e=Go({defaultValues:J}),r=B(e.store,t=>t.values);return l.jsxs("div",{className:"flex flex-col md:flex-row w-full gap-4 p-4",children:[l.jsx(Gt.Form,{form:e}),l.jsx("div",{className:"flex flex-col gap-4 flex-1",children:l.jsx(Gt.Result,{values:r})})]})}export{vi as component};
