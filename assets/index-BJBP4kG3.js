const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BQezJGOC.js","assets/index-CCtJbuFu.js","assets/index-DSPfHjfY.css","assets/EventClient-DmkzSA6S.js"])))=>i.map(i=>d[i]);
import{G as Qe,r as T,m as gr,j as h,n as Ce,p as Dt,q as Me,s as jr,t as qe,v as dt,w as Oo,x as qi,y as zi,R as Wi,z as Ui,F as Hi,D as Gi,A as Yi,B as el,C as tl,E as nl,H as rl,k as Qi,I as Xi,J as ol,K as il,V as al,L as sl,M as ll,N as ul,O as pe,Q as Zi,S as xt,T as it,U as cl,W as dl,X as fl,Y as hl,Z as pl,$ as nn,a0 as ml,a1 as vl,_ as Ji}from"./index-CCtJbuFu.js";import{f as Ye}from"./EventClient-DmkzSA6S.js";function gl(n){return Qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(n)}function yl(n){return Qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(n)}function ea(n){return Qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"7 13 12 18 17 13"},child:[]},{tag:"polyline",attr:{points:"7 6 12 11 17 6"},child:[]}]})(n)}var kr="Collapsible",[bl]=Oo(kr),[xl,Io]=bl(kr),ta=T.forwardRef((n,a)=>{const{__scopeCollapsible:r,open:i,defaultOpen:l,disabled:u,onOpenChange:f,...g}=n,[m,y]=gr({prop:i,defaultProp:l??!1,onChange:f,caller:kr});return h.jsx(xl,{scope:r,disabled:u,contentId:Dt(),open:m,onOpenToggle:T.useCallback(()=>y(k=>!k),[y]),children:h.jsx(Ce.div,{"data-state":Ao(m),"data-disabled":u?"":void 0,...g,ref:a})})});ta.displayName=kr;var na="CollapsibleTrigger",ra=T.forwardRef((n,a)=>{const{__scopeCollapsible:r,...i}=n,l=Io(na,r);return h.jsx(Ce.button,{type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":Ao(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled,...i,ref:a,onClick:Me(n.onClick,l.onOpenToggle)})});ra.displayName=na;var To="CollapsibleContent",oa=T.forwardRef((n,a)=>{const{forceMount:r,...i}=n,l=Io(To,n.__scopeCollapsible);return h.jsx(jr,{present:r||l.open,children:({present:u})=>h.jsx(wl,{...i,ref:a,present:u})})});oa.displayName=To;var wl=T.forwardRef((n,a)=>{const{__scopeCollapsible:r,present:i,children:l,...u}=n,f=Io(To,r),[g,m]=T.useState(i),y=T.useRef(null),k=qe(a,y),C=T.useRef(0),V=C.current,A=T.useRef(0),N=A.current,I=f.open||g,R=T.useRef(I),B=T.useRef(void 0);return T.useEffect(()=>{const $=requestAnimationFrame(()=>R.current=!1);return()=>cancelAnimationFrame($)},[]),dt(()=>{const $=y.current;if($){B.current=B.current||{transitionDuration:$.style.transitionDuration,animationName:$.style.animationName},$.style.transitionDuration="0s",$.style.animationName="none";const X=$.getBoundingClientRect();C.current=X.height,A.current=X.width,R.current||($.style.transitionDuration=B.current.transitionDuration,$.style.animationName=B.current.animationName),m(i)}},[f.open,i]),h.jsx(Ce.div,{"data-state":Ao(f.open),"data-disabled":f.disabled?"":void 0,id:f.contentId,hidden:!I,...u,ref:k,style:{"--radix-collapsible-content-height":V?`${V}px`:void 0,"--radix-collapsible-content-width":N?`${N}px`:void 0,...n.style},children:I&&l})});function Ao(n){return n?"open":"closed"}var Sl=ta,Mr="Dialog",[ia]=Oo(Mr),[_l,et]=ia(Mr),aa=n=>{const{__scopeDialog:a,children:r,open:i,defaultOpen:l,onOpenChange:u,modal:f=!0}=n,g=T.useRef(null),m=T.useRef(null),[y,k]=gr({prop:i,defaultProp:l??!1,onChange:u,caller:Mr});return h.jsx(_l,{scope:a,triggerRef:g,contentRef:m,contentId:Dt(),titleId:Dt(),descriptionId:Dt(),open:y,onOpenChange:k,onOpenToggle:T.useCallback(()=>k(C=>!C),[k]),modal:f,children:r})};aa.displayName=Mr;var sa="DialogTrigger",jl=T.forwardRef((n,a)=>{const{__scopeDialog:r,...i}=n,l=et(sa,r),u=qe(a,l.triggerRef);return h.jsx(Ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":No(l.open),...i,ref:u,onClick:Me(n.onClick,l.onOpenToggle)})});jl.displayName=sa;var Do="DialogPortal",[kl,la]=ia(Do,{forceMount:void 0}),ua=n=>{const{__scopeDialog:a,forceMount:r,children:i,container:l}=n,u=et(Do,a);return h.jsx(kl,{scope:a,forceMount:r,children:T.Children.map(i,f=>h.jsx(jr,{present:r||u.open,children:h.jsx(qi,{asChild:!0,container:l,children:f})}))})};ua.displayName=Do;var yr="DialogOverlay",ca=T.forwardRef((n,a)=>{const r=la(yr,n.__scopeDialog),{forceMount:i=r.forceMount,...l}=n,u=et(yr,n.__scopeDialog);return u.modal?h.jsx(jr,{present:i||u.open,children:h.jsx(Cl,{...l,ref:a})}):null});ca.displayName=yr;var Ml=Yi("DialogOverlay.RemoveScroll"),Cl=T.forwardRef((n,a)=>{const{__scopeDialog:r,...i}=n,l=et(yr,r);return h.jsx(Wi,{as:Ml,allowPinchZoom:!0,shards:[l.contentRef],children:h.jsx(Ce.div,{"data-state":No(l.open),...i,ref:a,style:{pointerEvents:"auto",...i.style}})})}),Vt="DialogContent",da=T.forwardRef((n,a)=>{const r=la(Vt,n.__scopeDialog),{forceMount:i=r.forceMount,...l}=n,u=et(Vt,n.__scopeDialog);return h.jsx(jr,{present:i||u.open,children:u.modal?h.jsx(Pl,{...l,ref:a}):h.jsx(Fl,{...l,ref:a})})});da.displayName=Vt;var Pl=T.forwardRef((n,a)=>{const r=et(Vt,n.__scopeDialog),i=T.useRef(null),l=qe(a,r.contentRef,i);return T.useEffect(()=>{const u=i.current;if(u)return zi(u)},[]),h.jsx(fa,{...n,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Me(n.onCloseAutoFocus,u=>{u.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Me(n.onPointerDownOutside,u=>{const f=u.detail.originalEvent,g=f.button===0&&f.ctrlKey===!0;(f.button===2||g)&&u.preventDefault()}),onFocusOutside:Me(n.onFocusOutside,u=>u.preventDefault())})}),Fl=T.forwardRef((n,a)=>{const r=et(Vt,n.__scopeDialog),i=T.useRef(!1),l=T.useRef(!1);return h.jsx(fa,{...n,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{n.onCloseAutoFocus?.(u),u.defaultPrevented||(i.current||r.triggerRef.current?.focus(),u.preventDefault()),i.current=!1,l.current=!1},onInteractOutside:u=>{n.onInteractOutside?.(u),u.defaultPrevented||(i.current=!0,u.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const f=u.target;r.triggerRef.current?.contains(f)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&l.current&&u.preventDefault()}})}),fa=T.forwardRef((n,a)=>{const{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:u,...f}=n,g=et(Vt,r),m=T.useRef(null),y=qe(a,m);return Ui(),h.jsxs(h.Fragment,{children:[h.jsx(Hi,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:l,onUnmountAutoFocus:u,children:h.jsx(Gi,{role:"dialog",id:g.contentId,"aria-describedby":g.descriptionId,"aria-labelledby":g.titleId,"data-state":No(g.open),...f,ref:y,onDismiss:()=>g.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(El,{titleId:g.titleId}),h.jsx(Il,{contentRef:m,descriptionId:g.descriptionId})]})]})}),Vo="DialogTitle",ha=T.forwardRef((n,a)=>{const{__scopeDialog:r,...i}=n,l=et(Vo,r);return h.jsx(Ce.h2,{id:l.titleId,...i,ref:a})});ha.displayName=Vo;var pa="DialogDescription",ma=T.forwardRef((n,a)=>{const{__scopeDialog:r,...i}=n,l=et(pa,r);return h.jsx(Ce.p,{id:l.descriptionId,...i,ref:a})});ma.displayName=pa;var va="DialogClose",ga=T.forwardRef((n,a)=>{const{__scopeDialog:r,...i}=n,l=et(va,r);return h.jsx(Ce.button,{type:"button",...i,ref:a,onClick:Me(n.onClick,()=>l.onOpenChange(!1))})});ga.displayName=va;function No(n){return n?"open":"closed"}var ya="DialogTitleWarning",[Sd,ba]=el(ya,{contentName:Vt,titleName:Vo,docsSlug:"dialog"}),El=({titleId:n})=>{const a=ba(ya),r=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return T.useEffect(()=>{n&&(document.getElementById(n)||console.error(r))},[r,n]),null},Ol="DialogDescriptionWarning",Il=({contentRef:n,descriptionId:a})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ba(Ol).contentName}}.`;return T.useEffect(()=>{const l=n.current?.getAttribute("aria-describedby");a&&l&&(document.getElementById(a)||console.warn(i))},[i,n,a]),null},Tl=aa,Al=ua,Dl=ca,Vl=da,Nl=ha,Rl=ma,Ro=ga,Bl="Label",xa=T.forwardRef((n,a)=>h.jsx(Ce.label,{...n,ref:a,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(n.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));xa.displayName=Bl;var Ll=xa;function Si(n,[a,r]){return Math.min(r,Math.max(a,n))}var Kl=[" ","Enter","ArrowUp","ArrowDown"],$l=[" ","Enter"],Nt="Select",[Cr,Pr,ql]=ol(Nt),[on]=Oo(Nt,[ql,Xi]),Fr=Xi(),[zl,_t]=on(Nt),[Wl,Ul]=on(Nt),wa=n=>{const{__scopeSelect:a,children:r,open:i,defaultOpen:l,onOpenChange:u,value:f,defaultValue:g,onValueChange:m,dir:y,name:k,autoComplete:C,disabled:V,required:A,form:N}=n,I=Fr(a),[R,B]=T.useState(null),[$,X]=T.useState(null),[ie,oe]=T.useState(!1),ae=tl(y),[Z,de]=gr({prop:i,defaultProp:l??!1,onChange:u,caller:Nt}),[le,ge]=gr({prop:f,defaultProp:g,onChange:m,caller:Nt}),xe=T.useRef(null),ye=R?N||!!R.closest("form"):!0,[te,me]=T.useState(new Set),Ie=Array.from(te).map(Se=>Se.props.value).join(";");return h.jsx(nl,{...I,children:h.jsxs(zl,{required:A,scope:a,trigger:R,onTriggerChange:B,valueNode:$,onValueNodeChange:X,valueNodeHasChildren:ie,onValueNodeHasChildrenChange:oe,contentId:Dt(),value:le,onValueChange:ge,open:Z,onOpenChange:de,dir:ae,triggerPointerDownPosRef:xe,disabled:V,children:[h.jsx(Cr.Provider,{scope:a,children:h.jsx(Wl,{scope:n.__scopeSelect,onNativeOptionAdd:T.useCallback(Se=>{me(Ae=>new Set(Ae).add(Se))},[]),onNativeOptionRemove:T.useCallback(Se=>{me(Ae=>{const je=new Set(Ae);return je.delete(Se),je})},[]),children:r})}),ye?h.jsxs(Wa,{"aria-hidden":!0,required:A,tabIndex:-1,name:k,autoComplete:C,value:le,onChange:Se=>ge(Se.target.value),disabled:V,form:N,children:[le===void 0?h.jsx("option",{value:""}):null,Array.from(te)]},Ie):null]})})};wa.displayName=Nt;var Sa="SelectTrigger",_a=T.forwardRef((n,a)=>{const{__scopeSelect:r,disabled:i=!1,...l}=n,u=Fr(r),f=_t(Sa,r),g=f.disabled||i,m=qe(a,f.onTriggerChange),y=Pr(r),k=T.useRef("touch"),[C,V,A]=Ha(I=>{const R=y().filter(X=>!X.disabled),B=R.find(X=>X.value===f.value),$=Ga(R,I,B);$!==void 0&&f.onValueChange($.value)}),N=I=>{g||(f.onOpenChange(!0),A()),I&&(f.triggerPointerDownPosRef.current={x:Math.round(I.pageX),y:Math.round(I.pageY)})};return h.jsx(rl,{asChild:!0,...u,children:h.jsx(Ce.button,{type:"button",role:"combobox","aria-controls":f.contentId,"aria-expanded":f.open,"aria-required":f.required,"aria-autocomplete":"none",dir:f.dir,"data-state":f.open?"open":"closed",disabled:g,"data-disabled":g?"":void 0,"data-placeholder":Ua(f.value)?"":void 0,...l,ref:m,onClick:Me(l.onClick,I=>{I.currentTarget.focus(),k.current!=="mouse"&&N(I)}),onPointerDown:Me(l.onPointerDown,I=>{k.current=I.pointerType;const R=I.target;R.hasPointerCapture(I.pointerId)&&R.releasePointerCapture(I.pointerId),I.button===0&&I.ctrlKey===!1&&I.pointerType==="mouse"&&(N(I),I.preventDefault())}),onKeyDown:Me(l.onKeyDown,I=>{const R=C.current!=="";!(I.ctrlKey||I.altKey||I.metaKey)&&I.key.length===1&&V(I.key),!(R&&I.key===" ")&&Kl.includes(I.key)&&(N(),I.preventDefault())})})})});_a.displayName=Sa;var ja="SelectValue",ka=T.forwardRef((n,a)=>{const{__scopeSelect:r,className:i,style:l,children:u,placeholder:f="",...g}=n,m=_t(ja,r),{onValueNodeHasChildrenChange:y}=m,k=u!==void 0,C=qe(a,m.onValueNodeChange);return dt(()=>{y(k)},[y,k]),h.jsx(Ce.span,{...g,ref:C,style:{pointerEvents:"none"},children:Ua(m.value)?h.jsx(h.Fragment,{children:f}):u})});ka.displayName=ja;var Hl="SelectIcon",Ma=T.forwardRef((n,a)=>{const{__scopeSelect:r,children:i,...l}=n;return h.jsx(Ce.span,{"aria-hidden":!0,...l,ref:a,children:i||"â–¼"})});Ma.displayName=Hl;var Gl="SelectPortal",Ca=n=>h.jsx(qi,{asChild:!0,...n});Ca.displayName=Gl;var Rt="SelectContent",Pa=T.forwardRef((n,a)=>{const r=_t(Rt,n.__scopeSelect),[i,l]=T.useState();if(dt(()=>{l(new DocumentFragment)},[]),!r.open){const u=i;return u?Qi.createPortal(h.jsx(Fa,{scope:n.__scopeSelect,children:h.jsx(Cr.Slot,{scope:n.__scopeSelect,children:h.jsx("div",{children:n.children})})}),u):null}return h.jsx(Ea,{...n,ref:a})});Pa.displayName=Rt;var Je=10,[Fa,jt]=on(Rt),Yl="SelectContentImpl",Ql=Yi("SelectContent.RemoveScroll"),Ea=T.forwardRef((n,a)=>{const{__scopeSelect:r,position:i="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:u,onPointerDownOutside:f,side:g,sideOffset:m,align:y,alignOffset:k,arrowPadding:C,collisionBoundary:V,collisionPadding:A,sticky:N,hideWhenDetached:I,avoidCollisions:R,...B}=n,$=_t(Rt,r),[X,ie]=T.useState(null),[oe,ae]=T.useState(null),Z=qe(a,ee=>ie(ee)),[de,le]=T.useState(null),[ge,xe]=T.useState(null),ye=Pr(r),[te,me]=T.useState(!1),Ie=T.useRef(!1);T.useEffect(()=>{if(X)return zi(X)},[X]),Ui();const Se=T.useCallback(ee=>{const[ve,...Ne]=ye().map(re=>re.ref.current),[z]=Ne.slice(-1),be=document.activeElement;for(const re of ee)if(re===be||(re?.scrollIntoView({block:"nearest"}),re===ve&&oe&&(oe.scrollTop=0),re===z&&oe&&(oe.scrollTop=oe.scrollHeight),re?.focus(),document.activeElement!==be))return},[ye,oe]),Ae=T.useCallback(()=>Se([de,X]),[Se,de,X]);T.useEffect(()=>{te&&Ae()},[te,Ae]);const{onOpenChange:je,triggerPointerDownPosRef:Pe}=$;T.useEffect(()=>{if(X){let ee={x:0,y:0};const ve=z=>{ee={x:Math.abs(Math.round(z.pageX)-(Pe.current?.x??0)),y:Math.abs(Math.round(z.pageY)-(Pe.current?.y??0))}},Ne=z=>{ee.x<=10&&ee.y<=10?z.preventDefault():X.contains(z.target)||je(!1),document.removeEventListener("pointermove",ve),Pe.current=null};return Pe.current!==null&&(document.addEventListener("pointermove",ve),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ve),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[X,je,Pe]),T.useEffect(()=>{const ee=()=>je(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[je]);const[De,Te]=Ha(ee=>{const ve=ye().filter(be=>!be.disabled),Ne=ve.find(be=>be.ref.current===document.activeElement),z=Ga(ve,ee,Ne);z&&setTimeout(()=>z.ref.current.focus())}),Ve=T.useCallback((ee,ve,Ne)=>{const z=!Ie.current&&!Ne;($.value!==void 0&&$.value===ve||z)&&(le(ee),z&&(Ie.current=!0))},[$.value]),ft=T.useCallback(()=>X?.focus(),[X]),Ke=T.useCallback((ee,ve,Ne)=>{const z=!Ie.current&&!Ne;($.value!==void 0&&$.value===ve||z)&&xe(ee)},[$.value]),Xe=i==="popper"?vo:Oa,ze=Xe===vo?{side:g,sideOffset:m,align:y,alignOffset:k,arrowPadding:C,collisionBoundary:V,collisionPadding:A,sticky:N,hideWhenDetached:I,avoidCollisions:R}:{};return h.jsx(Fa,{scope:r,content:X,viewport:oe,onViewportChange:ae,itemRefCallback:Ve,selectedItem:de,onItemLeave:ft,itemTextRefCallback:Ke,focusSelectedItem:Ae,selectedItemText:ge,position:i,isPositioned:te,searchRef:De,children:h.jsx(Wi,{as:Ql,allowPinchZoom:!0,children:h.jsx(Hi,{asChild:!0,trapped:$.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:Me(l,ee=>{$.trigger?.focus({preventScroll:!0}),ee.preventDefault()}),children:h.jsx(Gi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>$.onOpenChange(!1),children:h.jsx(Xe,{role:"listbox",id:$.contentId,"data-state":$.open?"open":"closed",dir:$.dir,onContextMenu:ee=>ee.preventDefault(),...B,...ze,onPlaced:()=>me(!0),ref:Z,style:{display:"flex",flexDirection:"column",outline:"none",...B.style},onKeyDown:Me(B.onKeyDown,ee=>{const ve=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!ve&&ee.key.length===1&&Te(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let z=ye().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(z=z.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const be=ee.target,re=z.indexOf(be);z=z.slice(re+1)}setTimeout(()=>Se(z)),ee.preventDefault()}})})})})})})});Ea.displayName=Yl;var Xl="SelectItemAlignedPosition",Oa=T.forwardRef((n,a)=>{const{__scopeSelect:r,onPlaced:i,...l}=n,u=_t(Rt,r),f=jt(Rt,r),[g,m]=T.useState(null),[y,k]=T.useState(null),C=qe(a,Z=>k(Z)),V=Pr(r),A=T.useRef(!1),N=T.useRef(!0),{viewport:I,selectedItem:R,selectedItemText:B,focusSelectedItem:$}=f,X=T.useCallback(()=>{if(u.trigger&&u.valueNode&&g&&y&&I&&R&&B){const Z=u.trigger.getBoundingClientRect(),de=y.getBoundingClientRect(),le=u.valueNode.getBoundingClientRect(),ge=B.getBoundingClientRect();if(u.dir!=="rtl"){const be=ge.left-de.left,re=le.left-be,We=Z.left-re,lt=Z.width+We,Ze=Math.max(lt,de.width),ln=window.innerWidth-Je,un=Si(re,[Je,Math.max(Je,ln-Ze)]);g.style.minWidth=lt+"px",g.style.left=un+"px"}else{const be=de.right-ge.right,re=window.innerWidth-le.right-be,We=window.innerWidth-Z.right-re,lt=Z.width+We,Ze=Math.max(lt,de.width),ln=window.innerWidth-Je,un=Si(re,[Je,Math.max(Je,ln-Ze)]);g.style.minWidth=lt+"px",g.style.right=un+"px"}const xe=V(),ye=window.innerHeight-Je*2,te=I.scrollHeight,me=window.getComputedStyle(y),Ie=parseInt(me.borderTopWidth,10),Se=parseInt(me.paddingTop,10),Ae=parseInt(me.borderBottomWidth,10),je=parseInt(me.paddingBottom,10),Pe=Ie+Se+te+je+Ae,De=Math.min(R.offsetHeight*5,Pe),Te=window.getComputedStyle(I),Ve=parseInt(Te.paddingTop,10),ft=parseInt(Te.paddingBottom,10),Ke=Z.top+Z.height/2-Je,Xe=ye-Ke,ze=R.offsetHeight/2,ee=R.offsetTop+ze,ve=Ie+Se+ee,Ne=Pe-ve;if(ve<=Ke){const be=xe.length>0&&R===xe[xe.length-1].ref.current;g.style.bottom="0px";const re=y.clientHeight-I.offsetTop-I.offsetHeight,We=Math.max(Xe,ze+(be?ft:0)+re+Ae),lt=ve+We;g.style.height=lt+"px"}else{const be=xe.length>0&&R===xe[0].ref.current;g.style.top="0px";const We=Math.max(Ke,Ie+I.offsetTop+(be?Ve:0)+ze)+Ne;g.style.height=We+"px",I.scrollTop=ve-Ke+I.offsetTop}g.style.margin=`${Je}px 0`,g.style.minHeight=De+"px",g.style.maxHeight=ye+"px",i?.(),requestAnimationFrame(()=>A.current=!0)}},[V,u.trigger,u.valueNode,g,y,I,R,B,u.dir,i]);dt(()=>X(),[X]);const[ie,oe]=T.useState();dt(()=>{y&&oe(window.getComputedStyle(y).zIndex)},[y]);const ae=T.useCallback(Z=>{Z&&N.current===!0&&(X(),$?.(),N.current=!1)},[X,$]);return h.jsx(Jl,{scope:r,contentWrapper:g,shouldExpandOnScrollRef:A,onScrollButtonChange:ae,children:h.jsx("div",{ref:m,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:ie},children:h.jsx(Ce.div,{...l,ref:C,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});Oa.displayName=Xl;var Zl="SelectPopperPosition",vo=T.forwardRef((n,a)=>{const{__scopeSelect:r,align:i="start",collisionPadding:l=Je,...u}=n,f=Fr(r);return h.jsx(ll,{...f,...u,ref:a,align:i,collisionPadding:l,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vo.displayName=Zl;var[Jl,Bo]=on(Rt,{}),go="SelectViewport",Ia=T.forwardRef((n,a)=>{const{__scopeSelect:r,nonce:i,...l}=n,u=jt(go,r),f=Bo(go,r),g=qe(a,u.onViewportChange),m=T.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx(Cr.Slot,{scope:r,children:h.jsx(Ce.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:g,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:Me(l.onScroll,y=>{const k=y.currentTarget,{contentWrapper:C,shouldExpandOnScrollRef:V}=f;if(V?.current&&C){const A=Math.abs(m.current-k.scrollTop);if(A>0){const N=window.innerHeight-Je*2,I=parseFloat(C.style.minHeight),R=parseFloat(C.style.height),B=Math.max(I,R);if(B<N){const $=B+A,X=Math.min(N,$),ie=$-X;C.style.height=X+"px",C.style.bottom==="0px"&&(k.scrollTop=ie>0?ie:0,C.style.justifyContent="flex-end")}}}m.current=k.scrollTop})})})]})});Ia.displayName=go;var Ta="SelectGroup",[eu,tu]=on(Ta),Aa=T.forwardRef((n,a)=>{const{__scopeSelect:r,...i}=n,l=Dt();return h.jsx(eu,{scope:r,id:l,children:h.jsx(Ce.div,{role:"group","aria-labelledby":l,...i,ref:a})})});Aa.displayName=Ta;var Da="SelectLabel",Va=T.forwardRef((n,a)=>{const{__scopeSelect:r,...i}=n,l=tu(Da,r);return h.jsx(Ce.div,{id:l.id,...i,ref:a})});Va.displayName=Da;var br="SelectItem",[nu,Na]=on(br),Ra=T.forwardRef((n,a)=>{const{__scopeSelect:r,value:i,disabled:l=!1,textValue:u,...f}=n,g=_t(br,r),m=jt(br,r),y=g.value===i,[k,C]=T.useState(u??""),[V,A]=T.useState(!1),N=qe(a,$=>m.itemRefCallback?.($,i,l)),I=Dt(),R=T.useRef("touch"),B=()=>{l||(g.onValueChange(i),g.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(nu,{scope:r,value:i,disabled:l,textId:I,isSelected:y,onItemTextChange:T.useCallback($=>{C(X=>X||($?.textContent??"").trim())},[]),children:h.jsx(Cr.ItemSlot,{scope:r,value:i,disabled:l,textValue:k,children:h.jsx(Ce.div,{role:"option","aria-labelledby":I,"data-highlighted":V?"":void 0,"aria-selected":y&&V,"data-state":y?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...f,ref:N,onFocus:Me(f.onFocus,()=>A(!0)),onBlur:Me(f.onBlur,()=>A(!1)),onClick:Me(f.onClick,()=>{R.current!=="mouse"&&B()}),onPointerUp:Me(f.onPointerUp,()=>{R.current==="mouse"&&B()}),onPointerDown:Me(f.onPointerDown,$=>{R.current=$.pointerType}),onPointerMove:Me(f.onPointerMove,$=>{R.current=$.pointerType,l?m.onItemLeave?.():R.current==="mouse"&&$.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Me(f.onPointerLeave,$=>{$.currentTarget===document.activeElement&&m.onItemLeave?.()}),onKeyDown:Me(f.onKeyDown,$=>{m.searchRef?.current!==""&&$.key===" "||($l.includes($.key)&&B(),$.key===" "&&$.preventDefault())})})})})});Ra.displayName=br;var jn="SelectItemText",Ba=T.forwardRef((n,a)=>{const{__scopeSelect:r,className:i,style:l,...u}=n,f=_t(jn,r),g=jt(jn,r),m=Na(jn,r),y=Ul(jn,r),[k,C]=T.useState(null),V=qe(a,B=>C(B),m.onItemTextChange,B=>g.itemTextRefCallback?.(B,m.value,m.disabled)),A=k?.textContent,N=T.useMemo(()=>h.jsx("option",{value:m.value,disabled:m.disabled,children:A},m.value),[m.disabled,m.value,A]),{onNativeOptionAdd:I,onNativeOptionRemove:R}=y;return dt(()=>(I(N),()=>R(N)),[I,R,N]),h.jsxs(h.Fragment,{children:[h.jsx(Ce.span,{id:m.textId,...u,ref:V}),m.isSelected&&f.valueNode&&!f.valueNodeHasChildren?Qi.createPortal(u.children,f.valueNode):null]})});Ba.displayName=jn;var La="SelectItemIndicator",Ka=T.forwardRef((n,a)=>{const{__scopeSelect:r,...i}=n;return Na(La,r).isSelected?h.jsx(Ce.span,{"aria-hidden":!0,...i,ref:a}):null});Ka.displayName=La;var yo="SelectScrollUpButton",$a=T.forwardRef((n,a)=>{const r=jt(yo,n.__scopeSelect),i=Bo(yo,n.__scopeSelect),[l,u]=T.useState(!1),f=qe(a,i.onScrollButtonChange);return dt(()=>{if(r.viewport&&r.isPositioned){let g=function(){const y=m.scrollTop>0;u(y)};const m=r.viewport;return g(),m.addEventListener("scroll",g),()=>m.removeEventListener("scroll",g)}},[r.viewport,r.isPositioned]),l?h.jsx(za,{...n,ref:f,onAutoScroll:()=>{const{viewport:g,selectedItem:m}=r;g&&m&&(g.scrollTop=g.scrollTop-m.offsetHeight)}}):null});$a.displayName=yo;var bo="SelectScrollDownButton",qa=T.forwardRef((n,a)=>{const r=jt(bo,n.__scopeSelect),i=Bo(bo,n.__scopeSelect),[l,u]=T.useState(!1),f=qe(a,i.onScrollButtonChange);return dt(()=>{if(r.viewport&&r.isPositioned){let g=function(){const y=m.scrollHeight-m.clientHeight,k=Math.ceil(m.scrollTop)<y;u(k)};const m=r.viewport;return g(),m.addEventListener("scroll",g),()=>m.removeEventListener("scroll",g)}},[r.viewport,r.isPositioned]),l?h.jsx(za,{...n,ref:f,onAutoScroll:()=>{const{viewport:g,selectedItem:m}=r;g&&m&&(g.scrollTop=g.scrollTop+m.offsetHeight)}}):null});qa.displayName=bo;var za=T.forwardRef((n,a)=>{const{__scopeSelect:r,onAutoScroll:i,...l}=n,u=jt("SelectScrollButton",r),f=T.useRef(null),g=Pr(r),m=T.useCallback(()=>{f.current!==null&&(window.clearInterval(f.current),f.current=null)},[]);return T.useEffect(()=>()=>m(),[m]),dt(()=>{g().find(k=>k.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[g]),h.jsx(Ce.div,{"aria-hidden":!0,...l,ref:a,style:{flexShrink:0,...l.style},onPointerDown:Me(l.onPointerDown,()=>{f.current===null&&(f.current=window.setInterval(i,50))}),onPointerMove:Me(l.onPointerMove,()=>{u.onItemLeave?.(),f.current===null&&(f.current=window.setInterval(i,50))}),onPointerLeave:Me(l.onPointerLeave,()=>{m()})})}),ru="SelectSeparator",ou=T.forwardRef((n,a)=>{const{__scopeSelect:r,...i}=n;return h.jsx(Ce.div,{"aria-hidden":!0,...i,ref:a})});ou.displayName=ru;var xo="SelectArrow",iu=T.forwardRef((n,a)=>{const{__scopeSelect:r,...i}=n,l=Fr(r),u=_t(xo,r),f=jt(xo,r);return u.open&&f.position==="popper"?h.jsx(ul,{...l,...i,ref:a}):null});iu.displayName=xo;var au="SelectBubbleInput",Wa=T.forwardRef(({__scopeSelect:n,value:a,...r},i)=>{const l=T.useRef(null),u=qe(i,l),f=il(a);return T.useEffect(()=>{const g=l.current;if(!g)return;const m=window.HTMLSelectElement.prototype,k=Object.getOwnPropertyDescriptor(m,"value").set;if(f!==a&&k){const C=new Event("change",{bubbles:!0});k.call(g,a),g.dispatchEvent(C)}},[f,a]),h.jsx(Ce.select,{...r,style:{...al,...r.style},ref:u,defaultValue:a})});Wa.displayName=au;function Ua(n){return n===""||n===void 0}function Ha(n){const a=sl(n),r=T.useRef(""),i=T.useRef(0),l=T.useCallback(f=>{const g=r.current+f;a(g),(function m(y){r.current=y,window.clearTimeout(i.current),y!==""&&(i.current=window.setTimeout(()=>m(""),1e3))})(g)},[a]),u=T.useCallback(()=>{r.current="",window.clearTimeout(i.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(i.current),[]),[r,l,u]}function Ga(n,a,r){const l=a.length>1&&Array.from(a).every(y=>y===a[0])?a[0]:a,u=r?n.indexOf(r):-1;let f=su(n,Math.max(u,0));l.length===1&&(f=f.filter(y=>y!==r));const m=f.find(y=>y.textValue.toLowerCase().startsWith(l.toLowerCase()));return m!==r?m:void 0}function su(n,a){return n.map((r,i)=>n[(a+i)%n.length])}var lu=wa,uu=_a,cu=ka,du=Ma,fu=Ca,hu=Pa,pu=Ia,mu=Aa,vu=Va,gu=Ra,yu=Ba,bu=Ka,xu=$a,wu=qa,Su="Separator",_i="horizontal",_u=["horizontal","vertical"],Ya=T.forwardRef((n,a)=>{const{decorative:r,orientation:i=_i,...l}=n,u=ju(i)?i:_i,g=r?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return h.jsx(Ce.div,{"data-orientation":u,...g,...l,ref:a})});Ya.displayName=Su;function ju(n){return _u.includes(n)}var ku=Ya;const en=new WeakMap,hr=new WeakMap,xr={current:[]};let po=!1,Cn=0;const kn=new Set,ar=new Map;function Qa(n){const a=Array.from(n).sort((r,i)=>r instanceof at&&r.options.deps.includes(i)?1:i instanceof at&&i.options.deps.includes(r)?-1:0);for(const r of a){if(xr.current.includes(r))continue;xr.current.push(r),r.recompute();const i=hr.get(r);if(i)for(const l of i){const u=en.get(l);u&&Qa(u)}}}function Mu(n){const a={prevVal:n.prevState,currentVal:n.state};for(const r of n.listeners)r(a)}function Cu(n){const a={prevVal:n.prevState,currentVal:n.state};for(const r of n.listeners)r(a)}function Xa(n){if(Cn>0&&!ar.has(n)&&ar.set(n,n.prevState),kn.add(n),!(Cn>0)&&!po)try{for(po=!0;kn.size>0;){const a=Array.from(kn);kn.clear();for(const r of a){const i=ar.get(r)??r.prevState;r.prevState=i,Mu(r)}for(const r of a){const i=en.get(r);i&&(xr.current.push(r),Qa(i))}for(const r of a){const i=en.get(r);if(i)for(const l of i)Cu(l)}}}finally{po=!1,xr.current=[],ar.clear()}}function ot(n){Cn++;try{n()}finally{if(Cn--,Cn===0){const a=kn.values().next().value;a&&Xa(a)}}}function Pu(n){return typeof n=="function"}class wo{constructor(a,r){this.listeners=new Set,this.subscribe=i=>{var l,u;this.listeners.add(i);const f=(u=(l=this.options)==null?void 0:l.onSubscribe)==null?void 0:u.call(l,i,this);return()=>{this.listeners.delete(i),f?.()}},this.prevState=a,this.state=a,this.options=r}setState(a){var r,i,l;this.prevState=this.state,(r=this.options)!=null&&r.updateFn?this.state=this.options.updateFn(this.prevState)(a):Pu(a)?this.state=a(this.prevState):this.state=a,(l=(i=this.options)==null?void 0:i.onUpdate)==null||l.call(i),Xa(this)}}class at{constructor(a){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const r=this.options.deps.length,i=new Array(r),l=new Array(r);for(let u=0;u<r;u++){const f=this.options.deps[u];i[u]=f.prevState,l[u]=f.state}return this.lastSeenDepValues=l,{prevDepVals:i,currDepVals:l,prevVal:this.prevState??void 0}},this.recompute=()=>{var r,i;this.prevState=this.state;const l=this.getDepVals();this.state=this.options.fn(l),(i=(r=this.options).onUpdate)==null||i.call(r)},this.checkIfRecalculationNeededDeeply=()=>{for(const u of this.options.deps)u instanceof at&&u.checkIfRecalculationNeededDeeply();let r=!1;const i=this.lastSeenDepValues,{currDepVals:l}=this.getDepVals();for(let u=0;u<l.length;u++)if(l[u]!==i[u]){r=!0;break}r&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const r of this._subscriptions)r()}),this.subscribe=r=>{var i,l;this.listeners.add(r);const u=(l=(i=this.options).onSubscribe)==null?void 0:l.call(i,r,this);return()=>{this.listeners.delete(r),u?.()}},this.options=a,this.state=a.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(a=this.options.deps){for(const r of a)if(r instanceof at)r.registerOnGraph(),this.registerOnGraph(r.options.deps);else if(r instanceof wo){let i=en.get(r);i||(i=new Set,en.set(r,i)),i.add(this);let l=hr.get(this);l||(l=new Set,hr.set(this,l)),l.add(r)}}unregisterFromGraph(a=this.options.deps){for(const r of a)if(r instanceof at)this.unregisterFromGraph(r.options.deps);else if(r instanceof wo){const i=en.get(r);i&&i.delete(this);const l=hr.get(this);l&&l.delete(r)}}}var Fu=class{constructor(n,a){this.fn=n,this.options=a,this.lastExecutionTime=0,this.isPending=!1,this.maybeExecute=(...r)=>{const i=Date.now()-this.lastExecutionTime;if(this.options.leading&&i>=this.options.wait)this.execute(...r);else if(this.lastArgs=r,!this.timeoutId&&this.options.trailing){const l=this.options.wait-i;this.isPending=!0,this.timeoutId=setTimeout(()=>{this.lastArgs!==void 0&&this.execute(...this.lastArgs)},l)}},this.execute=(...r)=>{this.fn(...r),this.options.onExecute?.(r,this),this.lastExecutionTime=Date.now(),this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.flush=()=>{this.isPending&&this.lastArgs&&this.execute(...this.lastArgs)},this.cancel=()=>{this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.clearTimeout=()=>{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},this.options.leading===void 0&&this.options.trailing===void 0&&(this.options.leading=!0,this.options.trailing=!0)}};function Eu(n,a){return new Fu(n,a).maybeExecute}function Tn(n,a){return typeof n=="function"?n(a):n}function Xt(n,a){return Er(a).reduce((i,l)=>{if(i===null)return null;if(typeof i<"u")return i[l]},n)}function sr(n,a,r){const i=Er(a);function l(u){if(!i.length)return Tn(r,u);const f=i.shift();if(typeof f=="string"||typeof f=="number"&&!Array.isArray(u))return typeof u=="object"?(u===null&&(u={}),{...u,[f]:l(u[f])}):{[f]:l()};if(Array.isArray(u)&&typeof f=="number"){const g=u.slice(0,f);return[...g.length?g:new Array(f),l(u[f]),...u.slice(f+1)]}return[...new Array(f),l()]}return l(n)}function Ou(n,a){const r=Er(a);function i(l){if(!l)return;if(r.length===1){const f=r[0];if(Array.isArray(l)&&typeof f=="number")return l.filter((y,k)=>k!==f);const{[f]:g,...m}=l;return m}const u=r.shift();if((typeof u=="string"||typeof u=="number"&&!Array.isArray(l))&&typeof l=="object")return{...l,[u]:i(l[u])};if(typeof u=="number"&&Array.isArray(l)){if(u>=l.length)return l;const f=l.slice(0,u);return[...f.length?f:new Array(u),i(l[u]),...l.slice(u+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return i(n)}const Iu=/^(\d+)$/gm,Tu=/\.(\d+)(?=\.)/gm,Au=/^(\d+)\./gm,Du=/\.(\d+$)/gm,Vu=/\.{2,}/gm,So="__int__",lr=`${So}$1`;function Er(n){if(Array.isArray(n))return[...n];if(typeof n!="string")throw new Error("Path must be a string.");return n.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(Iu,lr).replace(Tu,`.${lr}.`).replace(Au,`${lr}.`).replace(Du,`.${lr}`).replace(Vu,".").split(".").map(a=>{if(a.startsWith(So)){const r=a.substring(So.length),i=parseInt(r,10);return String(i)===r?i:r}return a})}function ji(n,a){return n.length===0?a:a.length===0?n:a.startsWith("[")||a.startsWith(".")?n+a:`${n}.${a}`}function Nu(n){return!(Array.isArray(n)&&n.length===0)}function _o(n,a){const r=i=>i.validators.filter(Boolean).map(l=>({cause:l.cause,validate:l.fn}));return a.validationLogic({form:a.form,validators:a.validators,event:{type:n,async:!1},runValidation:r})}function jo(n,a){const{asyncDebounceMs:r}=a,{onBlurAsyncDebounceMs:i,onChangeAsyncDebounceMs:l,onDynamicAsyncDebounceMs:u}=a.validators||{},f=r??0,g=m=>m.validators.filter(Boolean).map(y=>{const k=y?.cause||n;let C=f;switch(k){case"change":C=l??f;break;case"blur":C=i??f;break;case"dynamic":C=u??f;break;case"submit":C=0;break}return n==="submit"&&(C=0),{cause:k,validate:y.fn,debounceMs:C}});return a.validationLogic({form:a.form,validators:a.validators,event:{type:n,async:!0},runValidation:g})}const ko=n=>!!n&&typeof n=="object"&&"fields"in n;function wt(n,a){if(Object.is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;if(n instanceof Date&&a instanceof Date)return n.getTime()===a.getTime();if(n instanceof Map&&a instanceof Map){if(n.size!==a.size)return!1;for(const[l,u]of n)if(!a.has(l)||!Object.is(u,a.get(l)))return!1;return!0}if(n instanceof Set&&a instanceof Set){if(n.size!==a.size)return!1;for(const l of n)if(!a.has(l))return!1;return!0}const r=Object.keys(n),i=Object.keys(a);if(r.length!==i.length)return!1;for(const l of r)if(!i.includes(l)||!wt(n[l],a[l]))return!1;return!0}const ki=({newFormValidatorError:n,isPreviousErrorFromFormValidator:a,previousErrorValue:r})=>n?{newErrorValue:n,newSource:"form"}:a?{newErrorValue:void 0,newSource:void 0}:r?{newErrorValue:r,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},Mi=({formLevelError:n,fieldLevelError:a})=>a?{newErrorValue:a,newSource:"field"}:n?{newErrorValue:n,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function $e(n,a){return n==null?a:{...n,...a}}let At=256;const pr=[];let ur;for(;At--;)pr[At]=(At+256).toString(16).substring(1);function Za(){let n=0,a,r="";if(!ur||At+16>256){for(ur=new Array(256),n=256;n--;)ur[n]=256*Math.random()|0;n=0,At=0}for(;n<16;n++)a=ur[At+n],n===6?r+=pr[a&15|64]:n===8?r+=pr[a&63|128]:r+=pr[a],n&1&&n>1&&n<11&&(r+="-");return At++,r}const Ru=Eu(n=>Ye.emit("form-state",{id:n.formId,state:n.store.state}),{wait:300}),Zt=n=>{if(!n.validators)return n.runValidation({validators:[],form:n.form});const a=n.event.async,r=a?void 0:{fn:n.validators.onMount,cause:"mount"},i={fn:a?n.validators.onChangeAsync:n.validators.onChange,cause:"change"},l={fn:a?n.validators.onBlurAsync:n.validators.onBlur,cause:"blur"},u={fn:a?n.validators.onSubmitAsync:n.validators.onSubmit,cause:"submit"},f=a?void 0:{fn:()=>{},cause:"server"};switch(n.event.type){case"mount":return n.runValidation({validators:[r],form:n.form});case"submit":return n.runValidation({validators:[i,l,u,f],form:n.form});case"server":return n.runValidation({validators:[],form:n.form});case"blur":return n.runValidation({validators:[l,f],form:n.form});case"change":return n.runValidation({validators:[i,f],form:n.form});default:throw new Error(`Unknown validation event type: ${n.event.type}`)}};function Bu(n,a){const r=new Map;for(const i of n){const l=i.path??[];let u=a,f="";for(let g=0;g<l.length;g++){const m=l[g];if(m===void 0)continue;const y=typeof m=="object"?m.key:m,k=Number(y);Array.isArray(u)&&!Number.isNaN(k)?f+=`[${k}]`:f+=(g>0?".":"")+String(y),typeof u=="object"&&u!==null?u=u[y]:u=void 0}r.set(f,(r.get(f)??[]).concat(i))}return Object.fromEntries(r)}const Ci=(n,a)=>{const r=Bu(n,a);return{form:r,fields:r}},tn={validate({value:n,validationSource:a},r){const i=r["~standard"].validate(n);if(i instanceof Promise)throw new Error("async function passed to sync validator");if(i.issues)return a==="field"?i.issues:Ci(i.issues,n)},async validateAsync({value:n,validationSource:a},r){const i=await r["~standard"].validate(n);if(i.issues)return a==="field"?i.issues:Ci(i.issues,n)}},Ja=n=>!!n&&"~standard"in n,Jt={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function cr(n){function a(k,C,V){const A=f(k,C,"move",V),N=Math.min(C,V),I=Math.max(C,V);for(let B=N;B<=I;B++)A.push(u(k,B));const R=Object.keys(n.fieldInfo).reduce((B,$)=>($.startsWith(u(k,C))&&B.set($,n.getFieldMeta($)),B),new Map);m(A,C<V?"up":"down"),Object.keys(n.fieldInfo).filter(B=>B.startsWith(u(k,V))).forEach(B=>{const $=B.replace(u(k,V),u(k,C)),X=R.get($);X&&n.setFieldMeta(B,X)})}function r(k,C){const V=f(k,C,"remove");m(V,"up")}function i(k,C,V){f(k,C,"swap",V).forEach(N=>{if(!N.toString().startsWith(u(k,C)))return;const I=N.toString().replace(u(k,C),u(k,V)),[R,B]=[n.getFieldMeta(N),n.getFieldMeta(I)];R&&n.setFieldMeta(I,R),B&&n.setFieldMeta(N,B)})}function l(k,C){const V=f(k,C,"insert");m(V,"down"),V.forEach(A=>{A.toString().startsWith(u(k,C))&&n.setFieldMeta(A,y())})}function u(k,C){return`${k}[${C}]`}function f(k,C,V,A){const N=[u(k,C)];switch(V){case"swap":N.push(u(k,A));break;case"move":{const[I,R]=[Math.min(C,A),Math.max(C,A)];for(let B=I;B<=R;B++)N.push(u(k,B));break}default:{const I=n.getFieldValue(k),R=Array.isArray(I)?I.length:0;for(let B=C+1;B<R;B++)N.push(u(k,B));break}}return Object.keys(n.fieldInfo).filter(I=>N.some(R=>I.startsWith(R)))}function g(k,C){return k.replace(/\[(\d+)\]/,(V,A)=>{const N=parseInt(A,10);return`[${C==="up"?N+1:Math.max(0,N-1)}]`})}function m(k,C){(C==="up"?k:[...k].reverse()).forEach(A=>{const N=g(A.toString(),C),I=n.getFieldMeta(N);I?n.setFieldMeta(A,I):n.setFieldMeta(A,y())})}const y=()=>Jt;return{handleArrayMove:a,handleArrayRemove:r,handleArraySwap:i,handleArrayInsert:l}}function mo(n){return{values:n.values??{},errorMap:n.errorMap??{},fieldMetaBase:n.fieldMetaBase??{},isSubmitted:n.isSubmitted??!1,isSubmitting:n.isSubmitting??!1,isValidating:n.isValidating??!1,submissionAttempts:n.submissionAttempts??0,isSubmitSuccessful:n.isSubmitSuccessful??!1,validationMetaMap:n.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class Pi{constructor(a){this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{const r=this.fieldMetaDerived.mount(),i=this.store.mount(),l=this.store.subscribe(()=>{Ru(this)}),u=Ye.on("request-form-state",k=>{k.payload.id===this._formId&&Ye.emit("form-api",{id:this._formId,state:this.store.state,options:this.options})}),f=Ye.on("request-form-reset",k=>{k.payload.id===this._formId&&this.reset()}),g=Ye.on("request-form-force-submit",k=>{k.payload.id===this._formId&&(this._devtoolsSubmissionOverride=!0,this.handleSubmit(),this._devtoolsSubmissionOverride=!1)}),m=()=>{g(),f(),u(),l(),r(),i(),Ye.emit("form-unmounted",{id:this._formId})};this.options.listeners?.onMount?.({formApi:this});const{onMount:y}=this.options.validators||{};return Ye.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}),y&&this.validateSync("mount"),m},this.update=r=>{if(!r)return;const i=this.options;this.options=r;const l=!!r.transform?.deps?.some((g,m)=>g!==this.prevTransformArray[m]),u=r.defaultValues&&!wt(r.defaultValues,i.defaultValues)&&!this.state.isTouched,f=!wt(r.defaultState,i.defaultState)&&!this.state.isTouched;!u&&!f&&!l||(ot(()=>{this.baseStore.setState(()=>mo(Object.assign({},this.state,f?r.defaultState:{},u?{values:r.defaultValues}:{},l?{_force_re_eval:!this.state._force_re_eval}:{})))}),Ye.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}))},this.reset=(r,i)=>{const{fieldMeta:l}=this.state,u=this.resetFieldMeta(l);r&&!i?.keepDefaultValues&&(this.options={...this.options,defaultValues:r}),this.baseStore.setState(()=>mo({...this.options.defaultState,values:r??this.options.defaultValues??this.options.defaultState?.values,fieldMetaBase:u}))},this.validateAllFields=async r=>{const i=[];return ot(()=>{Object.values(this.fieldInfo).forEach(u=>{if(!u.instance)return;const f=u.instance;i.push(Promise.resolve().then(()=>f.validate(r,{skipFormValidation:!0}))),u.instance.state.meta.isTouched||u.instance.setMeta(g=>({...g,isTouched:!0}))})}),(await Promise.all(i)).flat()},this.validateArrayFieldsStartingFrom=async(r,i,l)=>{const u=this.getFieldValue(r),f=Array.isArray(u)?Math.max(u.length-1,0):null,g=[`${r}[${i}]`];for(let C=i+1;C<=(f??0);C++)g.push(`${r}[${C}]`);const m=Object.keys(this.fieldInfo).filter(C=>g.some(V=>C.startsWith(V))),y=[];return ot(()=>{m.forEach(C=>{y.push(Promise.resolve().then(()=>this.validateField(C,l)))})}),(await Promise.all(y)).flat()},this.validateField=(r,i)=>{const l=this.fieldInfo[r]?.instance;if(!l){const{hasErrored:u}=this.validateSync(i);return u&&!this.options.asyncAlways?this.getFieldMeta(r)?.errors??[]:this.validateAsync(i).then(()=>this.getFieldMeta(r)?.errors??[])}return l.state.meta.isTouched||l.setMeta(u=>({...u,isTouched:!0})),l.validate(i)},this.validateSync=r=>{const i=_o(r,{...this.options,form:this,validationLogic:this.options.validationLogic||Zt});let l=!1;const u={};return ot(()=>{for(const m of i){if(!m.validate)continue;const y=this.runValidator({validate:m.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:k,fieldErrors:C}=mr(y),V=_n(m.cause),A=new Set([...Object.keys(this.state.fieldMeta),...Object.keys(C||{})]);for(const N of A){if(this.baseStore.state.fieldMetaBase[N]===void 0&&!C?.[N])continue;const I=this.getFieldMeta(N)??Jt,{errorMap:R,errorSourceMap:B}=I,$=C?.[N],{newErrorValue:X,newSource:ie}=ki({newFormValidatorError:$,isPreviousErrorFromFormValidator:B?.[V]==="form",previousErrorValue:R?.[V]});ie==="form"&&(u[N]={...u[N],[V]:$}),R?.[V]!==X&&this.setFieldMeta(N,(oe=Jt)=>({...oe,errorMap:{...oe.errorMap,[V]:X},errorSourceMap:{...oe.errorSourceMap,[V]:ie}}))}this.state.errorMap?.[V]!==k&&this.baseStore.setState(N=>({...N,errorMap:{...N.errorMap,[V]:k}})),(k||C)&&(l=!0)}const f=_n("submit");this.state.errorMap?.[f]&&r!=="submit"&&!l&&this.baseStore.setState(m=>({...m,errorMap:{...m.errorMap,[f]:void 0}}));const g=_n("server");this.state.errorMap?.[g]&&r!=="server"&&!l&&this.baseStore.setState(m=>({...m,errorMap:{...m.errorMap,[g]:void 0}}))}),{hasErrored:l,fieldsErrorMap:u}},this.validateAsync=async r=>{const i=jo(r,{...this.options,form:this,validationLogic:this.options.validationLogic||Zt});this.state.isFormValidating||this.baseStore.setState(m=>({...m,isFormValidating:!0}));const l=[];let u;for(const m of i){if(!m.validate)continue;const y=_n(m.cause);this.state.validationMetaMap[y]?.lastAbortController.abort();const C=new AbortController;this.state.validationMetaMap[y]={lastAbortController:C},l.push(new Promise(async V=>{let A;try{A=await new Promise((B,$)=>{setTimeout(async()=>{if(C.signal.aborted)return B(void 0);try{B(await this.runValidator({validate:m.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:C.signal},type:"validateAsync"}))}catch(X){$(X)}},m.debounceMs)})}catch(B){A=B}const{formError:N,fieldErrors:I}=mr(A);I&&(u=u?{...u,...I}:I);const R=_n(m.cause);for(const B of Object.keys(this.state.fieldMeta)){if(this.baseStore.state.fieldMetaBase[B]===void 0)continue;const $=this.getFieldMeta(B);if(!$)continue;const{errorMap:X,errorSourceMap:ie}=$,oe=u?.[B],{newErrorValue:ae,newSource:Z}=ki({newFormValidatorError:oe,isPreviousErrorFromFormValidator:ie?.[R]==="form",previousErrorValue:X?.[R]});X?.[R]!==ae&&this.setFieldMeta(B,de=>({...de,errorMap:{...de.errorMap,[R]:ae},errorSourceMap:{...de.errorSourceMap,[R]:Z}}))}this.baseStore.setState(B=>({...B,errorMap:{...B.errorMap,[R]:N}})),V(u?{fieldErrors:u,errorMapKey:R}:void 0)}))}let f=[];const g={};if(l.length){f=await Promise.all(l);for(const m of f)if(m?.fieldErrors){const{errorMapKey:y}=m;for(const[k,C]of Object.entries(m.fieldErrors)){const A={...g[k]||{},[y]:C};g[k]=A}}}return this.baseStore.setState(m=>({...m,isFormValidating:!1})),g},this.validate=r=>{const{hasErrored:i,fieldsErrorMap:l}=this.validateSync(r);return i&&!this.options.asyncAlways?l:this.validateAsync(r)},this._handleSubmit=async r=>{this.baseStore.setState(u=>({...u,isSubmitted:!1,submissionAttempts:u.submissionAttempts+1,isSubmitSuccessful:!1})),ot(()=>{Object.values(this.fieldInfo).forEach(u=>{u.instance&&(u.instance.state.meta.isTouched||u.instance.setMeta(f=>({...f,isTouched:!0})))})});const i=r??this.options.onSubmitMeta;if(!this.state.canSubmit&&!this._devtoolsSubmissionOverride){this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:i});return}this.baseStore.setState(u=>({...u,isSubmitting:!0}));const l=()=>{this.baseStore.setState(u=>({...u,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){l(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:i}),Ye.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validateAllFields",errors:Object.values(this.state.fieldMeta).map(u=>u.errors).flat()});return}if(await this.validate("submit"),!this.state.isValid){l(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:i}),Ye.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validate",errors:this.state.errors});return}ot(()=>{Object.values(this.fieldInfo).forEach(u=>{u.instance?.options.listeners?.onSubmit?.({value:u.instance.state.value,fieldApi:u.instance})})}),this.options.listeners?.onSubmit?.({formApi:this,meta:i});try{await this.options.onSubmit?.({value:this.state.values,formApi:this,meta:i}),ot(()=>{this.baseStore.setState(u=>({...u,isSubmitted:!0,isSubmitSuccessful:!0})),Ye.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!0}),l()})}catch(u){throw this.baseStore.setState(f=>({...f,isSubmitSuccessful:!1})),Ye.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"inflight",onError:u}),l(),u}},this.getFieldValue=r=>Xt(this.state.values,r),this.getFieldMeta=r=>this.state.fieldMeta[r],this.getFieldInfo=r=>this.fieldInfo[r]||={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}},this.setFieldMeta=(r,i)=>{this.baseStore.setState(l=>({...l,fieldMetaBase:{...l.fieldMetaBase,[r]:Tn(i,l.fieldMetaBase[r])}}))},this.resetFieldMeta=r=>Object.keys(r).reduce((i,l)=>{const u=l;return i[u]=Jt,i},{}),this.setFieldValue=(r,i,l)=>{const u=l?.dontUpdateMeta??!1,f=l?.dontRunListeners??!1,g=l?.dontValidate??!1;ot(()=>{u||this.setFieldMeta(r,m=>({...m,isTouched:!0,isDirty:!0,errorMap:{...m?.errorMap,onMount:void 0}})),this.baseStore.setState(m=>({...m,values:sr(m.values,r,i)}))}),f||this.getFieldInfo(r).instance?.triggerOnChangeListener(),g||this.validateField(r,"change")},this.deleteField=r=>{const l=[...Object.keys(this.fieldInfo).filter(u=>{const f=r.toString();return u!==f&&u.startsWith(f)}),r];this.baseStore.setState(u=>{const f={...u};return l.forEach(g=>{f.values=Ou(f.values,g),delete this.fieldInfo[g],delete f.fieldMetaBase[g]}),f})},this.pushFieldValue=(r,i,l)=>{this.setFieldValue(r,u=>[...Array.isArray(u)?u:[],i],l)},this.insertFieldValue=async(r,i,l,u)=>{this.setFieldValue(r,g=>[...g.slice(0,i),l,...g.slice(i)],$e(u,{dontValidate:!0}));const f=u?.dontValidate??!1;f||await this.validateField(r,"change"),cr(this).handleArrayInsert(r,i),f||await this.validateArrayFieldsStartingFrom(r,i,"change")},this.replaceFieldValue=async(r,i,l,u)=>{this.setFieldValue(r,g=>g.map((m,y)=>y===i?l:m),$e(u,{dontValidate:!0})),(u?.dontValidate??!1)||(await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,i,"change"))},this.removeFieldValue=async(r,i,l)=>{const u=this.getFieldValue(r),f=Array.isArray(u)?Math.max(u.length-1,0):null;if(this.setFieldValue(r,m=>m.filter((y,k)=>k!==i),$e(l,{dontValidate:!0})),cr(this).handleArrayRemove(r,i),f!==null){const m=`${r}[${f}]`;this.deleteField(m)}(l?.dontValidate??!1)||(await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,i,"change"))},this.swapFieldValues=(r,i,l,u)=>{this.setFieldValue(r,g=>{const m=g[i],y=g[l];return sr(sr(g,`${i}`,y),`${l}`,m)},$e(u,{dontValidate:!0})),cr(this).handleArraySwap(r,i,l),(u?.dontValidate??!1)||(this.validateField(r,"change"),this.validateField(`${r}[${i}]`,"change"),this.validateField(`${r}[${l}]`,"change"))},this.moveFieldValues=(r,i,l,u)=>{this.setFieldValue(r,g=>{const m=[...g];return m.splice(l,0,m.splice(i,1)[0]),m},$e(u,{dontValidate:!0})),cr(this).handleArrayMove(r,i,l),(u?.dontValidate??!1)||(this.validateField(r,"change"),this.validateField(`${r}[${i}]`,"change"),this.validateField(`${r}[${l}]`,"change"))},this.clearFieldValues=(r,i)=>{const l=this.getFieldValue(r),u=Array.isArray(l)?Math.max(l.length-1,0):null;if(this.setFieldValue(r,[],$e(i,{dontValidate:!0})),u!==null)for(let g=0;g<=u;g++){const m=`${r}[${g}]`;this.deleteField(m)}(i?.dontValidate??!1)||this.validateField(r,"change")},this.resetField=r=>{this.baseStore.setState(i=>({...i,fieldMetaBase:{...i.fieldMetaBase,[r]:Jt},values:this.options.defaultValues?sr(i.values,r,Xt(this.options.defaultValues,r)):i.values}))},this.setErrorMap=r=>{ot(()=>{Object.entries(r).forEach(([i,l])=>{const u=i;if(ko(l)){const{formError:f,fieldErrors:g}=mr(l);for(const m of Object.keys(this.fieldInfo))this.getFieldMeta(m)&&this.setFieldMeta(m,k=>({...k,errorMap:{...k.errorMap,[u]:g?.[m]},errorSourceMap:{...k.errorSourceMap,[u]:"form"}}));this.baseStore.setState(m=>({...m,errorMap:{...m.errorMap,[u]:f}}))}else this.baseStore.setState(f=>({...f,errorMap:{...f.errorMap,[u]:l}}))})})},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((r,[i,l])=>(Object.keys(l).length&&l.errors.length&&(r[i]={errors:l.errors,errorMap:l.errorMap}),r),{})}),this.parseValuesWithSchema=r=>tn.validate({value:this.state.values,validationSource:"form"},r),this.parseValuesWithSchemaAsync=r=>tn.validateAsync({value:this.state.values,validationSource:"form"},r),this.timeoutIds={validations:{},listeners:{},formListeners:{}},this._formId=a?.formId??Za(),this._devtoolsSubmissionOverride=!1,this.baseStore=new wo(mo({...a?.defaultState,values:a?.defaultValues??a?.defaultState?.values})),this.fieldMetaDerived=new at({deps:[this.baseStore],fn:({prevDepVals:r,currDepVals:i,prevVal:l})=>{const u=l,f=r?.[0],g=i[0];let m=0;const y={};for(const k of Object.keys(g.fieldMetaBase)){const C=g.fieldMetaBase[k],V=f?.fieldMetaBase[k],A=u?.[k],N=Xt(g.values,k);let I=A?.errors;if(!V||C.errorMap!==V.errorMap){I=Object.values(C.errorMap??{}).filter(ie=>ie!==void 0);const X=this.getFieldInfo(k)?.instance;(!X||!X.options.disableErrorFlat)&&(I=I.flat(1))}const R=!Nu(I),B=!C.isDirty,$=wt(N,Xt(this.options.defaultValues,k))||wt(N,this.getFieldInfo(k)?.instance?.options.defaultValue);if(A&&A.isPristine===B&&A.isValid===R&&A.isDefaultValue===$&&A.errors===I&&C===V){y[k]=A,m++;continue}y[k]={...C,errors:I??[],isPristine:B,isValid:R,isDefaultValue:$}}return Object.keys(g.fieldMetaBase).length&&u&&m===Object.keys(g.fieldMetaBase).length?u:y}}),this.store=new at({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:r,currDepVals:i,prevVal:l})=>{const u=l,f=r?.[0],g=i[0],m=i[1],y=Object.values(m).filter(Boolean),k=y.some(te=>te.isValidating),C=y.every(te=>te.isValid),V=y.some(te=>te.isTouched),A=y.some(te=>te.isBlurred),N=y.every(te=>te.isDefaultValue),I=V&&g.errorMap?.onMount,R=y.some(te=>te.isDirty),B=!R,$=!!(g.errorMap?.onMount||y.some(te=>te?.errorMap?.onMount)),X=!!k;let ie=u?.errors??[];(!f||g.errorMap!==f.errorMap)&&(ie=Object.values(g.errorMap).reduce((te,me)=>me===void 0?te:me&&ko(me)?(te.push(me.form),te):(te.push(me),te),[]));const oe=ie.length===0,ae=C&&oe,Z=this.options.canSubmitWhenInvalid??!1,de=g.submissionAttempts===0&&!V&&!$||!X&&!g.isSubmitting&&ae||Z;let le=g.errorMap;if(I&&(ie=ie.filter(te=>te!==g.errorMap.onMount),le=Object.assign(le,{onMount:void 0})),u&&f&&u.errorMap===le&&u.fieldMeta===this.fieldMetaDerived.state&&u.errors===ie&&u.isFieldsValidating===k&&u.isFieldsValid===C&&u.isFormValid===oe&&u.isValid===ae&&u.canSubmit===de&&u.isTouched===V&&u.isBlurred===A&&u.isPristine===B&&u.isDefaultValue===N&&u.isDirty===R&&wt(f,g))return u;let ge={...g,errorMap:le,fieldMeta:this.fieldMetaDerived.state,errors:ie,isFieldsValidating:k,isFieldsValid:C,isFormValid:oe,isValid:ae,canSubmit:de,isTouched:V,isBlurred:A,isPristine:B,isDefaultValue:N,isDirty:R};const xe=this.options.transform?.deps??[];if(xe.length!==this.prevTransformArray.length||xe.some((te,me)=>te!==this.prevTransformArray[me])){const te=Object.assign({},this,{state:ge});this.options.transform?.fn(te),ge=te.state,this.prevTransformArray=xe}return ge}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(a||{})}get state(){return this.store.state}get formId(){return this._formId}runValidator(a){return Ja(a.validate)?tn[a.type](a.value,a.validate):a.validate(a.value)}handleSubmit(a){return this._handleSubmit(a)}}function mr(n){if(n){if(ko(n)){const a=mr(n.form).formError,r=n.fields;return{formError:a,fieldErrors:r}}return{formError:n}}return{formError:void 0}}function _n(n){switch(n){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}class Fi{constructor(a){this.options={},this.mount=()=>{const r=this.store.mount();this.options.defaultValue!==void 0&&!this.getMeta().isTouched&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const i=this.getInfo();i.instance=this,this.update(this.options);const{onMount:l}=this.options.validators||{};if(l){const u=this.runValidator({validate:l,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});u&&this.setMeta(f=>({...f,errorMap:{...f?.errorMap,onMount:u},errorSourceMap:{...f?.errorSourceMap,onMount:"field"}}))}return this.options.listeners?.onMount?.({value:this.state.value,fieldApi:this}),r},this.update=r=>{if(this.options=r,this.name=r.name,!this.state.meta.isTouched&&this.options.defaultValue!==void 0){const i=this.form.getFieldValue(this.name);wt(i,r.defaultValue)||this.form.setFieldValue(this.name,r.defaultValue,{dontUpdateMeta:!0,dontValidate:!0,dontRunListeners:!0})}this.form.getFieldMeta(this.name)||this.form.setFieldMeta(this.name,this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(r,i)=>{this.form.setFieldValue(this.name,r,$e(i,{dontRunListeners:!0,dontValidate:!0})),i?.dontRunListeners||this.triggerOnChangeListener(),i?.dontValidate||this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=r=>this.form.setFieldMeta(this.name,r),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(r,i)=>{this.form.pushFieldValue(this.name,r,$e(i,{dontRunListeners:!0})),i?.dontRunListeners||this.triggerOnChangeListener()},this.insertValue=(r,i,l)=>{this.form.insertFieldValue(this.name,r,i,$e(l,{dontRunListeners:!0})),l?.dontRunListeners||this.triggerOnChangeListener()},this.replaceValue=(r,i,l)=>{this.form.replaceFieldValue(this.name,r,i,$e(l,{dontRunListeners:!0})),l?.dontRunListeners||this.triggerOnChangeListener()},this.removeValue=(r,i)=>{this.form.removeFieldValue(this.name,r,$e(i,{dontRunListeners:!0})),i?.dontRunListeners||this.triggerOnChangeListener()},this.swapValues=(r,i,l)=>{this.form.swapFieldValues(this.name,r,i,$e(l,{dontRunListeners:!0})),l?.dontRunListeners||this.triggerOnChangeListener()},this.moveValue=(r,i,l)=>{this.form.moveFieldValues(this.name,r,i,$e(l,{dontRunListeners:!0})),l?.dontRunListeners||this.triggerOnChangeListener()},this.clearValues=r=>{this.form.clearFieldValues(this.name,$e(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.getLinkedFields=r=>{const i=Object.values(this.form.fieldInfo),l=[];for(const u of i){if(!u.instance)continue;const{onChangeListenTo:f,onBlurListenTo:g}=u.instance.options.validators||{};r==="change"&&f?.includes(this.name)&&l.push(u.instance),r==="blur"&&g?.includes(this.name)&&l.push(u.instance)}return l},this.validateSync=(r,i)=>{const l=_o(r,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||Zt}),f=this.getLinkedFields(r).reduce((y,k)=>{const C=_o(r,{...k.options,form:k.form,validationLogic:k.form.options.validationLogic||Zt});return C.forEach(V=>{V.field=k}),y.concat(C)},[]);let g=!1;ot(()=>{const y=(k,C)=>{const V=dr(C.cause),A=C.validate?Ei(k.runValidator({validate:C.validate,value:{value:k.store.state.value,validationSource:"field",fieldApi:k},type:"validate"})):void 0,N=i[V],{newErrorValue:I,newSource:R}=Mi({formLevelError:N,fieldLevelError:A});k.state.meta.errorMap?.[V]!==I&&k.setMeta(B=>({...B,errorMap:{...B.errorMap,[V]:I},errorSourceMap:{...B.errorSourceMap,[V]:R}})),I&&(g=!0)};for(const k of l)y(this,k);for(const k of f)k.validate&&y(k.field,k)});const m=dr("submit");return this.state.meta.errorMap?.[m]&&r!=="submit"&&!g&&this.setMeta(y=>({...y,errorMap:{...y.errorMap,[m]:void 0},errorSourceMap:{...y.errorSourceMap,[m]:void 0}})),{hasErrored:g}},this.validateAsync=async(r,i)=>{const l=jo(r,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||Zt}),u=await i,f=this.getLinkedFields(r),g=f.reduce((A,N)=>{const I=jo(r,{...N.options,form:N.form,validationLogic:N.form.options.validationLogic||Zt});return I.forEach(R=>{R.field=N}),A.concat(I)},[]),m=[],y=[],k=l.some(A=>A.validate)||g.some(A=>A.validate);if(k){this.state.meta.isValidating||this.setMeta(A=>({...A,isValidating:!0}));for(const A of f)A.setMeta(N=>({...N,isValidating:!0}))}const C=(A,N,I)=>{const R=dr(N.cause);A.getInfo().validationMetaMap[R]?.lastAbortController.abort();const $=new AbortController;this.getInfo().validationMetaMap[R]={lastAbortController:$},I.push(new Promise(async X=>{let ie;try{ie=await new Promise((le,ge)=>{this.timeoutIds.validations[N.cause]&&clearTimeout(this.timeoutIds.validations[N.cause]),this.timeoutIds.validations[N.cause]=setTimeout(async()=>{if($.signal.aborted)return le(void 0);try{le(await this.runValidator({validate:N.validate,value:{value:A.store.state.value,fieldApi:A,signal:$.signal,validationSource:"field"},type:"validateAsync"}))}catch(xe){ge(xe)}},N.debounceMs)})}catch(le){ie=le}if($.signal.aborted)return X(void 0);const oe=Ei(ie),ae=u[this.name]?.[R],{newErrorValue:Z,newSource:de}=Mi({formLevelError:ae,fieldLevelError:oe});A.setMeta(le=>({...le,errorMap:{...le?.errorMap,[R]:Z},errorSourceMap:{...le.errorSourceMap,[R]:de}})),X(Z)}))};for(const A of l)A.validate&&C(this,A,m);for(const A of g)A.validate&&C(A.field,A,y);let V=[];if((m.length||y.length)&&(V=await Promise.all(m),await Promise.all(y)),k){this.setMeta(A=>({...A,isValidating:!1}));for(const A of f)A.setMeta(N=>({...N,isValidating:!1}))}return V.filter(Boolean)},this.validate=(r,i)=>{if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:l}=i?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(r),{hasErrored:u}=this.validateSync(r,l[this.name]??{});if(u&&!this.options.asyncAlways)return this.getInfo().validationMetaMap[dr(r)]?.lastAbortController.abort(),this.state.meta.errors;const f=i?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(r);return this.validateAsync(r,f)},this.handleChange=r=>{this.setValue(r)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta(i=>({...i,isTouched:!0})),this.state.meta.isBlurred||this.setMeta(i=>({...i,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.setErrorMap=r=>{this.setMeta(i=>({...i,errorMap:{...i.errorMap,...r}}))},this.parseValueWithSchema=r=>tn.validate({value:this.state.value,validationSource:"field"},r),this.parseValueWithSchemaAsync=r=>tn.validateAsync({value:this.state.value,validationSource:"field"},r),this.triggerOnChangeListener=()=>{const r=this.form.options.listeners?.onChangeDebounceMs;r&&r>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout(()=>{this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this})},r)):this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this});const i=this.options.listeners?.onChangeDebounceMs;i&&i>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},i)):this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},this.form=a.form,this.name=a.name,this.options=a,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new at({deps:[this.form.store],fn:({prevVal:r})=>{const i=r,l=this.form.getFieldMeta(this.name)??{...Jt,...a.defaultMeta};let u=this.form.getFieldValue(this.name);return!l.isTouched&&u===void 0&&this.options.defaultValue!==void 0&&!wt(u,this.options.defaultValue)&&(u=this.options.defaultValue),i&&i.value===u&&i.meta===l?i:{value:u,meta:l}}})}get state(){return this.store.state}runValidator(a){return Ja(a.validate)?tn[a.type](a.value,a.validate):a.validate(a.value)}triggerOnBlurListener(){const a=this.form.options.listeners?.onBlurDebounceMs;a&&a>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this})},a)):this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this});const r=this.options.listeners?.onBlurDebounceMs;r&&r>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})},r)):this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}}function Ei(n){if(n)return n}function dr(n){switch(n){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}class wr{constructor(a){if(this.getFormFieldName=r=>{if(typeof this.fieldsMap=="string")return ji(this.fieldsMap,r);const i=Er(r)[0];if(typeof i!="string")return"";const l=r.slice(i.length),u=this.fieldsMap[i];return ji(u,l)},this.getFormFieldOptions=r=>{const i={...r},l=i.validators;if(i.name=this.getFormFieldName(r.name),l&&(l.onChangeListenTo||l.onBlurListenTo)){const u={...l},f=g=>{if(g)return g.map(m=>this.getFormFieldName(m))};u.onChangeListenTo=f(l.onChangeListenTo),u.onBlurListenTo=f(l.onBlurListenTo),i.validators=u}return i},this.mount=()=>this.store.mount(),this.validateArrayFieldsStartingFrom=async(r,i,l)=>this.form.validateArrayFieldsStartingFrom(this.getFormFieldName(r),i,l),this.validateField=(r,i)=>this.form.validateField(this.getFormFieldName(r),i),this.getFieldValue=r=>this.form.getFieldValue(this.getFormFieldName(r)),this.getFieldMeta=r=>this.form.getFieldMeta(this.getFormFieldName(r)),this.setFieldMeta=(r,i)=>this.form.setFieldMeta(this.getFormFieldName(r),i),this.setFieldValue=(r,i,l)=>this.form.setFieldValue(this.getFormFieldName(r),i,l),this.deleteField=r=>this.form.deleteField(this.getFormFieldName(r)),this.pushFieldValue=(r,i,l)=>this.form.pushFieldValue(this.getFormFieldName(r),i,l),this.insertFieldValue=async(r,i,l,u)=>this.form.insertFieldValue(this.getFormFieldName(r),i,l,u),this.replaceFieldValue=async(r,i,l,u)=>this.form.replaceFieldValue(this.getFormFieldName(r),i,l,u),this.removeFieldValue=async(r,i,l)=>this.form.removeFieldValue(this.getFormFieldName(r),i,l),this.swapFieldValues=(r,i,l,u)=>this.form.swapFieldValues(this.getFormFieldName(r),i,l,u),this.moveFieldValues=(r,i,l,u)=>this.form.moveFieldValues(this.getFormFieldName(r),i,l,u),this.clearFieldValues=(r,i)=>this.form.clearFieldValues(this.getFormFieldName(r),i),this.resetField=r=>this.form.resetField(this.getFormFieldName(r)),this.validateAllFields=r=>this.form.validateAllFields(r),a.form instanceof wr){const r=a.form;if(this.form=r.form,typeof a.fields=="string")this.fieldsMap=r.getFormFieldName(a.fields);else{const i={...a.fields};for(const l in i)i[l]=r.getFormFieldName(i[l]);this.fieldsMap=i}}else this.form=a.form,this.fieldsMap=a.fields;this.store=new at({deps:[this.form.store],fn:({currDepVals:r})=>{const i=r[0];let l;if(typeof this.fieldsMap=="string")l=Xt(i.values,this.fieldsMap);else{l={};const u=this.fieldsMap;for(const f in u)l[f]=Xt(i.values,u[f])}return{values:l}}})}get state(){return this.store.state}async handleSubmit(a){return this.form.handleSubmit(a)}}function es({className:n,...a}){return h.jsx(Ll,{"data-slot":"label",className:pe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...a})}function Lu({className:n,orientation:a="horizontal",decorative:r=!0,...i}){return h.jsx(ku,{"data-slot":"separator",decorative:r,orientation:a,className:pe("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...i})}const Ku=Zi("group/field flex w-full gap-3 data-[invalid=true]:text-destructive",{variants:{orientation:{vertical:["flex-col [&>*]:w-full [&>.sr-only]:w-auto"],horizontal:["flex-row items-center","[&>[data-slot=field-label]]:flex-auto","has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px"],responsive:["flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto","@md/field-group:[&>[data-slot=field-label]]:flex-auto","@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px"]}},defaultVariants:{orientation:"vertical"}});function $u({className:n,orientation:a="vertical",...r}){return h.jsx("div",{role:"group","data-slot":"field","data-orientation":a,className:pe(Ku({orientation:a}),n),...r})}function qu({className:n,...a}){return h.jsx(es,{"data-slot":"field-label",className:pe("group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50","has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>*]:data-[slot=field]:p-4","has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10",n),...a})}function zu({className:n,...a}){return h.jsx("p",{"data-slot":"field-description",className:pe("text-muted-foreground text-sm leading-normal font-normal group-has-[[data-orientation=horizontal]]/field:text-balance","last:mt-0 nth-last-2:-mt-1 [[data-variant=legend]+&]:-mt-1.5","[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4",n),...a})}function Or({className:n,type:a,...r}){return h.jsx("input",{type:a,"data-slot":"input",className:pe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...r})}function Wu({className:n,...a}){return h.jsx("div",{"data-slot":"input-group",role:"group",className:pe("group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none","h-9 min-w-0 has-[>textarea]:h-auto","has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]","has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40",n),...a})}const Uu=Zi("text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none [&>svg:not([class*='size-'])]:size-4 [&>kbd]:rounded-[calc(var(--radius)-5px)] group-data-[disabled=true]/input-group:opacity-50",{variants:{align:{"inline-start":"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]","inline-end":"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]","block-start":"order-first w-full justify-start px-3 pt-3 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5","block-end":"order-last w-full justify-start px-3 pb-3 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5"}},defaultVariants:{align:"inline-start"}});function St({className:n,align:a="inline-start",...r}){return h.jsx("div",{role:"group","data-slot":"input-group-addon","data-align":a,className:pe(Uu({align:a}),n),onClick:i=>{i.target.closest("button")||i.currentTarget.parentElement?.querySelector("input")?.focus()},...r})}function Hu({className:n,...a}){return h.jsx(Or,{"data-slot":"input-group-control",className:pe("flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",n),...a})}const An=T.forwardRef(({fieldProps:n,labelProps:a,descriptionProps:r,label:i,description:l,inputProps:u,children:f},g)=>{const m=Mc();return h.jsxs($u,{...n,children:[i&&h.jsx(qu,{htmlFor:m.name,...a,children:i}),f({id:m.name,value:m.state.value,onChange:y=>{if(u?.type==="number"){const k=parseFloat(y);m.handleChange(isNaN(k)?"":k)}else m.handleChange(y)},onBlur:m.handleBlur,ref:g}),l&&h.jsx(zu,{...r,children:l})]})});An.displayName="TextFieldBase";const ts=T.forwardRef(({fieldProps:n,labelProps:a,inputProps:r,descriptionProps:i,label:l,description:u,addon:f,transformValue:g},m)=>h.jsx(An,{fieldProps:n,labelProps:a,descriptionProps:i,inputProps:r,label:l,description:u,ref:m,children:({id:y,value:k,onChange:C,onBlur:V,ref:A})=>h.jsxs(Wu,{children:[h.jsx(Hu,{ref:A,id:y,value:g?g(k):k,onChange:N=>C(N.currentTarget.value),onBlur:V,...r}),f&&f]})}));ts.displayName="InputGroupText";function Oi(n,a){(a==null||a>n.length)&&(a=n.length);for(var r=0,i=Array(a);r<a;r++)i[r]=n[r];return i}function Gu(n,a,r){return a=_r(a),(function(i,l){if(l&&(typeof l=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u})(i)})(n,os()?Reflect.construct(a,r||[],_r(n).constructor):a.apply(n,r))}function Yu(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function Qu(n,a,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function ns(n,a){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=(function(m,y){if(m){if(typeof m=="string")return Oi(m,y);var k={}.toString.call(m).slice(8,-1);return k==="Object"&&m.constructor&&(k=m.constructor.name),k==="Map"||k==="Set"?Array.from(m):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?Oi(m,y):void 0}})(n))||a){r&&(n=r);var i=0,l=function(){};return{s:l,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(m){throw m},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,f=!0,g=!1;return{s:function(){r=r.call(n)},n:function(){var m=r.next();return f=m.done,m},e:function(m){g=!0,u=m},f:function(){try{f||r.return==null||r.return()}finally{if(g)throw u}}}}function rs(n,a,r){return(a=(function(i){var l=(function(u,f){if(typeof u!="object"||!u)return u;var g=u[Symbol.toPrimitive];if(g!==void 0){var m=g.call(u,f);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(u)})(i,"string");return typeof l=="symbol"?l:l+""})(a))in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,n}function Sr(){return Sr=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Sr.apply(null,arguments)}function _r(n){return _r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_r(n)}function Xu(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&Mo(n,a)}function os(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(os=function(){return!!n})()}function Ii(n,a){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);a&&(i=i.filter((function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),r.push.apply(r,i)}return r}function fr(n){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Ii(Object(r),!0).forEach((function(i){rs(n,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Ii(Object(r)).forEach((function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))}))}return n}function is(n,a){if(n==null)return{};var r,i,l=(function(f,g){if(f==null)return{};var m={};for(var y in f)if({}.hasOwnProperty.call(f,y)){if(g.includes(y))continue;m[y]=f[y]}return m})(n,a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(i=0;i<u.length;i++)r=u[i],a.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(l[r]=n[r])}return l}function Mo(n,a){return Mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Mo(n,a)}function Pn(n,a){var r,i=a.replacementChars,l=a.replacement,u=a.separate,f=i,g="",m=ns(n);try{for(m.s();!(r=m.n()).done;){var y,k=r.value,C=!Object.prototype.hasOwnProperty.call(l,k)&&((y=l[f[0]])===null||y===void 0?void 0:y.test(k));(u&&k===f[0]||C)&&(f=f.slice(1),g+=k)}}catch(V){m.e(V)}finally{m.f()}return g}function as(n,a){var r,i=a.mask,l=a.replacement,u=a.separate,f=a.showMask,g=0,m="",y=ns(i);try{for(y.s();!(r=y.n()).done;){var k=r.value;if(!f&&n[g]===void 0)break;Object.prototype.hasOwnProperty.call(l,k)&&n[g]!==void 0?m+=n[g++]:m+=k}}catch(V){y.e(V)}finally{y.f()}if(u&&!f){for(var C=i.length-1;C>=0&&m[C]===i[C];C--);m=m.slice(0,C+1)}return m}function ss(n,a){for(var r=a.mask,i=a.replacement,l=[],u=0;u<r.length;u++){var f,g=(f=n[u])!==null&&f!==void 0?f:r[u],m=Object.prototype.hasOwnProperty.call(i,g)?"replacement":n[u]!==void 0&&n[u]!==r[u]?"input":"mask";l.push({type:m,value:g,index:u})}return l}function an(n){return n.length>0?rs({},n,/./):{}}function Co(n,a){for(var r=a.start,i=r===void 0?0:r,l=a.end,u=a.mask,f=a.replacement,g=a.separate,m=n.slice(i,l),y=u.slice(i,l),k="",C=0;C<y.length;C++){var V=Object.prototype.hasOwnProperty.call(f,y[C]);V&&m[C]!==void 0&&m[C]!==y[C]?k+=m[C]:V&&g&&(k+=y[C])}return k}function ls(n,a){var r=a.mask,i=a.replacement,l=typeof i=="string"?an(i):i,u=RegExp("[^".concat(Object.keys(l).join(""),"]"),"g");return as(Pn(n,{replacementChars:r.replace(u,""),replacement:l,separate:!1}),{mask:r,replacement:l,separate:!1,showMask:!1})}function Zu(n,a){var r=a.mask,i=a.replacement,l=typeof i=="string"?an(i):i,u=Co(n,{mask:r,replacement:l,separate:!1}),f=RegExp("[^".concat(Object.keys(l).join(""),"]"),"g");return Pn(u,{replacementChars:r.replace(f,""),replacement:l,separate:!1})}function Ju(n,a){var r=a.mask,i=a.replacement,l=typeof i=="string"?an(i):i;return ss(ls(n,{mask:r,replacement:l}),{mask:r,replacement:l})}var ec=["[","]","\\","/","^","$",".","|","?","*","+","(",")","{","}"];function Ti(n){return ec.includes(n)?"\\".concat(n):n}function tc(n,a){for(var r=a.mask,i=a.replacement,l=typeof i=="string"?an(i):i,u=n==="partial"||n==="partial-inexact",f=n==="full"||n==="partial",g="",m=0;m<r.length;m++){var y=r[m];m===0&&(g="^"),u&&(g+="("),g+=Object.prototype.hasOwnProperty.call(l,y)?"".concat(f?"(?!".concat(Ti(y),")"):"","(").concat(l[y].source,")"):Ti(y),m===r.length-1&&(u&&(g+=")?".repeat(r.length)),g+="$")}return g}function nc(n,a){return new Proxy(n,{set:function(r,i,l){return i==="current"&&(l!==n.current&&(n.current!==null&&a.unregister(n.current),l!==null&&a.register(l)),r[i]=l,!0)}})}function rc(n,a,r){return a=En(a),(function(i,l){if(l&&(typeof l=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u})(i)})(n,Lo()?Reflect.construct(a,r||[],En(n).constructor):a.apply(n,r))}function us(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function cs(n,a,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function oc(n,a,r){return(a=(function(i){var l=(function(u,f){if(typeof u!="object"||!u)return u;var g=u[Symbol.toPrimitive];if(g!==void 0){var m=g.call(u,f);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(u)})(i,"string");return typeof l=="symbol"?l:l+""})(a))in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,n}function En(n){return En=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},En(n)}function ic(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&On(n,a)}function Lo(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Lo=function(){return!!n})()}function Ai(n,a){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);a&&(i=i.filter((function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),r.push.apply(r,i)}return r}function Di(n){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Ai(Object(r),!0).forEach((function(i){oc(n,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Ai(Object(r)).forEach((function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))}))}return n}function ac(n,a){if(n==null)return{};var r,i,l=(function(f,g){if(f==null)return{};var m={};for(var y in f)if({}.hasOwnProperty.call(f,y)){if(g.includes(y))continue;m[y]=f[y]}return m})(n,a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(i=0;i<u.length;i++)r=u[i],a.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(l[r]=n[r])}return l}function On(n,a){return On=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},On(n,a)}function Po(n){return Po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Po(n)}function Fo(n){var a=typeof Map=="function"?new Map:void 0;return Fo=function(r){if(r===null||!(function(l){try{return Function.toString.call(l).indexOf("[native code]")!==-1}catch{return typeof l=="function"}})(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(a!==void 0){if(a.has(r))return a.get(r);a.set(r,i)}function i(){return(function(l,u,f){if(Lo())return Reflect.construct.apply(null,arguments);var g=[null];g.push.apply(g,u);var m=new(l.bind.apply(l,g));return f&&On(m,f.prototype),m})(r,arguments,En(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),On(i,r)},Fo(n)}var Fn=(function(n){function a(r){var i;return us(this,a),(i=rc(this,a,[r])).name="SyntheticChangeError",i}return ic(a,n),cs(a)})(Fo(Error)),Vi,sc=["options"],lc=["text","email","tel","search","url"],ds=cs((function n(a){var r=a.init,i=a.tracking;us(this,n);var l=new WeakMap;this.register=function(u){var f;if(lc.includes(u.type)){var g=(f=u._wrapperState)!==null&&f!==void 0?f:{},m=g.initialValue,y=m===void 0?"":m,k=g.controlled,C=k!==void 0&&k,V=r({initialValue:u.value||y,controlled:C}),A=V.value,N=V.options,I={value:A,options:N,fallbackOptions:N},R={id:-1,cachedId:-1},B={value:"",selectionStart:0,selectionEnd:0},$=Object.getOwnPropertyDescriptor("_valueTracker"in u?u:HTMLInputElement.prototype,"value");Object.defineProperty(u,"value",Di(Di({},$),{},{set:function(ae){var Z;B.value=ae,$==null||(Z=$.set)===null||Z===void 0||Z.call(u,ae)}})),u.value=A;var X=function(){var ae=function(){var Z,de;B.selectionStart=(Z=u.selectionStart)!==null&&Z!==void 0?Z:0,B.selectionEnd=(de=u.selectionEnd)!==null&&de!==void 0?de:0,R.id=window.setTimeout(ae)};R.id=window.setTimeout(ae)},ie=function(){window.clearTimeout(R.id),R.id=-1,R.cachedId=-1},oe=function(ae){try{var Z,de;if(R.cachedId===R.id)throw new Fn("The input selection has not been updated.");R.cachedId=R.id;var le=u.value,ge=u.selectionStart,xe=u.selectionEnd;if(ge===null||xe===null)throw new Fn("The selection attributes have not been initialized.");var ye,te=B.value;if(ae.inputType===void 0&&(B.selectionStart=0,B.selectionEnd=te.length),ge>B.selectionStart?ye="insert":ge<=B.selectionStart&&ge<B.selectionEnd?ye="deleteBackward":ge===B.selectionEnd&&le.length<te.length&&(ye="deleteForward"),ye===void 0||(ye==="deleteBackward"||ye==="deleteForward")&&le.length>te.length)throw new Fn("Input type detection error.");var me="",Ie=B.selectionStart,Se=B.selectionEnd;if(ye==="insert")me=le.slice(B.selectionStart,ge);else{var Ae=te.length-le.length;Ie=ge,Se=ge+Ae}I.value!==te?I.options=I.fallbackOptions:I.fallbackOptions=I.options;var je=I.options,Pe=i({inputType:ye,previousValue:te,previousOptions:je,value:le,addedValue:me,changeStart:Ie,changeEnd:Se,selectionStart:ge,selectionEnd:xe}),De=Pe.options,Te=ac(Pe,sc);u.value=Te.value,u.setSelectionRange(Te.selectionStart,Te.selectionEnd),I.value=Te.value,I.options=De,B.selectionStart=Te.selectionStart,B.selectionEnd=Te.selectionEnd,(Z=u._valueTracker)===null||Z===void 0||(de=Z.setValue)===null||de===void 0||de.call(Z,te)}catch(Ve){if(u.value=B.value,u.setSelectionRange(B.selectionStart,B.selectionEnd),ae.preventDefault(),ae.stopPropagation(),Ve.name!=="SyntheticChangeError")throw Ve}};document.activeElement===u&&X(),u.addEventListener("focus",X),u.addEventListener("blur",ie),u.addEventListener("input",oe),l.set(u,{onFocus:X,onBlur:ie,onInput:oe})}},this.unregister=function(u){var f=l.get(u);f!==void 0&&(u.removeEventListener("focus",f.onFocus),u.removeEventListener("blur",f.onBlur),u.removeEventListener("input",f.onInput),l.delete(u))}}));Vi=ds,Object.defineProperty(Vi.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,configurable:!0,value:"Input"});function uc(n,a){return T.useCallback((function(r){n.current=r,typeof a=="function"?a(r):Po(a)==="object"&&a!==null&&(a.current=r)}),[n,a])}var Ni,cc=["track","modify"];function Qt(n){var a,r,i,l;return{mask:(a=n.mask)!==null&&a!==void 0?a:"",replacement:typeof n.replacement=="string"?an(n.replacement):(r=n.replacement)!==null&&r!==void 0?r:{},showMask:(i=n.showMask)!==null&&i!==void 0&&i,separate:(l=n.separate)!==null&&l!==void 0&&l,track:n.track,modify:n.modify}}var fs=(function(n){function a(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Yu(this,a),(r=Gu(this,a,[{init:function(l){var u=l.initialValue,f=l.controlled,g=Qt(i),m=g.mask,y=g.replacement,k=g.separate,C=g.showMask;return u=f||u?u:C?m:"",{value:u,options:{mask:m,replacement:y,separate:k}}},tracking:function(l){var u=l.inputType,f=l.previousValue,g=l.previousOptions,m=l.addedValue,y=l.changeStart,k=l.changeEnd,C=Qt(i),V=C.track,A=C.modify,N=is(C,cc),I=N.mask,R=N.replacement,B=N.showMask,$=N.separate,X=fr(fr({},u==="insert"?{inputType:u,data:m}:{inputType:u,data:null}),{},{value:f,selectionStart:y,selectionEnd:k}),ie=V?.(X);if(ie===!1)throw new Fn("Custom tracking stop.");ie===null?m="":ie!==!0&&ie!==void 0&&(m=ie);var oe=A?.(X);oe?.mask!==void 0&&(I=oe.mask),oe?.replacement!==void 0&&(R=typeof oe?.replacement=="string"?an(oe?.replacement):oe.replacement),oe?.showMask!==void 0&&(B=oe.showMask),oe?.separate!==void 0&&($=oe.separate);var ae=Co(f,fr({end:y},g)),Z=Co(f,fr({start:k},g)),de=RegExp("[^".concat(Object.keys(R).join(""),"]"),"g"),le=I.replace(de,"");if(ae&&(ae=Pn(ae,{replacementChars:le,replacement:R,separate:$}),le=le.slice(ae.length)),m&&(m=Pn(m,{replacementChars:le,replacement:R,separate:!1}),le=le.slice(m.length)),u==="insert"&&m==="")throw new Fn("The character does not match the key value of the `replacement` object.");if($){var ge=I.slice(y,k).replace(de,""),xe=ge.length-m.length;xe<0?Z=Z.slice(-xe):xe>0&&(Z=ge.slice(-xe)+Z)}Z&&(Z=Pn(Z,{replacementChars:le,replacement:R,separate:$}));var ye=as(ae+m+Z,{mask:I,replacement:R,separate:$,showMask:B}),te=(function(me){var Ie,Se,Ae,je=me.inputType,Pe=me.value,De=me.addedValue,Te=me.beforeChangeValue,Ve=me.mask,ft=me.replacement,Ke=me.separate,Xe=ss(Pe,{mask:Ve,replacement:ft}).filter((function(z){var be=z.type;return be==="input"||Ke&&be==="replacement"})),ze=(Ie=Xe[Te.length+De.length-1])===null||Ie===void 0?void 0:Ie.index,ee=(Se=Xe[Te.length-1])===null||Se===void 0?void 0:Se.index,ve=(Ae=Xe[Te.length+De.length])===null||Ae===void 0?void 0:Ae.index;if(je==="insert"){if(ze!==void 0)return ze+1;if(ve!==void 0)return ve;if(ee!==void 0)return ee+1}if(je==="deleteForward"){if(ve!==void 0)return ve;if(ee!==void 0)return ee+1}if(je==="deleteBackward"){if(ee!==void 0)return ee+1;if(ve!==void 0)return ve}var Ne=Pe.split("").findIndex((function(z){return Object.prototype.hasOwnProperty.call(ft,z)}));return Ne!==-1?Ne:Pe.length})({inputType:u,value:ye,addedValue:m,beforeChangeValue:ae,mask:I,replacement:R,separate:$});return{value:ye,selectionStart:te,selectionEnd:te,options:{mask:I,replacement:R,separate:$}}}}])).format=function(l){return ls(l,Qt(i))},r.formatToParts=function(l){return Ju(l,Qt(i))},r.unformat=function(l){return Zu(l,Qt(i))},r.generatePattern=function(l){return tc(l,Qt(i))},r}return Xu(a,ds),Qu(a)})();Ni=fs,Object.defineProperty(Ni.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,configurable:!0,value:"Mask"});function dc(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.mask,r=n.replacement,i=n.showMask,l=n.separate,u=n.track,f=n.modify,g=T.useRef(null),m=T.useRef({mask:a,replacement:r,showMask:i,separate:l,track:u,modify:f});return m.current.mask=a,m.current.replacement=r,m.current.showMask=i,m.current.separate=l,m.current.track=u,m.current.modify=f,T.useMemo((function(){return nc(g,new fs(m.current))}),[])}var fc=["component","mask","replacement","showMask","separate","track","modify"];function hc(n,a){var r=n.component,i=n.mask,l=n.replacement,u=n.showMask,f=n.separate,g=n.track,m=n.modify,y=is(n,fc),k=dc({mask:i,replacement:l,showMask:u,separate:f,track:g,modify:m}),C=uc(k,a);return r?xt.createElement(r,Sr({ref:C},y)):xt.createElement("input",Sr({ref:C},y))}var pc=T.forwardRef(hc);const hs=T.forwardRef(({fieldProps:n,labelProps:a,inputProps:r,descriptionProps:i,label:l,description:u,mask:f="",replacement:g,showMask:m=!1,separate:y=!1},k)=>h.jsx(An,{fieldProps:n,labelProps:a,inputProps:r,descriptionProps:i,label:l,description:u,ref:k,children:({id:C,value:V,onChange:A,onBlur:N,ref:I})=>h.jsx(pc,{ref:I,id:C,mask:f,replacement:g,showMask:m,separate:y,value:String(V),onChange:R=>A(R.target.value),onBlur:N,className:pe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r?.className),...r})}));hs.displayName="InputMask";const ps=T.forwardRef(({fieldProps:n,labelProps:a,inputProps:r,descriptionProps:i,label:l,description:u},f)=>h.jsx(An,{fieldProps:n,labelProps:a,inputProps:r,descriptionProps:i,label:l,description:u,ref:f,children:({id:g,value:m,onChange:y,onBlur:k,ref:C})=>h.jsx(Or,{ref:C,id:g,value:m,onChange:V=>y(V.target.value),onBlur:k,...r})}));ps.displayName="InputText";const ms=T.forwardRef(({fieldProps:n,labelProps:a,inputProps:r,descriptionProps:i,label:l,description:u},f)=>{const g=C=>{if(!C)return"";if(C=C.slice(0,5),C.length<=2)return C;const V=C.slice(-2),A=C.slice(0,-2);return`${parseInt(A,10)}:${V}`},m=(C,V)=>A=>{const N=A.target.value.replace(/\D/g,"").slice(0,5),I=g(N);C(I),V&&setTimeout(()=>{V.setSelectionRange(I.length,I.length)},0)},y=()=>C=>{["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Home","End"].includes(C.key)||C.metaKey||C.ctrlKey||C.altKey||/^\d$/.test(C.key)||C.preventDefault()},k=(C,V,A)=>()=>{const N=C.replace(/\D/g,"");if(N.length>=2&&parseInt(N.slice(-2),10)>59){const B=(N.slice(0,-2)||"")+"59";V(g(B))}A()};return h.jsx(An,{fieldProps:n,labelProps:a,inputProps:r,descriptionProps:i,label:l,description:u,ref:f,children:({id:C,value:V,onChange:A,onBlur:N,ref:I})=>h.jsx(Or,{ref:I,id:C,type:"text",inputMode:"numeric",value:String(V),onChange:m(A,I&&"current"in I?I.current:null),onKeyDown:y(),onBlur:k(String(V),A,N),placeholder:"0:00",className:pe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r?.className),...r})})});ms.displayName="InputTimeDuration";const In=typeof window<"u"?T.useLayoutEffect:T.useEffect;function mc(n){const[a,r]=T.useState(()=>({form:n.form,name:n.name})),[i,l]=T.useState(()=>new Fi({...n}));(a.form!==n.form||a.name!==n.name)&&(l(new Fi({...n})),r({form:n.form,name:n.name}));const u=it(i.store,n.mode==="array"?A=>Object.keys(A.value??[]).length:A=>A.value),f=it(i.store,A=>A.meta.isTouched),g=it(i.store,A=>A.meta.isBlurred),m=it(i.store,A=>A.meta.isDirty),y=it(i.store,A=>A.meta.errorMap),k=it(i.store,A=>A.meta.errorSourceMap),C=it(i.store,A=>A.meta.isValidating),V=T.useMemo(()=>{const N={...i,get state(){return{value:n.mode==="array"?i.state.value:u,get meta(){return{...i.state.meta,isTouched:f,isBlurred:g,isDirty:m,errorMap:y,errorSourceMap:k,isValidating:C}}}}};return N.Field=vs,N},[i,n.mode,u,f,g,m,y,k,C]);return In(i.mount,[i]),In(()=>{i.update(n)}),V}const vs=(({children:n,...a})=>{const r=mc(a),i=T.useMemo(()=>Tn(n,r),[n,r]);return h.jsx(h.Fragment,{children:i})});function vc(){return T.useState(()=>Za())[0]}const gc=T.version.split(".")[0]==="17"?vc:T.useId;function yc({form:n,selector:a,children:r}){const i=it(n.store,a);return h.jsx(h.Fragment,{children:Tn(r,i)})}function bc(n){const a=gc(),[r,i]=T.useState(n?.formId),[l,u]=T.useState(()=>new Pi({...n,formId:n?.formId??a}));if(r!==n?.formId){const g=n?.formId??a;u(new Pi({...n,formId:g})),i(g)}const f=T.useMemo(()=>{const g={...l,handleSubmit:((...m)=>l._handleSubmit(...m)),get formId(){return l._formId},get state(){return l.store.state}};return g.Field=function(y){return h.jsx(vs,{...y,form:l})},g.Subscribe=function(y){return h.jsx(yc,{form:l,selector:y.selector,children:y.children})},g},[l]);return In(l.mount,[]),In(()=>{l.update(n)}),f}function xc({lens:n,selector:a,children:r}){const i=it(n.store,a);return h.jsx(h.Fragment,{children:Tn(r,i)})}function wc(n){const[a]=T.useState(()=>{const r=new wr(n),i=n.form instanceof wr?n.form.form:n.form,l=r;return l.AppForm=function(f){return h.jsx(i.AppForm,{...f})},l.AppField=function(f){return h.jsx(i.AppField,{...a.getFormFieldOptions(f)})},l.Field=function(f){return h.jsx(i.Field,{...a.getFormFieldOptions(f)})},l.Subscribe=function(f){return h.jsx(xc,{lens:a,selector:f.selector,children:f.children})},Object.assign(l,{...n.formComponents})});return In(a.mount,[a]),a}const Ri=T.createContext(null),gs=T.createContext(null);function ys(){const n=T.useContext(gs);if(!n)throw new Error("`formContext` only works when within a `formComponent` passed to `createFormHook`");return n}function Sc(){function n(){const a=T.useContext(Ri);if(!a)throw new Error("`fieldContext` only works when within a `fieldComponent` passed to `createFormHook`");return a}return{fieldContext:Ri,useFieldContext:n,useFormContext:ys,formContext:gs}}function _c({fieldComponents:n,fieldContext:a,formContext:r,formComponents:i}){function l(m){const y=bc(m),k=T.useMemo(()=>({children:A})=>h.jsx(r.Provider,{value:y,children:A}),[y]),C=T.useMemo(()=>(({children:N,...I})=>h.jsx(y.Field,{...I,children:R=>h.jsx(a.Provider,{value:R,children:N(Object.assign(R,n))})})),[y]);return T.useMemo(()=>Object.assign(y,{AppField:C,AppForm:k,...i}),[y,C,k])}function u({render:m,props:y}){return k=>m({...y,...k})}function f({render:m,props:y,defaultValues:k}){return function(V){const A=T.useMemo(()=>({form:V.form,fields:V.fields,defaultValues:k,formComponents:i}),[V.form,V.fields]),N=wc(A);return m({...y,...V,group:N})}}function g(m){return ys()}return{useAppForm:l,withForm:u,withFieldGroup:f,useTypedAppFormContext:g}}const{fieldContext:jc,formContext:kc,useFieldContext:Mc}=Sc(),{useAppForm:Cc,withForm:sn}=_c({fieldComponents:{InputText:ps,InputGroupText:ts,InputMask:hs,InputTimeDuration:ms},formComponents:{},fieldContext:jc,formContext:kc}),Lt={printerDepreciation:{printerPrice:0,printerLifetimeHours:0,printerPowerConsumption:.2},filament:{filamentCostPerKg:0},energy:{electricityCostPerKwh:0},print:{filamentUsedGrams:0,printDurationHours:"",failureRatePercent:10},profit:{profitMarginPercent:30}};function Pc(n){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(n)}const st=xt.memo(({content:n})=>h.jsxs(cl,{children:[h.jsx(dl,{children:h.jsx(Pc,{className:"text-muted-foreground"})}),h.jsx(fl,{className:"max-w-xs",children:n})]}));st.displayName="TooltipInfo";const Bt=n=>{if(!n)return n;const a=parseFloat(n.toString().replace(/[^0-9.-]+/g,""));return isNaN(a)?n:a.toString()},_d=n=>{if(typeof n=="number")return n;if(!n||typeof n!="string")return 0;const a=n.split(":");if(a.length===1)return(parseInt(a[0],10)||0)/60;if(a.length!==2)return 0;const r=parseInt(a[0],10)||0,i=parseInt(a[1],10)||0;return r+i/60},jd=n=>isNaN(n)||n===null||n===void 0||n===0?"":n.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),bs=sn({defaultValues:Lt,formId:"printerDepreciation",render:({form:n})=>h.jsxs(h.Fragment,{children:[h.jsx(n.AppField,{name:"printerDepreciation.printerPrice",children:a=>h.jsx(a.InputGroupText,{label:h.jsxs(h.Fragment,{children:["PreÃ§o da impressora",h.jsx(st,{content:"Informe o preÃ§o de compra da impressora."})]}),inputProps:{type:"number",step:"0.01"},addon:h.jsx(St,{children:"R$"})})}),h.jsx(n.AppField,{name:"printerDepreciation.printerLifetimeHours",children:a=>h.jsx(a.InputGroupText,{label:h.jsxs(h.Fragment,{children:["Vida Ãºtil da impressora",h.jsx(st,{content:"Informe a vida Ãºtil estimada da impressora em horas."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Bt,addon:h.jsx(St,{children:"H"})})}),h.jsx(n.AppField,{name:"printerDepreciation.printerPowerConsumption",children:a=>h.jsx(a.InputGroupText,{label:h.jsxs(h.Fragment,{children:["Consumo de energia da impressora",h.jsx(st,{content:"Informe o consumo de energia da impressora em quilowatts."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Bt,addon:h.jsx(St,{children:"kW"})})})]})});bs.displayName="PrinterDepreciationForm";const xs=sn({defaultValues:Lt,formId:"filament",render:({form:n})=>h.jsx(h.Fragment,{children:h.jsx(n.AppField,{name:"filament.filamentCostPerKg",children:a=>h.jsx(a.InputGroupText,{label:h.jsxs(h.Fragment,{children:["Custo do filamento",h.jsx(st,{content:"Informe o custo do filamento por quilograma."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Bt,addon:h.jsx(St,{children:"R$/kg"})})})})});xs.displayName="FilamentForm";const ws=sn({defaultValues:Lt,formId:"energy",render:({form:n})=>h.jsx(h.Fragment,{children:h.jsx(n.AppField,{name:"energy.electricityCostPerKwh",children:a=>h.jsx(a.InputGroupText,{label:h.jsxs(h.Fragment,{children:["Custo da eletricidade",h.jsx(st,{content:"Informe o custo da eletricidade por quilowatt-hora."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Bt,addon:h.jsx(St,{children:"R$/kWh"})})})})});ws.displayName="EnergyForm";const Ss=sn({defaultValues:Lt,formId:"print",render:({form:n})=>h.jsxs(h.Fragment,{children:[h.jsx(n.AppField,{name:"print.filamentUsedGrams",children:a=>h.jsx(a.InputGroupText,{label:h.jsxs(h.Fragment,{children:["Quantidade de filamento usado",h.jsx(st,{content:"Informe a quantidade de filamento usado em gramas."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Bt,addon:h.jsx(St,{children:"g"})})}),h.jsx(n.AppField,{name:"print.printDurationHours",children:a=>h.jsx(a.InputTimeDuration,{label:h.jsxs(h.Fragment,{children:["DuraÃ§Ã£o da impressÃ£o",h.jsx(st,{content:"Informe a duraÃ§Ã£o da impressÃ£o."})]})})}),h.jsx(n.AppField,{name:"print.failureRatePercent",children:a=>h.jsx(a.InputGroupText,{label:h.jsxs(h.Fragment,{children:["Taxa de falha",h.jsx(st,{content:"Informe a taxa de falha em porcentagem."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Bt,addon:h.jsx(St,{children:"%"})})})]})});Ss.displayName="PrintForm";const _s=sn({defaultValues:Lt,formId:"profit",render:({form:n})=>h.jsx(h.Fragment,{children:h.jsx(n.AppField,{name:"profit.profitMarginPercent",children:a=>h.jsx(a.InputGroupText,{label:h.jsxs(h.Fragment,{children:["Margem de lucro",h.jsx(st,{content:"Informe a margem de lucro em porcentagem."})]}),inputProps:{type:"number",step:"0.01"},transformValue:Bt,addon:h.jsx(St,{children:"%"})})})})});_s.displayName="ProfitForm";function Fc({className:n,...a}){return h.jsx("div",{"data-slot":"card",className:pe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",n),...a})}function Ec({className:n,...a}){return h.jsx("div",{"data-slot":"card-header",className:pe("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...a})}function Oc({className:n,...a}){return h.jsx("div",{"data-slot":"card-title",className:pe("leading-none font-semibold",n),...a})}function Ic({className:n,...a}){return h.jsx("div",{"data-slot":"card-description",className:pe("text-muted-foreground text-sm",n),...a})}function Tc({className:n,...a}){return h.jsx("div",{"data-slot":"card-action",className:pe("col-start-2 row-span-2 row-start-1 self-start justify-self-end",n),...a})}function Ac({className:n,...a}){return h.jsx("div",{"data-slot":"card-content",className:pe("px-6",n),...a})}function Dc({...n}){return h.jsx(Sl,{"data-slot":"collapsible",...n})}function Vc({...n}){return h.jsx(ra,{"data-slot":"collapsible-trigger",...n})}function Nc({...n}){return h.jsx(oa,{"data-slot":"collapsible-content",...n})}function Rc(n){return Qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m7 6 5 5 5-5"},child:[]},{tag:"path",attr:{d:"m7 13 5 5 5-5"},child:[]}]})(n)}function Bc(n){return Qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m17 11-5-5-5 5"},child:[]},{tag:"path",attr:{d:"m17 18-5-5-5 5"},child:[]}]})(n)}function Lc(n){return Qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"},child:[]},{tag:"path",attr:{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"},child:[]},{tag:"path",attr:{d:"M7 3v4a1 1 0 0 0 1 1h7"},child:[]}]})(n)}function Kc(n){return Qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 6h18"},child:[]},{tag:"path",attr:{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},child:[]},{tag:"path",attr:{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",x2:"10",y1:"11",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",x2:"14",y1:"11",y2:"17"},child:[]}]})(n)}var vr={exports:{}},$c=vr.exports,Bi;function qc(){return Bi||(Bi=1,(function(n,a){((r,i)=>{n.exports=i()})($c,function(){var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(o,s){o.__proto__=s}:function(o,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c])}))(e,t)},i=function(){return(i=Object.assign||function(e){for(var t,o=1,s=arguments.length;o<s;o++)for(var c in t=arguments[o])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e}).apply(this,arguments)};function l(e,t,o){for(var s,c=0,d=t.length;c<d;c++)!s&&c in t||((s=s||Array.prototype.slice.call(t,0,c))[c]=t[c]);return e.concat(s||Array.prototype.slice.call(t))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:hl,f=Object.keys,g=Array.isArray;function m(e,t){return typeof t=="object"&&f(t).forEach(function(o){e[o]=t[o]}),e}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var y=Object.getPrototypeOf,k={}.hasOwnProperty;function C(e,t){return k.call(e,t)}function V(e,t){typeof t=="function"&&(t=t(y(e))),(typeof Reflect>"u"?f:Reflect.ownKeys)(t).forEach(function(o){N(e,o,t[o])})}var A=Object.defineProperty;function N(e,t,o,s){A(e,t,m(o&&C(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},s))}function I(e){return{from:function(t){return e.prototype=Object.create(t.prototype),N(e.prototype,"constructor",e),{extend:V.bind(null,e.prototype)}}}}var R=Object.getOwnPropertyDescriptor,B=[].slice;function $(e,t,o){return B.call(e,t,o)}function X(e,t){return t(e)}function ie(e){if(!e)throw new Error("Assertion Failed")}function oe(e){u.setImmediate?setImmediate(e):setTimeout(e,0)}function ae(e,t){if(typeof t=="string"&&C(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var o=[],s=0,c=t.length;s<c;++s){var d=ae(e,t[s]);o.push(d)}return o}var p,v=t.indexOf(".");return v===-1||(p=e[t.substr(0,v)])==null?void 0:ae(p,t.substr(v+1))}function Z(e,t,o){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ie(typeof o!="string"&&"length"in o);for(var s=0,c=t.length;s<c;++s)Z(e,t[s],o[s])}else{var d,p,v=t.indexOf(".");v!==-1?(d=t.substr(0,v),(v=t.substr(v+1))===""?o===void 0?g(e)&&!isNaN(parseInt(d))?e.splice(d,1):delete e[d]:e[d]=o:Z(p=(p=e[d])&&C(e,d)?p:e[d]={},v,o)):o===void 0?g(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=o}}function de(e){var t,o={};for(t in e)C(e,t)&&(o[t]=e[t]);return o}var le=[].concat;function ge(e){return le.apply([],e)}var Ve="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ge([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return u[e]}),xe=new Set(Ve.map(function(e){return u[e]})),ye=null;function te(e){return ye=new WeakMap,e=(function t(o){if(!o||typeof o!="object")return o;var s=ye.get(o);if(s)return s;if(g(o)){s=[],ye.set(o,s);for(var c=0,d=o.length;c<d;++c)s.push(t(o[c]))}else if(xe.has(o.constructor))s=o;else{var p,v=y(o);for(p in s=v===Object.prototype?{}:Object.create(v),ye.set(o,s),o)C(o,p)&&(s[p]=t(o[p]))}return s})(e),ye=null,e}var me={}.toString;function Ie(e){return me.call(e).slice(8,-1)}var Se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ae=typeof Se=="symbol"?function(e){var t;return e!=null&&(t=e[Se])&&t.apply(e)}:function(){return null};function je(e,t){t=e.indexOf(t),0<=t&&e.splice(t,1)}var Pe={};function De(e){var t,o,s,c;if(arguments.length===1){if(g(e))return e.slice();if(this===Pe&&typeof e=="string")return[e];if(c=Ae(e))for(o=[];!(s=c.next()).done;)o.push(s.value);else{if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(o=new Array(t);t--;)o[t]=e[t]}}else for(t=arguments.length,o=new Array(t);t--;)o[t]=arguments[t];return o}var Te=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ve=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ue=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ve),ft={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ke(e,t){this.name=e,this.message=t}function Xe(e,t){return e+". Errors: "+Object.keys(t).map(function(o){return t[o].toString()}).filter(function(o,s,c){return c.indexOf(o)===s}).join(`
`)}function ze(e,t,o,s){this.failures=t,this.failedKeys=s,this.successCount=o,this.message=Xe(e,t)}function ee(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(o){return t[o]}),this.failuresByPos=t,this.message=Xe(e,this.failures)}I(Ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(ze).from(Ke),I(ee).from(Ke);var ve=Ue.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ne=Ke,z=Ue.reduce(function(e,t){var o=t+"Error";function s(c,d){this.name=o,c?typeof c=="string"?(this.message="".concat(c).concat(d?`
 `+d:""),this.inner=d||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=ft[t]||o,this.inner=null)}return I(s).from(Ne),e[t]=s,e},{}),be=(z.Syntax=SyntaxError,z.Type=TypeError,z.Range=RangeError,Ve.reduce(function(e,t){return e[t+"Error"]=z[t],e},{}));Ve=Ue.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=z[t]),e},{});function re(){}function We(e){return e}function lt(e,t){return e==null||e===We?t:function(o){return t(e(o))}}function Ze(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ln(e,t){return e===re?t:function(){var o=e.apply(this,arguments),s=(o!==void 0&&(arguments[0]=o),this.onsuccess),c=this.onerror,d=(this.onsuccess=null,this.onerror=null,t.apply(this,arguments));return s&&(this.onsuccess=this.onsuccess?Ze(s,this.onsuccess):s),c&&(this.onerror=this.onerror?Ze(c,this.onerror):c),d!==void 0?d:o}}function un(e,t){return e===re?t:function(){e.apply(this,arguments);var o=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?Ze(o,this.onsuccess):o),s&&(this.onerror=this.onerror?Ze(s,this.onerror):s)}}function Cs(e,t){return e===re?t:function(c){var s=e.apply(this,arguments),c=(m(c,s),this.onsuccess),d=this.onerror,p=(this.onsuccess=null,this.onerror=null,t.apply(this,arguments));return c&&(this.onsuccess=this.onsuccess?Ze(c,this.onsuccess):c),d&&(this.onerror=this.onerror?Ze(d,this.onerror):d),s===void 0?p===void 0?void 0:p:m(s,p)}}function Ps(e,t){return e===re?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Ir(e,t){return e===re?t:function(){var o=e.apply(this,arguments);if(o&&typeof o.then=="function"){for(var s=this,c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return o.then(function(){return t.apply(s,d)})}return t.apply(this,arguments)}}Ve.ModifyError=ze,Ve.DexieError=Ke,Ve.BulkError=ee;var tt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ko(e){tt=e}var cn={},$o=100,dn=typeof Promise>"u"?[]:(Ue=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[dn=crypto.subtle.digest("SHA-512",new Uint8Array([0])),y(dn),Ue]:[Ue,y(Ue),Ue]),Ue=dn[0],Gt=dn[1],Gt=Gt&&Gt.then,kt=Ue&&Ue.constructor,Tr=!!dn[2],fn=function(e,t){hn.push([e,t]),Dn&&(queueMicrotask(Es),Dn=!1)},Ar=!0,Dn=!0,Mt=[],Vn=[],Dr=We,ht={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:re,pgp:!1,env:{},finalize:re},J=ht,hn=[],Ct=0,Nn=[];function H(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=J;if(typeof e!="function"){if(e!==cn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Nr(this,this._value)}else this._state=null,this._value=null,++t.ref,(function o(s,c){try{c(function(d){if(s._state===null){if(d===s)throw new TypeError("A promise cannot be resolved with itself.");var p=s._lib&&Kt();d&&typeof d.then=="function"?o(s,function(v,w){d instanceof H?d._then(v,w):d.then(v,w)}):(s._state=!0,s._value=d,zo(s)),p&&$t()}},Nr.bind(null,s))}catch(d){Nr(s,d)}})(this,e)}var Vr={get:function(){var e=J,t=Kn;function o(s,c){var d=this,p=!e.global&&(e!==J||t!==Kn),v=p&&!mt(),w=new H(function(F,S){Rr(d,new qo(Uo(s,e,p,v),Uo(c,e,p,v),F,S,e))});return this._consoleTask&&(w._consoleTask=this._consoleTask),w}return o.prototype=cn,o},set:function(e){N(this,"then",e&&e.prototype===cn?Vr:{get:function(){return e},set:Vr.set})}};function qo(e,t,o,s,c){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=o,this.reject=s,this.psd=c}function Nr(e,t){var o,s;Vn.push(t),e._state===null&&(o=e._lib&&Kt(),t=Dr(t),e._state=!1,e._value=t,s=e,Mt.some(function(c){return c._value===s._value})||Mt.push(s),zo(e),o)&&$t()}function zo(e){var t=e._listeners;e._listeners=[];for(var o=0,s=t.length;o<s;++o)Rr(e,t[o]);var c=e._PSD;--c.ref||c.finalize(),Ct===0&&(++Ct,fn(function(){--Ct==0&&Br()},[]))}function Rr(e,t){if(e._state===null)e._listeners.push(t);else{var o=e._state?t.onFulfilled:t.onRejected;if(o===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ct,fn(Fs,[o,e,t])}}function Fs(e,t,o){try{var s,c=t._value;!t._state&&Vn.length&&(Vn=[]),s=tt&&t._consoleTask?t._consoleTask.run(function(){return e(c)}):e(c),t._state||Vn.indexOf(c)!==-1||(d=>{for(var p=Mt.length;p;)if(Mt[--p]._value===d._value)return Mt.splice(p,1)})(t),o.resolve(s)}catch(d){o.reject(d)}finally{--Ct==0&&Br(),--o.psd.ref||o.psd.finalize()}}function Es(){Pt(ht,function(){Kt()&&$t()})}function Kt(){var e=Ar;return Dn=Ar=!1,e}function $t(){var e,t,o;do for(;0<hn.length;)for(e=hn,hn=[],o=e.length,t=0;t<o;++t){var s=e[t];s[0].apply(null,s[1])}while(0<hn.length);Dn=Ar=!0}function Br(){for(var e=Mt,t=(Mt=[],e.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)}),Nn.slice(0)),o=t.length;o;)t[--o]()}function Rn(e){return new H(cn,!1,e)}function _e(e,t){var o=J;return function(){var s=Kt(),c=J;try{return vt(o,!0),e.apply(this,arguments)}catch(d){t&&t(d)}finally{vt(c,!1),s&&$t()}}}V(H.prototype,{then:Vr,_then:function(e,t){Rr(this,new qo(null,null,e,t,J))},catch:function(e){var t,o;return arguments.length===1?this.then(null,e):(t=e,o=arguments[1],typeof t=="function"?this.then(null,function(s){return(s instanceof t?o:Rn)(s)}):this.then(null,function(s){return(s&&s.name===t?o:Rn)(s)}))},finally:function(e){return this.then(function(t){return H.resolve(e()).then(function(){return t})},function(t){return H.resolve(e()).then(function(){return Rn(t)})})},timeout:function(e,t){var o=this;return e<1/0?new H(function(s,c){var d=setTimeout(function(){return c(new z.Timeout(t))},e);o.then(s,c).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(H.prototype,Symbol.toStringTag,"Dexie.Promise"),ht.env=Wo(),V(H,{all:function(){var e=De.apply(null,arguments).map($n);return new H(function(t,o){e.length===0&&t([]);var s=e.length;e.forEach(function(c,d){return H.resolve(c).then(function(p){e[d]=p,--s||t(e)},o)})})},resolve:function(e){return e instanceof H?e:e&&typeof e.then=="function"?new H(function(t,o){e.then(t,o)}):new H(cn,!0,e)},reject:Rn,race:function(){var e=De.apply(null,arguments).map($n);return new H(function(t,o){e.map(function(s){return H.resolve(s).then(t,o)})})},PSD:{get:function(){return J},set:function(e){return J=e}},totalEchoes:{get:function(){return Kn}},newPSD:pt,usePSD:Pt,scheduler:{get:function(){return fn},set:function(e){fn=e}},rejectionMapper:{get:function(){return Dr},set:function(e){Dr=e}},follow:function(e,t){return new H(function(o,s){return pt(function(c,d){var p=J;p.unhandleds=[],p.onunhandled=d,p.finalize=Ze(function(){var v,w=this;v=function(){w.unhandleds.length===0?c():d(w.unhandleds[0])},Nn.push(function F(){v(),Nn.splice(Nn.indexOf(F),1)}),++Ct,fn(function(){--Ct==0&&Br()},[])},p.finalize),e()},t,o,s)})}}),kt&&(kt.allSettled&&N(H,"allSettled",function(){var e=De.apply(null,arguments).map($n);return new H(function(t){e.length===0&&t([]);var o=e.length,s=new Array(o);e.forEach(function(c,d){return H.resolve(c).then(function(p){return s[d]={status:"fulfilled",value:p}},function(p){return s[d]={status:"rejected",reason:p}}).then(function(){return--o||t(s)})})})}),kt.any&&typeof AggregateError<"u"&&N(H,"any",function(){var e=De.apply(null,arguments).map($n);return new H(function(t,o){e.length===0&&o(new AggregateError([]));var s=e.length,c=new Array(s);e.forEach(function(d,p){return H.resolve(d).then(function(v){return t(v)},function(v){c[p]=v,--s||o(new AggregateError(c))})})})}),kt.withResolvers)&&(H.withResolvers=kt.withResolvers);var Re={awaits:0,echoes:0,id:0},Os=0,Bn=[],Ln=0,Kn=0,Is=0;function pt(e,p,o,s){var c=J,d=Object.create(c),p=(d.parent=c,d.ref=0,d.global=!1,d.id=++Is,ht.env,d.env=Tr?{Promise:H,PromiseProp:{value:H,configurable:!0,writable:!0},all:H.all,race:H.race,allSettled:H.allSettled,any:H.any,resolve:H.resolve,reject:H.reject}:{},p&&m(d,p),++c.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},Pt(d,e,o,s));return d.ref===0&&d.finalize(),p}function qt(){return Re.id||(Re.id=++Os),++Re.awaits,Re.echoes+=$o,Re.id}function mt(){return!!Re.awaits&&(--Re.awaits==0&&(Re.id=0),Re.echoes=Re.awaits*$o,!0)}function $n(e){return Re.echoes&&e&&e.constructor===kt?(qt(),e.then(function(t){return mt(),t},function(t){return mt(),Ee(t)})):e}function Ts(){var e=Bn[Bn.length-1];Bn.pop(),vt(e,!1)}function vt(e,t){var o,s,c=J;(t?!Re.echoes||Ln++&&e===J:!Ln||--Ln&&e===J)||queueMicrotask(t?(function(d){++Kn,Re.echoes&&--Re.echoes!=0||(Re.echoes=Re.awaits=Re.id=0),Bn.push(J),vt(d,!0)}).bind(null,e):Ts),e!==J&&(J=e,c===ht&&(ht.env=Wo()),Tr)&&(o=ht.env.Promise,s=e.env,c.global||e.global)&&(Object.defineProperty(u,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any)&&(o.any=s.any)}function Wo(){var e=u.Promise;return Tr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Pt(e,t,o,s,c){var d=J;try{return vt(e,!0),t(o,s,c)}finally{vt(d,!1)}}function Uo(e,t,o,s){return typeof e!="function"?e:function(){var c=J;o&&qt(),vt(t,!0);try{return e.apply(this,arguments)}finally{vt(c,!1),s&&queueMicrotask(mt)}}}function Lr(e){Promise===kt&&Re.echoes===0?Ln===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Gt).indexOf("[native code]")===-1&&(qt=mt=re);var Ee=H.reject,Ft="ï¿¿",ut="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ho="String expected.",zt=[],qn="__dbnames",Kr="readonly",$r="readwrite";function Et(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Go={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=te(t))[e],t}}function Yo(){throw z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ue(e,t){try{var o=Qo(e),s=Qo(t);if(o!==s)return o==="Array"?1:s==="Array"?-1:o==="binary"?1:s==="binary"?-1:o==="string"?1:s==="string"?-1:o==="Date"?1:s!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":for(var c=Xo(e),d=Xo(t),p=c.length,v=d.length,w=p<v?p:v,F=0;F<w;++F)if(c[F]!==d[F])return c[F]<d[F]?-1:1;return p===v?0:p<v?-1:1;case"Array":for(var S=e,b=t,j=S.length,M=b.length,_=j<M?j:M,x=0;x<_;++x){var E=ue(S[x],b[x]);if(E!==0)return E}return j===M?0:j<M?-1:1}}catch{}return NaN}function Qo(e){var t=typeof e;return t=="object"&&(ArrayBuffer.isView(e)||(t=Ie(e))==="ArrayBuffer")?"binary":t}function Xo(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function Wn(e,t,o){var s=e.schema.yProps;return s?(t&&0<o.numFailures&&(t=t.filter(function(c,d){return!o.failures[d]})),Promise.all(s.map(function(c){return c=c.updatesTable,t?e.db.table(c).where("k").anyOf(t).delete():e.db.table(c).clear()})).then(function(){return o})):o}Zo.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var o=t.add;if(g(o))return l(l([],g(e)?e:[],!0),o).sort();if(typeof o=="number")return(Number(e)||0)+o;if(typeof o=="bigint")try{return BigInt(e)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(t.remove!==void 0){var s=t.remove;if(g(s))return g(e)?e.filter(function(c){return!s.includes(c)}).sort():[];if(typeof s=="number")return Number(e)-s;if(typeof s=="bigint")try{return BigInt(e)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}return o=(o=t.replacePrefix)==null?void 0:o[0],o&&typeof e=="string"&&e.startsWith(o)?t.replacePrefix[1]+e.substring(o.length):e};var pn=Zo;function Zo(e){this["@@propmod"]=e}function Jo(e,t){for(var o=f(t),s=o.length,c=!1,d=0;d<s;++d){var p=o[d],v=t[p],w=ae(e,p);v instanceof pn?(Z(e,p,v.execute(w)),c=!0):w!==v&&(Z(e,p,v),c=!0)}return c}we.prototype._trans=function(e,t,o){var s=this._tx||J.trans,c=this.name,d=tt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function p(F,S,b){if(b.schema[c])return t(b.idbtrans,b);throw new z.NotFound("Table "+c+" not part of transaction")}var v=Kt();try{var w=s&&s.db._novip===this.db._novip?s===J.trans?s._promise(e,p,o):pt(function(){return s._promise(e,p,o)},{trans:s,transless:J.transless||J}):(function F(S,b,j,M){if(S.idbdb&&(S._state.openComplete||J.letThrough||S._vip)){var _=S._createTransaction(b,j,S._dbSchema);try{_.create(),S._state.PR1398_maxLoop=3}catch(x){return x.name===ve.InvalidState&&S.isOpen()&&0<--S._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),S.close({disableAutoOpen:!1}),S.open().then(function(){return F(S,b,j,M)})):Ee(x)}return _._promise(b,function(x,E){return pt(function(){return J.trans=_,M(x,E,_)})}).then(function(x){if(b==="readwrite")try{_.idbtrans.commit()}catch{}return b==="readonly"?x:_._completion.then(function(){return x})})}if(S._state.openComplete)return Ee(new z.DatabaseClosed(S._state.dbOpenError));if(!S._state.isBeingOpened){if(!S._state.autoOpen)return Ee(new z.DatabaseClosed);S.open().catch(re)}return S._state.dbReadyPromise.then(function(){return F(S,b,j,M)})})(this.db,e,[this.name],p);return d&&(w._consoleTask=d,w=w.catch(function(F){return console.trace(F),Ee(F)})),w}finally{v&&$t()}},we.prototype.get=function(e,t){var o=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Ee(new z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return o.core.get({trans:s,key:e}).then(function(c){return o.hook.reading.fire(c)})}).then(t)},we.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(g(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=f(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&t.every(function(F){return 0<=v.keyPath.indexOf(F)})){for(var w=0;w<t.length;++w)if(t.indexOf(v.keyPath[w])===-1)return!1;return!0}return!1}).sort(function(v,w){return v.keyPath.length-w.keyPath.length})[0];if(o&&this.db._maxKey!==Ft)return p=o.keyPath.slice(0,t.length),this.where(p).equals(p.map(function(v){return e[v]}));!o&&tt&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var s=this.schema.idxByName;function c(v,w){return ue(v,w)===0}var p=t.reduce(function(S,w){var F=S[0],S=S[1],b=s[w],j=e[w];return[F||b,F||!b?Et(S,b&&b.multi?function(M){return M=ae(M,w),g(M)&&M.some(function(_){return c(j,_)})}:function(M){return c(j,ae(M,w))}):S]},[null,null]),d=p[0],p=p[1];return d?this.where(d.name).equals(e[d.keyPath]).filter(p):o?this.filter(p):this.where(t).equals("")},we.prototype.filter=function(e){return this.toCollection().and(e)},we.prototype.count=function(e){return this.toCollection().count(e)},we.prototype.offset=function(e){return this.toCollection().offset(e)},we.prototype.limit=function(e){return this.toCollection().limit(e)},we.prototype.each=function(e){return this.toCollection().each(e)},we.prototype.toArray=function(e){return this.toCollection().toArray(e)},we.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},we.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,g(e)?"[".concat(e.join("+"),"]"):e))},we.prototype.reverse=function(){return this.toCollection().reverse()},we.prototype.mapToClass=function(e){for(var t=this.db,o=this.name,s=((this.schema.mappedClass=e).prototype instanceof Yo&&(e=(p=>{var v=S,w=p;if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function F(){this.constructor=v}function S(){return p!==null&&p.apply(this,arguments)||this}return r(v,w),v.prototype=w===null?Object.create(w):(F.prototype=w.prototype,new F),Object.defineProperty(S.prototype,"db",{get:function(){return t},enumerable:!1,configurable:!0}),S.prototype.table=function(){return o},S})(e)),new Set),c=e.prototype;c;c=y(c))Object.getOwnPropertyNames(c).forEach(function(p){return s.add(p)});function d(p){if(!p)return p;var v,w=Object.create(e.prototype);for(v in p)if(!s.has(v))try{w[v]=p[v]}catch{}return w}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=d,this.hook("reading",d),e},we.prototype.defineClass=function(){return this.mapToClass(function(e){m(this,e)})},we.prototype.add=function(e,t){var o=this,s=this.schema.primKey,c=s.auto,d=s.keyPath,p=e;return d&&c&&(p=zn(d)(e)),this._trans("readwrite",function(v){return o.core.mutate({trans:v,type:"add",keys:t!=null?[t]:null,values:[p]})}).then(function(v){return v.numFailures?H.reject(v.failures[0]):v.lastResult}).then(function(v){if(d)try{Z(e,d,v)}catch{}return v})},we.prototype.upsert=function(e,t){var o=this,s=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return o.core.get({trans:c,key:e}).then(function(d){var p=d??{};return Jo(p,t),s&&Z(p,s,e),o.core.mutate({trans:c,type:"put",values:[p],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(v){return v.numFailures?H.reject(v.failures[0]):!!d})})})},we.prototype.update=function(e,t){return typeof e!="object"||g(e)?this.where(":id").equals(e).modify(t):(e=ae(e,this.schema.primKey.keyPath))===void 0?Ee(new z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},we.prototype.put=function(e,t){var o=this,s=this.schema.primKey,c=s.auto,d=s.keyPath,p=e;return d&&c&&(p=zn(d)(e)),this._trans("readwrite",function(v){return o.core.mutate({trans:v,type:"put",values:[p],keys:t!=null?[t]:null})}).then(function(v){return v.numFailures?H.reject(v.failures[0]):v.lastResult}).then(function(v){if(d)try{Z(e,d,v)}catch{}return v})},we.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(o){return t.core.mutate({trans:o,type:"delete",keys:[e]}).then(function(s){return Wn(t,[e],s)}).then(function(s){return s.numFailures?H.reject(s.failures[0]):void 0})})},we.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Go}).then(function(o){return Wn(e,null,o)})}).then(function(t){return t.numFailures?H.reject(t.failures[0]):void 0})},we.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(o){return t.core.getMany({keys:e,trans:o}).then(function(s){return s.map(function(c){return t.hook.reading.fire(c)})})})},we.prototype.bulkAdd=function(e,t,o){var s=this,c=Array.isArray(t)?t:void 0,d=(o=o||(c?void 0:t))?o.allKeys:void 0;return this._trans("readwrite",function(p){var v=s.schema.primKey,F=v.auto,v=v.keyPath;if(v&&c)throw new z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var w=e.length,F=v&&F?e.map(zn(v)):e;return s.core.mutate({trans:p,type:"add",keys:c,values:F,wantResults:d}).then(function(S){var b=S.numFailures,j=S.failures;if(b===0)return d?S.results:S.lastResult;throw new ee("".concat(s.name,".bulkAdd(): ").concat(b," of ").concat(w," operations failed"),j)})})},we.prototype.bulkPut=function(e,t,o){var s=this,c=Array.isArray(t)?t:void 0,d=(o=o||(c?void 0:t))?o.allKeys:void 0;return this._trans("readwrite",function(p){var v=s.schema.primKey,F=v.auto,v=v.keyPath;if(v&&c)throw new z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var w=e.length,F=v&&F?e.map(zn(v)):e;return s.core.mutate({trans:p,type:"put",keys:c,values:F,wantResults:d}).then(function(S){var b=S.numFailures,j=S.failures;if(b===0)return d?S.results:S.lastResult;throw new ee("".concat(s.name,".bulkPut(): ").concat(b," of ").concat(w," operations failed"),j)})})},we.prototype.bulkUpdate=function(e){var t=this,o=this.core,s=e.map(function(p){return p.key}),c=e.map(function(p){return p.changes}),d=[];return this._trans("readwrite",function(p){return o.getMany({trans:p,keys:s,cache:"clone"}).then(function(v){var w=[],F=[],S=(e.forEach(function(b,j){var M=b.key,_=b.changes,x=v[j];if(x){for(var E=0,O=Object.keys(_);E<O.length;E++){var P=O[E],D=_[P];if(P===t.schema.primKey.keyPath){if(ue(D,M)!==0)throw new z.Constraint("Cannot update primary key in bulkUpdate()")}else Z(x,P,D)}d.push(j),w.push(M),F.push(x)}}),w.length);return o.mutate({trans:p,type:"put",keys:w,values:F,updates:{keys:s,changeSpecs:c}}).then(function(b){var j=b.numFailures,M=b.failures;if(j===0)return S;for(var _=0,x=Object.keys(M);_<x.length;_++){var E,O=x[_],P=d[Number(O)];P!=null&&(E=M[O],delete M[O],M[P]=E)}throw new ee("".concat(t.name,".bulkUpdate(): ").concat(j," of ").concat(S," operations failed"),M)})})})},we.prototype.bulkDelete=function(e){var t=this,o=e.length;return this._trans("readwrite",function(s){return t.core.mutate({trans:s,type:"delete",keys:e}).then(function(c){return Wn(t,e,c)})}).then(function(s){var c=s.numFailures,d=s.failures;if(c===0)return s.lastResult;throw new ee("".concat(t.name,".bulkDelete(): ").concat(c," of ").concat(o," operations failed"),d)})};var ei=we;function we(){}function mn(e){function t(p,v){if(v){for(var w=arguments.length,F=new Array(w-1);--w;)F[w-1]=arguments[w];return o[p].subscribe.apply(null,F),e}if(typeof p=="string")return o[p]}var o={};t.addEventType=d;for(var s=1,c=arguments.length;s<c;++s)d(arguments[s]);return t;function d(p,v,w){var F,S;if(typeof p!="object")return v=v||Ps,S={subscribers:[],fire:w=w||re,subscribe:function(b){S.subscribers.indexOf(b)===-1&&(S.subscribers.push(b),S.fire=v(S.fire,b))},unsubscribe:function(b){S.subscribers=S.subscribers.filter(function(j){return j!==b}),S.fire=S.subscribers.reduce(v,w)}},o[p]=t[p]=S;f(F=p).forEach(function(b){var j=F[b];if(g(j))d(b,F[b][0],F[b][1]);else{if(j!=="asap")throw new z.InvalidArgument("Invalid event config");var M=d(b,We,function(){for(var _=arguments.length,x=new Array(_);_--;)x[_]=arguments[_];M.subscribers.forEach(function(E){oe(function(){E.apply(null,x)})})})}})}}function vn(e,t){return I(t).from({prototype:e}),t}function Wt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function qr(e,t){e.filter=Et(e.filter,t)}function zr(e,t,o){var s=e.replayFilter;e.replayFilter=s?function(){return Et(s(),t())}:t,e.justLimit=o&&!s}function Un(e,t){if(e.isPrimKey)return t.primaryKey;var o=t.getIndexByKeyPath(e.index);if(o)return o;throw new z.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed")}function ti(e,t,o){var s=Un(e,t.schema);return t.openCursor({trans:o,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:s,range:e.range}})}function Hn(e,t,o,s){var c,d,p=e.replayFilter?Et(e.filter,e.replayFilter()):e.filter;return e.or?(c={},d=function(v,w,F){var S,b;p&&!p(w,F,function(j){return w.stop(j)},function(j){return w.fail(j)})||((b=""+(S=w.primaryKey))=="[object ArrayBuffer]"&&(b=""+new Uint8Array(S)),C(c,b))||(c[b]=!0,t(v,w,F))},Promise.all([e.or._iterate(d,o),ni(ti(e,s,o),e.algorithm,d,!e.keysOnly&&e.valueMapper)])):ni(ti(e,s,o),Et(e.algorithm,p),t,!e.keysOnly&&e.valueMapper)}function ni(e,t,o,s){var c=_e(s?function(d,p,v){return o(s(d),p,v)}:o);return e.then(function(d){if(d)return d.start(function(){var p=function(){return d.continue()};t&&!t(d,function(v){return p=v},function(v){d.stop(v),p=re},function(v){d.fail(v),p=re})||c(d.value,d,function(v){return p=v}),p()})})}fe.prototype._read=function(e,t){var o=this._ctx;return o.error?o.table._trans(null,Ee.bind(null,o.error)):o.table._trans("readonly",e).then(t)},fe.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ee.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},fe.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Et(t.algorithm,e)},fe.prototype._iterate=function(e,t){return Hn(this._ctx,e,t,this._ctx.table.core)},fe.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return e&&m(o,e),t._ctx=o,t},fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},fe.prototype.each=function(e){var t=this._ctx;return this._read(function(o){return Hn(t,e,o,t.table.core)})},fe.prototype.count=function(e){var t=this;return this._read(function(o){var s,c=t._ctx,d=c.table.core;return Wt(c,!0)?d.count({trans:o,query:{index:Un(c,d.schema),range:c.range}}).then(function(p){return Math.min(p,c.limit)}):(s=0,Hn(c,function(){return++s,!1},o,d).then(function(){return s}))}).then(e)},fe.prototype.sortBy=function(e,t){var o=e.split(".").reverse(),s=o[0],c=o.length-1;function d(w,F){return F?d(w[o[F]],F-1):w[s]}var p=this._ctx.dir==="next"?1:-1;function v(w,F){return ue(d(w,c),d(F,c))*p}return this.toArray(function(w){return w.sort(v)}).then(t)},fe.prototype.toArray=function(e){var t=this;return this._read(function(o){var s,c,d,p=t._ctx;return p.dir==="next"&&Wt(p,!0)&&0<p.limit?(s=p.valueMapper,c=Un(p,p.table.core.schema),p.table.core.query({trans:o,limit:p.limit,values:!0,query:{index:c,range:p.range}}).then(function(v){return v=v.result,s?v.map(s):v})):(d=[],Hn(p,function(v){return d.push(v)},o,p.table.core).then(function(){return d}))},e)},fe.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Wt(t)?zr(t,function(){var o=e;return function(s,c){return o===0||(o===1?--o:c(function(){s.advance(o),o=0}),!1)}}):zr(t,function(){var o=e;return function(){return--o<0}})),this},fe.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),zr(this._ctx,function(){var t=e;return function(o,s,c){return--t<=0&&s(c),0<=t}},!0),this},fe.prototype.until=function(e,t){return qr(this._ctx,function(o,s,c){return!e(o.value)||(s(c),t)}),this},fe.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},fe.prototype.last=function(e){return this.reverse().first(e)},fe.prototype.filter=function(e){var t;return qr(this._ctx,function(o){return e(o.value)}),(t=this._ctx).isMatch=Et(t.isMatch,e),this},fe.prototype.and=function(e){return this.filter(e)},fe.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},fe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},fe.prototype.desc=function(){return this.reverse()},fe.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(o,s){e(s.key,s)})},fe.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},fe.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(o,s){e(s.primaryKey,s)})},fe.prototype.keys=function(e){var t=this._ctx,o=(t.keysOnly=!t.isMatch,[]);return this.each(function(s,c){o.push(c.key)}).then(function(){return o}).then(e)},fe.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Wt(t,!0)&&0<t.limit)return this._read(function(s){var c=Un(t,t.table.core.schema);return t.table.core.query({trans:s,values:!1,limit:t.limit,query:{index:c,range:t.range}})}).then(function(s){return s.result}).then(e);t.keysOnly=!t.isMatch;var o=[];return this.each(function(s,c){o.push(c.primaryKey)}).then(function(){return o}).then(e)},fe.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},fe.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},fe.prototype.lastKey=function(e){return this.reverse().firstKey(e)},fe.prototype.distinct=function(){var e,t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];return t&&t.multi&&(e={},qr(this._ctx,function(s){var s=s.primaryKey.toString(),c=C(e,s);return e[s]=!0,!c})),this},fe.prototype.modify=function(e){var t=this,o=this._ctx;return this._write(function(s){function c(x,E){var O=E.failures;j+=x-E.numFailures;for(var P=0,D=f(O);P<D.length;P++){var L=D[P];b.push(O[L])}}var d=typeof e=="function"?e:function(x){return Jo(x,e)},p=o.table.core,S=p.schema.primaryKey,v=S.outbound,w=S.extractKey,F=200,S=t.db._options.modifyChunkSize,b=(S&&(F=typeof S=="object"?S[p.name]||S["*"]||200:S),[]),j=0,M=[],_=e===ri;return t.clone().primaryKeys().then(function(x){function E(P){var D=Math.min(F,x.length-P),L=x.slice(P,P+D);return(_?Promise.resolve([]):p.getMany({trans:s,keys:L,cache:"immutable"})).then(function(W){var U=[],K=[],Y=v?[]:null,G=_?L:[];if(!_)for(var q=0;q<D;++q){var Q=W[q],ce={value:te(Q),primKey:x[P+q]};d.call(ce,ce.value,ce)!==!1&&(ce.value==null?G.push(x[P+q]):v||ue(w(Q),w(ce.value))===0?(K.push(ce.value),v&&Y.push(x[P+q])):(G.push(x[P+q]),U.push(ce.value)))}return Promise.resolve(0<U.length&&p.mutate({trans:s,type:"add",values:U}).then(function(he){for(var ne in he.failures)G.splice(parseInt(ne),1);c(U.length,he)})).then(function(){return(0<K.length||O&&typeof e=="object")&&p.mutate({trans:s,type:"put",keys:Y,values:K,criteria:O,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<P}).then(function(he){return c(K.length,he)})}).then(function(){return(0<G.length||O&&_)&&p.mutate({trans:s,type:"delete",keys:G,criteria:O,isAdditionalChunk:0<P}).then(function(he){return Wn(o.table,G,he)}).then(function(he){return c(G.length,he)})}).then(function(){return x.length>P+D&&E(P+F)})})}var O=Wt(o)&&o.limit===1/0&&(typeof e!="function"||_)&&{index:o.index,range:o.range};return E(0).then(function(){if(0<b.length)throw new ze("Error modifying one or more objects",b,j,M);return x.length})})})},fe.prototype.delete=function(){var e=this._ctx,t=e.range;return!Wt(e)||e.table.schema.yProps||!e.isPrimKey&&t.type!==3?this.modify(ri):this._write(function(o){var s=e.table.core.schema.primaryKey,c=t;return e.table.core.count({trans:o,query:{index:s,range:c}}).then(function(d){return e.table.core.mutate({trans:o,type:"deleteRange",range:c}).then(function(w){var v=w.failures,w=w.numFailures;if(w)throw new ze("Could not delete some values",Object.keys(v).map(function(F){return v[F]}),d-w);return d-w})})})};var As=fe;function fe(){}var ri=function(e,t){return t.value=null};function Ds(e,t){return e<t?-1:e===t?0:1}function Vs(e,t){return t<e?-1:e===t?0:1}function He(e,t,o){return e=e instanceof ii?new e.Collection(e):e,e._ctx.error=new(o||TypeError)(t),e}function Ut(e){return new e.Collection(e,function(){return oi("")}).limit(0)}function Gn(M,t,o,s){var c,d,p,v,w,F,S,b=o.length;if(!o.every(function(x){return typeof x=="string"}))return He(M,Ho);function j(x){c=x==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},d=x==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},p=x==="next"?Ds:Vs;var E=o.map(function(O){return{lower:d(O),upper:c(O)}}).sort(function(O,P){return p(O.lower,P.lower)});v=E.map(function(O){return O.upper}),w=E.map(function(O){return O.lower}),S=(F=x)==="next"?"":s}j("next");var M=new M.Collection(M,function(){return gt(v[0],w[b-1]+s)}),_=(M._ondirectionchange=function(x){j(x)},0);return M._addAlgorithm(function(x,E,O){var P=x.key;if(typeof P=="string"){var D=d(P);if(t(D,w,_))return!0;for(var L=null,W=_;W<b;++W){var U=((K,Y,G,q,Q,ce)=>{for(var he=Math.min(K.length,q.length),ne=-1,se=0;se<he;++se){var ke=Y[se];if(ke!==q[se])return Q(K[se],G[se])<0?K.substr(0,se)+G[se]+G.substr(se+1):Q(K[se],q[se])<0?K.substr(0,se)+q[se]+G.substr(se+1):0<=ne?K.substr(0,ne)+Y[ne]+G.substr(ne+1):null;Q(K[se],ke)<0&&(ne=se)}return he<q.length&&ce==="next"?K+G.substr(K.length):he<K.length&&ce==="prev"?K.substr(0,G.length):ne<0?null:K.substr(0,ne)+q[ne]+G.substr(ne+1)})(P,D,v[W],w[W],p,F);U===null&&L===null?_=W+1:(L===null||0<p(L,U))&&(L=U)}E(L!==null?function(){x.continue(L+S)}:O)}return!1}),M}function gt(e,t,o,s){return{type:2,lower:e,upper:t,lowerOpen:o,upperOpen:s}}function oi(e){return{type:1,lower:e,upper:e}}Object.defineProperty(Be.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Be.prototype.between=function(e,t,o,s){o=o!==!1,s=s===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(o||s)&&(!o||!s)?Ut(this):new this.Collection(this,function(){return gt(e,t,!o,!s)})}catch{return He(this,ut)}},Be.prototype.equals=function(e){return e==null?He(this,ut):new this.Collection(this,function(){return oi(e)})},Be.prototype.above=function(e){return e==null?He(this,ut):new this.Collection(this,function(){return gt(e,void 0,!0)})},Be.prototype.aboveOrEqual=function(e){return e==null?He(this,ut):new this.Collection(this,function(){return gt(e,void 0,!1)})},Be.prototype.below=function(e){return e==null?He(this,ut):new this.Collection(this,function(){return gt(void 0,e,!1,!0)})},Be.prototype.belowOrEqual=function(e){return e==null?He(this,ut):new this.Collection(this,function(){return gt(void 0,e)})},Be.prototype.startsWith=function(e){return typeof e!="string"?He(this,Ho):this.between(e,e+Ft,!0,!0)},Be.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Gn(this,function(t,o){return t.indexOf(o[0])===0},[e],Ft)},Be.prototype.equalsIgnoreCase=function(e){return Gn(this,function(t,o){return t===o[0]},[e],"")},Be.prototype.anyOfIgnoreCase=function(){var e=De.apply(Pe,arguments);return e.length===0?Ut(this):Gn(this,function(t,o){return o.indexOf(t)!==-1},e,"")},Be.prototype.startsWithAnyOfIgnoreCase=function(){var e=De.apply(Pe,arguments);return e.length===0?Ut(this):Gn(this,function(t,o){return o.some(function(s){return t.indexOf(s)===0})},e,Ft)},Be.prototype.anyOf=function(){var e,t,o=this,s=De.apply(Pe,arguments),c=this._cmp;try{s.sort(c)}catch{return He(this,ut)}return s.length===0?Ut(this):((e=new this.Collection(this,function(){return gt(s[0],s[s.length-1])}))._ondirectionchange=function(d){c=d==="next"?o._ascending:o._descending,s.sort(c)},t=0,e._addAlgorithm(function(d,p,v){for(var w=d.key;0<c(w,s[t]);)if(++t===s.length)return p(v),!1;return c(w,s[t])===0||(p(function(){d.continue(s[t])}),!1)}),e)},Be.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Be.prototype.noneOf=function(){var e=De.apply(Pe,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return He(this,ut)}var t=e.reduce(function(o,s){return o?o.concat([[o[o.length-1][1],s]]):[[-1/0,s]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Be.prototype.inAnyRange=function(e,O){var o=this,s=this._cmp,c=this._ascending,d=this._descending,p=this._min,v=this._max;if(e.length===0)return Ut(this);if(!e.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&c(P[0],P[1])<=0}))return He(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",z.InvalidArgument);var w=!O||O.includeLowers!==!1,F=O&&O.includeUppers===!0,S,b=c;function j(P,D){return b(P[0],D[0])}try{(S=e.reduce(function(P,D){for(var L=0,W=P.length;L<W;++L){var U=P[L];if(s(D[0],U[1])<0&&0<s(D[1],U[0])){U[0]=p(U[0],D[0]),U[1]=v(U[1],D[1]);break}}return L===W&&P.push(D),P},[])).sort(j)}catch{return He(this,ut)}var M=0,_=F?function(P){return 0<c(P,S[M][1])}:function(P){return 0<=c(P,S[M][1])},x=w?function(P){return 0<d(P,S[M][0])}:function(P){return 0<=d(P,S[M][0])},E=_,O=new this.Collection(this,function(){return gt(S[0][0],S[S.length-1][1],!w,!F)});return O._ondirectionchange=function(P){b=P==="next"?(E=_,c):(E=x,d),S.sort(j)},O._addAlgorithm(function(P,D,L){for(var W,U=P.key;E(U);)if(++M===S.length)return D(L),!1;return!_(W=U)&&!x(W)||(o._cmp(U,S[M][1])===0||o._cmp(U,S[M][0])===0||D(function(){b===c?P.continue(S[M][0]):P.continue(S[M][1])}),!1)}),O},Be.prototype.startsWithAnyOf=function(){var e=De.apply(Pe,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Ut(this):this.inAnyRange(e.map(function(t){return[t,t+Ft]})):He(this,"startsWithAnyOf() only works with strings")};var ii=Be;function Be(){}function nt(e){return _e(function(t){return gn(t),e(t.target.error),!1})}function gn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var yn="storagemutated",Wr="x-storagemutated-1",yt=mn(null,yn),Ns=(rt.prototype._lock=function(){return ie(!J.global),++this._reculock,this._reculock!==1||J.global||(J.lockOwnerFor=this),this},rt.prototype._unlock=function(){if(ie(!J.global),--this._reculock==0)for(J.global||(J.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Pt(e[1],e[0])}catch{}}return this},rt.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this},rt.prototype.create=function(e){var t=this;if(this.mode){var o=this.db.idbdb,s=this.db._state.dbOpenError;if(ie(!this.idbtrans),!e&&!o)switch(s&&s.name){case"DatabaseClosedError":throw new z.DatabaseClosed(s);case"MissingAPIError":throw new z.MissingAPI(s.message,s);default:throw new z.OpenFailed(s)}if(!this.active)throw new z.TransactionInactive;ie(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=_e(function(c){gn(c),t._reject(e.error)}),e.onabort=_e(function(c){gn(c),t.active&&t._reject(new z.Abort(e.error)),t.active=!1,t.on("abort").fire(c)}),e.oncomplete=_e(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&yt.storagemutated.fire(e.mutatedParts)})}return this},rt.prototype._promise=function(e,t,o){var s,c=this;return e==="readwrite"&&this.mode!=="readwrite"?Ee(new z.ReadOnly("Transaction is readonly")):this.active?this._locked()?new H(function(d,p){c._blockedFuncs.push([function(){c._promise(e,t,o).then(d,p)},J])}):o?pt(function(){var d=new H(function(p,v){c._lock();var w=t(p,v,c);w&&w.then&&w.then(p,v)});return d.finally(function(){return c._unlock()}),d._lib=!0,d}):((s=new H(function(d,p){var v=t(d,p,c);v&&v.then&&v.then(d,p)}))._lib=!0,s):Ee(new z.TransactionInactive)},rt.prototype._root=function(){return this.parent?this.parent._root():this},rt.prototype.waitFor=function(e){var t,o=this._root(),s=H.resolve(e),c=(o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return s}):(o._waitingFor=s,o._waitingQueue=[],t=o.idbtrans.objectStore(o.storeNames[0]),(function d(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(t.get(-1/0).onsuccess=d)})()),o._waitingFor);return new H(function(d,p){s.then(function(v){return o._waitingQueue.push(_e(d.bind(null,v)))},function(v){return o._waitingQueue.push(_e(p.bind(null,v)))}).finally(function(){o._waitingFor===c&&(o._waitingFor=null)})})},rt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new z.Abort))},rt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(C(t,e))return t[e];var o=this.schema[e];if(o)return(o=new this.db.Table(e,o,this)).core=this.db.core.table(e),t[e]=o;throw new z.NotFound("Table "+e+" not part of transaction")},rt);function rt(){}function Ur(e,t,o,s,c,d,p,v){return{name:e,keyPath:t,unique:o,multi:s,auto:c,compound:d,src:(o&&!p?"&":"")+(s?"*":"")+(c?"++":"")+ai(t),type:v}}function ai(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Hr(e,t,o){return{name:e,primKey:t,indexes:o,mappedClass:null,idxByName:(s=function(c){return[c.name,c]},o.reduce(function(c,d,p){return d=s(d,p),d&&(c[d[0]]=d[1]),c},{}))};var s}var bn=function(e){try{return e.only([[]]),bn=function(){return[[]]},[[]]}catch{return bn=function(){return Ft},Ft}};function Gr(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(o){return o[t]}:function(o){return ae(o,t)}:function(o){return ae(o,e)};var t}function si(e){return[].slice.call(e)}var Rs=0;function xn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Bs(e,t,w){function s(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=_.lower,j=_.upper,M=_.lowerOpen,_=_.upperOpen;return b===void 0?j===void 0?null:t.upperBound(j,!!_):j===void 0?t.lowerBound(b,!!M):t.bound(b,j,!!M,!!_)}function c(S){var b,j=S.name;return{name:j,schema:S,mutate:function(M){var _=M.trans,x=M.type,E=M.keys,O=M.values,P=M.range;return new Promise(function(D,L){D=_e(D);var W=_.objectStore(j),U=W.keyPath==null,K=x==="put"||x==="add";if(!K&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);var Y,G=(E||O||{length:1}).length;if(E&&O&&E.length!==O.length)throw new Error("Given keys array must have same length as given values array.");if(G===0)return D({numFailures:0,failures:{},results:[],lastResult:void 0});function q(Fe){++he,gn(Fe)}var Q=[],ce=[],he=0;if(x==="deleteRange"){if(P.type===4)return D({numFailures:he,failures:ce,results:[],lastResult:void 0});P.type===3?Q.push(Y=W.clear()):Q.push(Y=W.delete(s(P)))}else{var U=K?U?[O,E]:[O,null]:[E,null],ne=U[0],se=U[1];if(K)for(var ke=0;ke<G;++ke)Q.push(Y=se&&se[ke]!==void 0?W[x](ne[ke],se[ke]):W[x](ne[ke])),Y.onerror=q;else for(ke=0;ke<G;++ke)Q.push(Y=W[x](ne[ke])),Y.onerror=q}function Ge(Fe){Fe=Fe.target.result,Q.forEach(function(Tt,ho){return Tt.error!=null&&(ce[ho]=Tt.error)}),D({numFailures:he,failures:ce,results:x==="delete"?E:Q.map(function(Tt){return Tt.result}),lastResult:Fe})}Y.onerror=function(Fe){q(Fe),Ge(Fe)},Y.onsuccess=Ge})},getMany:function(M){var _=M.trans,x=M.keys;return new Promise(function(E,O){E=_e(E);for(var P,D=_.objectStore(j),L=x.length,W=new Array(L),U=0,K=0,Y=function(Q){Q=Q.target,W[Q._pos]=Q.result,++K===U&&E(W)},G=nt(O),q=0;q<L;++q)x[q]!=null&&((P=D.get(x[q]))._pos=q,P.onsuccess=Y,P.onerror=G,++U);U===0&&E(W)})},get:function(M){var _=M.trans,x=M.key;return new Promise(function(E,O){E=_e(E);var P=_.objectStore(j).get(x);P.onsuccess=function(D){return E(D.target.result)},P.onerror=nt(O)})},query:(b=v,function(M){return new Promise(function(_,x){_=_e(_);var E,O,P,K=M.trans,D=M.values,L=M.limit,U=M.query,W=L===1/0?void 0:L,Y=U.index,U=U.range,K=K.objectStore(j),K=Y.isPrimaryKey?K:K.index(Y.name),Y=s(U);if(L===0)return _({result:[]});b?((U=D?K.getAll(Y,W):K.getAllKeys(Y,W)).onsuccess=function(G){return _({result:G.target.result})},U.onerror=nt(x)):(E=0,O=!D&&"openKeyCursor"in K?K.openKeyCursor(Y):K.openCursor(Y),P=[],O.onsuccess=function(G){var q=O.result;return!q||(P.push(D?q.value:q.primaryKey),++E===L)?_({result:P}):void q.continue()},O.onerror=nt(x))})}),openCursor:function(M){var _=M.trans,x=M.values,E=M.query,O=M.reverse,P=M.unique;return new Promise(function(D,L){D=_e(D);var K=E.index,W=E.range,U=_.objectStore(j),U=K.isPrimaryKey?U:U.index(K.name),K=O?P?"prevunique":"prev":P?"nextunique":"next",Y=!x&&"openKeyCursor"in U?U.openKeyCursor(s(W),K):U.openCursor(s(W),K);Y.onerror=nt(L),Y.onsuccess=_e(function(G){var q,Q,ce,he,ne=Y.result;ne?(ne.___id=++Rs,ne.done=!1,q=ne.continue.bind(ne),Q=(Q=ne.continuePrimaryKey)&&Q.bind(ne),ce=ne.advance.bind(ne),he=function(){throw new Error("Cursor not stopped")},ne.trans=_,ne.stop=ne.continue=ne.continuePrimaryKey=ne.advance=function(){throw new Error("Cursor not started")},ne.fail=_e(L),ne.next=function(){var se=this,ke=1;return this.start(function(){return ke--?se.continue():se.stop()}).then(function(){return se})},ne.start=function(se){function ke(){if(Y.result)try{se()}catch(Fe){ne.fail(Fe)}else ne.done=!0,ne.start=function(){throw new Error("Cursor behind last entry")},ne.stop()}var Ge=new Promise(function(Fe,Tt){Fe=_e(Fe),Y.onerror=nt(Tt),ne.fail=Tt,ne.stop=function(ho){ne.stop=ne.continue=ne.continuePrimaryKey=ne.advance=he,Fe(ho)}});return Y.onsuccess=_e(function(Fe){Y.onsuccess=ke,ke()}),ne.continue=q,ne.continuePrimaryKey=Q,ne.advance=ce,ke(),Ge},D(ne)):D(null)},L)})},count:function(M){var _=M.query,x=M.trans,E=_.index,O=_.range;return new Promise(function(P,D){var L=x.objectStore(j),L=E.isPrimaryKey?L:L.index(E.name),W=s(O),W=W?L.count(W):L.count();W.onsuccess=_e(function(U){return P(U.target.result)}),W.onerror=nt(D)})}}}d=w,p=si((w=e).objectStoreNames);var d,w={schema:{name:w.name,tables:p.map(function(S){return d.objectStore(S)}).map(function(S){var b=S.keyPath,j=S.autoIncrement,_=g(b),M={},_={name:S.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b==null,compound:_,keyPath:b,autoIncrement:j,unique:!0,extractKey:Gr(b)},indexes:si(S.indexNames).map(function(x){return S.index(x)}).map(function(P){var D=P.name,E=P.unique,O=P.multiEntry,P=P.keyPath,D={name:D,compound:g(P),keyPath:P,unique:E,multiEntry:O,extractKey:Gr(P)};return M[xn(P)]=D}),getIndexByKeyPath:function(x){return M[xn(x)]}};return M[":id"]=_.primaryKey,b!=null&&(M[xn(b)]=_.primaryKey),_})},hasGetAll:0<p.length&&"getAll"in d.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},p=w.schema,v=w.hasGetAll,w=p.tables.map(c),F={};return w.forEach(function(S){return F[S.name]=S}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(S){if(F[S])return F[S];throw new Error("Table '".concat(S,"' not found"))},MIN_KEY:-1/0,MAX_KEY:bn(t),schema:p}}function Ls(e,t,o,s){return o=o.IDBKeyRange,t=Bs(t,o,s),{dbcore:e.dbcore.reduce(function(c,d){return d=d.create,i(i({},c),d(c))},t)}}function Yn(e,t){var o=t.db,o=Ls(e._middlewares,o,e._deps,t);e.core=o.dbcore,e.tables.forEach(function(s){var c=s.name;e.core.schema.tables.some(function(d){return d.name===c})&&(s.core=e.core.table(c),e[c]instanceof e.Table)&&(e[c].core=s.core)})}function Qn(e,t,o,s){o.forEach(function(c){var d=s[c];t.forEach(function(p){var v=(function w(F,S){return R(F,S)||(F=y(F))&&w(F,S)})(p,c);(!v||"value"in v&&v.value===void 0)&&(p===e.Transaction.prototype||p instanceof e.Transaction?N(p,c,{get:function(){return this.table(c)},set:function(w){A(this,c,{value:w,writable:!0,configurable:!0,enumerable:!0})}}):p[c]=new e.Table(c,d))})})}function Yr(e,t){t.forEach(function(o){for(var s in o)o[s]instanceof e.Table&&delete o[s]})}function Ks(e,t){return e._cfg.version-t._cfg.version}function $s(e,t,o,s){var c=e._dbSchema,d=(o.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Hr("$meta",ui("")[0],[]),e._storeNames.push("$meta")),e._createTransaction("readwrite",e._storeNames,c)),p=(d.create(o),d._completion.catch(s),d._reject.bind(d)),v=J.transless||J;pt(function(){if(J.trans=d,J.transless=v,t!==0)return Yn(e,o),F=t,((w=d).storeNames.includes("$meta")?w.table("$meta").get("version").then(function(S){return S??F}):H.resolve(F)).then(function(E){var b=e,j=E,M=d,_=o,x=[],E=b._versions,O=b._dbSchema=Zn(0,b.idbdb,_);return(E=E.filter(function(P){return P._cfg.version>=j})).length===0?H.resolve():(E.forEach(function(P){x.push(function(){var D,L,W,U=O,K=P._cfg.dbschema,Y=(Jn(b,U,_),Jn(b,K,_),O=b._dbSchema=K,Qr(U,K)),G=(Y.add.forEach(function(q){Xr(_,q[0],q[1].primKey,q[1].indexes)}),Y.change.forEach(function(q){if(q.recreate)throw new z.Upgrade("Not yet support for changing primary key");var Q=_.objectStore(q.name);q.add.forEach(function(ce){return Xn(Q,ce)}),q.change.forEach(function(ce){Q.deleteIndex(ce.name),Xn(Q,ce)}),q.del.forEach(function(ce){return Q.deleteIndex(ce)})}),P._cfg.contentUpgrade);if(G&&P._cfg.version>j)return Yn(b,_),M._memoizedTables={},D=de(K),Y.del.forEach(function(q){D[q]=U[q]}),Yr(b,[b.Transaction.prototype]),Qn(b,[b.Transaction.prototype],f(D),D),M.schema=D,(L=Te(G))&&qt(),K=H.follow(function(){var q;(W=G(M))&&L&&(q=mt.bind(null,null),W.then(q,q))}),W&&typeof W.then=="function"?H.resolve(W):K.then(function(){return W})}),x.push(function(D){var L,W,U=P._cfg.dbschema;L=U,W=D,[].slice.call(W.db.objectStoreNames).forEach(function(K){return L[K]==null&&W.db.deleteObjectStore(K)}),Yr(b,[b.Transaction.prototype]),Qn(b,[b.Transaction.prototype],b._storeNames,b._dbSchema),M.schema=b._dbSchema}),x.push(function(D){b.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(b.idbdb.version/10)===P._cfg.version?(b.idbdb.deleteObjectStore("$meta"),delete b._dbSchema.$meta,b._storeNames=b._storeNames.filter(function(L){return L!=="$meta"})):D.objectStore("$meta").put(P._cfg.version,"version"))})}),(function P(){return x.length?H.resolve(x.shift()(M.idbtrans)).then(P):H.resolve()})().then(function(){li(O,_)}))}).catch(p);var w,F;f(c).forEach(function(S){Xr(o,S,c[S].primKey,c[S].indexes)}),Yn(e,o),H.follow(function(){return e.on.populate.fire(d)}).catch(p)})}function qs(e,t){li(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var o=Zn(0,e.idbdb,t);Jn(e,e._dbSchema,t);for(var s=0,c=Qr(o,e._dbSchema).change;s<c.length;s++){var d=(p=>{if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=t.objectStore(p.name);p.add.forEach(function(w){tt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(w.src)),Xn(v,w)})})(c[s]);if(typeof d=="object")return d.value}}function Qr(e,t){var o,s={del:[],add:[],change:[]};for(o in e)t[o]||s.del.push(o);for(o in t){var c=e[o],d=t[o];if(c){var p={name:o,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||c.primKey.auto!==d.primKey.auto)p.recreate=!0,s.change.push(p);else{var v=c.idxByName,w=d.idxByName,F=void 0;for(F in v)w[F]||p.del.push(F);for(F in w){var S=v[F],b=w[F];S?S.src!==b.src&&p.change.push(b):p.add.push(b)}(0<p.del.length||0<p.add.length||0<p.change.length)&&s.change.push(p)}}else s.add.push([o,d])}return s}function Xr(e,t,o,s){var c=e.db.createObjectStore(t,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});s.forEach(function(d){return Xn(c,d)})}function li(e,t){f(e).forEach(function(o){t.db.objectStoreNames.contains(o)||(tt&&console.debug("Dexie: Creating missing table",o),Xr(t,o,e[o].primKey,e[o].indexes))})}function Xn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Zn(e,t,o){var s={};return $(t.objectStoreNames,0).forEach(function(c){for(var d=o.objectStore(c),p=Ur(ai(F=d.keyPath),F||"",!0,!1,!!d.autoIncrement,F&&typeof F!="string",!0),v=[],w=0;w<d.indexNames.length;++w){var S=d.index(d.indexNames[w]),F=S.keyPath,S=Ur(S.name,F,!!S.unique,!!S.multiEntry,!1,F&&typeof F!="string",!1);v.push(S)}s[c]=Hr(c,p,v)}),s}function Jn(e,t,o){for(var s=o.db.objectStoreNames,c=0;c<s.length;++c){var d=s[c],p=o.objectStore(d);e._hasGetAll="getAll"in p;for(var v=0;v<p.indexNames.length;++v){var w,F=p.indexNames[v],S=p.index(F).keyPath,S=typeof S=="string"?S:"["+$(S).join("+")+"]";t[d]&&(w=t[d].idxByName[S])&&(w.name=F,delete t[d].idxByName[S],t[d].idxByName[F]=w)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ui(e){return e.split(",").map(function(t,o){var c=t.split(":"),s=(s=c[1])==null?void 0:s.trim(),c=(t=c[0].trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Ur(c,d||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),g(d),o===0,s)})}Ht.prototype._createTableSchema=Hr,Ht.prototype._parseIndexSyntax=ui,Ht.prototype._parseStoresSpec=function(e,t){var o=this;f(e).forEach(function(s){if(e[s]!==null){var c=o._parseIndexSyntax(e[s]),d=c.shift();if(!d)throw new z.Schema("Invalid schema for table "+s+": "+e[s]);if(d.unique=!0,d.multi)throw new z.Schema("Primary key cannot be multiEntry*");c.forEach(function(p){if(p.auto)throw new z.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new z.Schema("Index must have a name and cannot be an empty string")}),d=o._createTableSchema(s,d,c),t[s]=d}})},Ht.prototype.stores=function(o){var t=this.db,o=(this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,o):o,t._versions),s={},c={};return o.forEach(function(d){m(s,d._cfg.storesSource),c=d._cfg.dbschema={},d._parseStoresSpec(s,c)}),t._dbSchema=c,Yr(t,[t._allTables,t,t.Transaction.prototype]),Qn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],f(c),c),t._storeNames=f(c),this},Ht.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Ir(this._cfg.contentUpgrade||re,e),this};var zs=Ht;function Ht(){}function Zr(e,t){var o=e._dbNamesDB;return o||(o=e._dbNamesDB=new ct(qn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function Jr(e){return e&&typeof e.databases=="function"}function eo(e){return pt(function(){return J.letThrough=!0,e()})}function to(e){return!("from"in e)}var Le=function(e,t){var o;if(!this)return o=new Le,e&&"d"in e&&m(o,e),o;m(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function wn(e,t,o){var s=ue(t,o);if(!isNaN(s)){if(0<s)throw RangeError();if(to(e))return m(e,{from:t,to:o,d:1});var s=e.l,c=e.r;if(ue(o,e.from)<0)return s?wn(s,t,o):e.l={from:t,to:o,d:1,l:null,r:null},di(e);if(0<ue(t,e.to))return c?wn(c,t,o):e.r={from:t,to:o,d:1,l:null,r:null},di(e);ue(t,e.from)<0&&(e.from=t,e.l=null,e.d=c?c.d+1:1),0<ue(o,e.to)&&(e.to=o,e.r=null,e.d=e.l?e.l.d+1:1),t=!e.r,s&&!e.l&&Sn(e,s),c&&t&&Sn(e,c)}}function Sn(e,t){to(t)||(function o(s,c){var d=c.from,p=c.l,v=c.r;wn(s,d,c.to),p&&o(s,p),v&&o(s,v)})(e,t)}function ci(e,t){var o=er(t),s=o.next();if(!s.done)for(var c=s.value,d=er(e),p=d.next(c.from),v=p.value;!s.done&&!p.done;){if(ue(v.from,c.to)<=0&&0<=ue(v.to,c.from))return!0;ue(c.from,v.from)<0?c=(s=o.next(v.from)).value:v=(p=d.next(c.from)).value}return!1}function er(e){var t=to(e)?null:{s:0,n:e};return{next:function(o){for(var s=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,s)for(;t.n.l&&ue(o,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!s||ue(o,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function di(e){var t,o,s,c=(((c=e.r)==null?void 0:c.d)||0)-(((c=e.l)==null?void 0:c.d)||0),c=1<c?"r":c<-1?"l":"";c&&(t=c=="r"?"l":"r",o=i({},e),s=e[c],e.from=s.from,e.to=s.to,e[c]=s[c],o[c]=s[t],(e[t]=o).d=fi(o)),e.d=fi(e)}function fi(o){var t=o.r,o=o.l;return(t?o?Math.max(t.d,o.d):t.d:o?o.d:0)+1}function tr(e,t){return f(t).forEach(function(o){e[o]?Sn(e[o],t[o]):e[o]=(function s(c){var d,p,v={};for(d in c)C(c,d)&&(p=c[d],v[d]=!p||typeof p!="object"||xe.has(p.constructor)?p:s(p));return v})(t[o])}),e}function no(e,t){return e.all||t.all||Object.keys(e).some(function(o){return t[o]&&ci(t[o],e[o])})}V(Le.prototype,((Ue={add:function(e){return Sn(this,e),this},addKey:function(e){return wn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(o){return wn(t,o,o)}),this},hasKey:function(e){var t=er(this).next(e).value;return t&&ue(t.from,e)<=0&&0<=ue(t.to,e)}})[Se]=function(){return er(this)},Ue));var Ot={},ro={},oo=!1;function nr(e){tr(ro,e),oo||(oo=!0,setTimeout(function(){oo=!1,io(ro,!(ro={}))},0))}function io(e,t){t===void 0&&(t=!1);var o=new Set;if(e.all)for(var s=0,c=Object.values(Ot);s<c.length;s++)hi(v=c[s],e,o,t);else for(var d in e){var p,v,d=/^idb\:\/\/(.*)\/(.*)\//.exec(d);d&&(p=d[1],d=d[2],v=Ot["idb://".concat(p,"/").concat(d)])&&hi(v,e,o,t)}o.forEach(function(w){return w()})}function hi(e,t,o,s){for(var c=[],d=0,p=Object.entries(e.queries.query);d<p.length;d++){for(var v=p[d],w=v[0],F=[],S=0,b=v[1];S<b.length;S++){var j=b[S];no(t,j.obsSet)?j.subscribers.forEach(function(E){return o.add(E)}):s&&F.push(j)}s&&c.push([w,F])}if(s)for(var M=0,_=c;M<_.length;M++){var x=_[M],w=x[0],F=x[1];e.queries.query[w]=F}}function Ws(e){var t=e._state,o=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Ee(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var s=t.openCanceller,c=Math.round(10*e.verno),d=!1;function p(){if(t.openCanceller!==s)throw new z.DatabaseClosed("db.open() was cancelled")}function v(){return new H(function(j,M){if(p(),!o)throw new z.MissingAPI;var _=e.name,x=t.autoSchema||!c?o.open(_):o.open(_,c);if(!x)throw new z.MissingAPI;x.onerror=nt(M),x.onblocked=_e(e._fireOnBlocked),x.onupgradeneeded=_e(function(E){var O;S=x.transaction,t.autoSchema&&!e._options.allowEmptyDB?(x.onerror=gn,S.abort(),x.result.close(),(O=o.deleteDatabase(_)).onsuccess=O.onerror=_e(function(){M(new z.NoSuchDatabase("Database ".concat(_," doesnt exist")))})):(S.onerror=nt(M),O=E.oldVersion>Math.pow(2,62)?0:E.oldVersion,b=O<1,e.idbdb=x.result,d&&qs(e,S),$s(e,O/10,S,M))},M),x.onsuccess=_e(function(){S=null;var E,O,P,D,L,W,U=e.idbdb=x.result,K=$(U.objectStoreNames);if(0<K.length)try{var Y=U.transaction((L=K).length===1?L[0]:L,"readonly");if(t.autoSchema)W=U,D=Y,(P=e).verno=W.version/10,D=P._dbSchema=Zn(0,W,D),P._storeNames=$(W.objectStoreNames,0),Qn(P,[P._allTables],f(D),D);else if(Jn(e,e._dbSchema,Y),O=Y,((O=Qr(Zn(0,(E=e).idbdb,O),E._dbSchema)).add.length||O.change.some(function(G){return G.add.length||G.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),U.close(),c=U.version+1,d=!0,j(v());Yn(e,Y)}catch{}zt.push(e),U.onversionchange=_e(function(G){t.vcFired=!0,e.on("versionchange").fire(G)}),U.onclose=_e(function(){e.close({disableAutoOpen:!1})}),b&&(K=e._deps,L=_,Jr(W=K.indexedDB)||L===qn||Zr(W,K.IDBKeyRange).put({name:L}).catch(re)),j()},M)}).catch(function(j){switch(j?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(0<c)return c=0,v()}return H.reject(j)})}var w,F=t.dbReadyResolve,S=null,b=!1;return H.race([s,(typeof navigator>"u"?H.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(j){function M(){return indexedDB.databases().finally(j)}w=setInterval(M,100),M()}).finally(function(){return clearInterval(w)}):Promise.resolve()).then(v)]).then(function(){return p(),t.onReadyBeingFired=[],H.resolve(eo(function(){return e.on.ready.fire(e.vip)})).then(function j(){var M;if(0<t.onReadyBeingFired.length)return M=t.onReadyBeingFired.reduce(Ir,re),t.onReadyBeingFired=[],H.resolve(eo(function(){return M(e.vip)})).then(j)})}).finally(function(){t.openCanceller===s&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(j){t.dbOpenError=j;try{S&&S.abort()}catch{}return s===t.openCanceller&&e._close(),Ee(j)}).finally(function(){t.openComplete=!0,F()}).then(function(){var j;return b&&(j={},e.tables.forEach(function(M){M.schema.indexes.forEach(function(_){_.name&&(j["idb://".concat(e.name,"/").concat(M.name,"/").concat(_.name)]=new Le(-1/0,[[[]]]))}),j["idb://".concat(e.name,"/").concat(M.name,"/")]=j["idb://".concat(e.name,"/").concat(M.name,"/:dels")]=new Le(-1/0,[[[]]])}),yt(yn).fire(j),io(j,!0)),e})}function ao(e){function t(d){return e.next(d)}var o=c(t),s=c(function(d){return e.throw(d)});function c(d){return function(v){var v=d(v),w=v.value;return v.done?w:w&&typeof w.then=="function"?w.then(o,s):g(w)?Promise.all(w).then(o,s):o(w)}}return c(t)()}function rr(e,t,o){for(var s=g(e)?e.slice():[e],c=0;c<o;++c)s.push(t);return s}var Us={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return i(i({},e),{table:function(s){var o=e.table(s),s=o.schema,c={},d=[];function p(j,M,_){var P=xn(j),x=c[P]=c[P]||[],E=j==null?0:typeof j=="string"?1:j.length,O=0<M,P=i(i({},_),{name:O?"".concat(P,"(virtual-from:").concat(_.name,")"):_.name,lowLevelIndex:_,isVirtual:O,keyTail:M,keyLength:E,extractKey:Gr(j),unique:!O&&_.unique});return x.push(P),P.isPrimaryKey||d.push(P),1<E&&p(E===2?j[0]:j.slice(0,E-1),M+1,_),x.sort(function(D,L){return D.keyTail-L.keyTail}),P}var v=p(s.primaryKey.keyPath,0,s.primaryKey);c[":id"]=[v];for(var w=0,F=s.indexes;w<F.length;w++){var S=F[w];p(S.keyPath,0,S)}function b(j){var M,_=j.query.index;return _.isVirtual?i(i({},j),{query:{index:_.lowLevelIndex,range:(M=j.query.range,_=_.keyTail,{type:M.type===1?2:M.type,lower:rr(M.lower,M.lowerOpen?e.MAX_KEY:e.MIN_KEY,_),lowerOpen:!0,upper:rr(M.upper,M.upperOpen?e.MIN_KEY:e.MAX_KEY,_),upperOpen:!0})}}):j}return i(i({},o),{schema:i(i({},s),{primaryKey:v,indexes:d,getIndexByKeyPath:function(j){return(j=c[xn(j)])&&j[0]}}),count:function(j){return o.count(b(j))},query:function(j){return o.query(b(j))},openCursor:function(j){var M=j.query.index,_=M.keyTail,x=M.keyLength;return M.isVirtual?o.openCursor(b(j)).then(function(O){return O&&E(O)}):o.openCursor(j);function E(O){return Object.create(O,{continue:{value:function(P){P!=null?O.continue(rr(P,j.reverse?e.MAX_KEY:e.MIN_KEY,_)):j.unique?O.continue(O.key.slice(0,x).concat(j.reverse?e.MIN_KEY:e.MAX_KEY,_)):O.continue()}},continuePrimaryKey:{value:function(P,D){O.continuePrimaryKey(rr(P,e.MAX_KEY,_),D)}},primaryKey:{get:function(){return O.primaryKey}},key:{get:function(){var P=O.key;return x===1?P[0]:P.slice(0,x)}},value:{get:function(){return O.value}}})}}})}})}};function so(e,t,o,s){return o=o||{},s=s||"",f(e).forEach(function(c){var d,p,v;C(t,c)?(d=e[c],p=t[c],typeof d=="object"&&typeof p=="object"&&d&&p?(v=Ie(d))!==Ie(p)?o[s+c]=t[c]:v==="Object"?so(d,p,o,s+c+"."):d!==p&&(o[s+c]=t[c]):d!==p&&(o[s+c]=t[c])):o[s+c]=void 0}),f(t).forEach(function(c){C(e,c)||(o[s+c]=t[c])}),o}function lo(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Hs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return i(i({},e),{table:function(t){var o=e.table(t),s=o.schema.primaryKey;return i(i({},o),{mutate:function(c){var d=J.trans,p=d.table(t).hook,v=p.deleting,w=p.creating,F=p.updating;switch(c.type){case"add":if(w.fire===re)break;return d._promise("readwrite",function(){return S(c)},!0);case"put":if(w.fire===re&&F.fire===re)break;return d._promise("readwrite",function(){return S(c)},!0);case"delete":if(v.fire===re)break;return d._promise("readwrite",function(){return S(c)},!0);case"deleteRange":if(v.fire===re)break;return d._promise("readwrite",function(){return(function b(j,M,_){return o.query({trans:j,values:!1,query:{index:s,range:M},limit:_}).then(function(x){var E=x.result;return S({type:"delete",keys:E,trans:j}).then(function(O){return 0<O.numFailures?Promise.reject(O.failures[0]):E.length<_?{failures:[],numFailures:0,lastResult:void 0}:b(j,i(i({},M),{lower:E[E.length-1],lowerOpen:!0}),_)})})})(c.trans,c.range,1e4)},!0)}return o.mutate(c);function S(b){var j,M,_,x=J.trans,E=b.keys||lo(s,b);if(E)return(b=b.type==="add"||b.type==="put"?i(i({},b),{keys:E}):i({},b)).type!=="delete"&&(b.values=l([],b.values)),b.keys&&(b.keys=l([],b.keys)),j=o,_=E,((M=b).type==="add"?Promise.resolve([]):j.getMany({trans:M.trans,keys:_,cache:"immutable"})).then(function(O){var P=E.map(function(D,L){var W,U,K,Y=O[L],G={onerror:null,onsuccess:null};return b.type==="delete"?v.fire.call(G,D,Y,x):b.type==="add"||Y===void 0?(W=w.fire.call(G,D,b.values[L],x),D==null&&W!=null&&(b.keys[L]=D=W,s.outbound||Z(b.values[L],s.keyPath,D))):(W=so(Y,b.values[L]),(U=F.fire.call(G,W,D,Y,x))&&(K=b.values[L],Object.keys(U).forEach(function(q){C(K,q)?K[q]=U[q]:Z(K,q,U[q])}))),G});return o.mutate(b).then(function(D){for(var L=D.failures,W=D.results,U=D.numFailures,D=D.lastResult,K=0;K<E.length;++K){var Y=(W||E)[K],G=P[K];Y==null?G.onerror&&G.onerror(L[K]):G.onsuccess&&G.onsuccess(b.type==="put"&&O[K]?b.values[K]:Y)}return{failures:L,results:W,numFailures:U,lastResult:D}}).catch(function(D){return P.forEach(function(L){return L.onerror&&L.onerror(D)}),Promise.reject(D)})});throw new Error("Keys missing")}}})}})}};function pi(e,t,o){try{if(!t||t.keys.length<e.length)return null;for(var s=[],c=0,d=0;c<t.keys.length&&d<e.length;++c)ue(t.keys[c],e[d])===0&&(s.push(o?te(t.values[c]):t.values[c]),++d);return s.length===e.length?s:null}catch{return null}}var Gs={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var o=e.table(t);return i(i({},o),{getMany:function(s){var c;return s.cache?(c=pi(s.keys,s.trans._cache,s.cache==="clone"))?H.resolve(c):o.getMany(s).then(function(d){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?te(d):d},d}):o.getMany(s)},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),o.mutate(s)}})}}}};function mi(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function vi(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ys={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,o=new Le(e.MIN_KEY,e.MAX_KEY);return i(i({},e),{transaction:function(s,c,d){if(J.subscr&&c!=="readonly")throw new z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(J.querier));return e.transaction(s,c,d)},table:function(s){function c(E){var x,E=E.query;return[x=E.index,new Le((x=(E=E.range).lower)!=null?x:e.MIN_KEY,(x=E.upper)!=null?x:e.MAX_KEY)]}var d=e.table(s),p=d.schema,v=p.primaryKey,w=p.indexes,F=v.extractKey,S=v.outbound,b=v.autoIncrement&&w.filter(function(_){return _.compound&&_.keyPath.includes(v.keyPath)}),j=i(i({},d),{mutate:function(_){function x(Q){return Q="idb://".concat(t,"/").concat(s,"/").concat(Q),L[Q]||(L[Q]=new Le)}var E,O,P,D=_.trans,L=_.mutatedParts||(_.mutatedParts={}),W=x(""),U=x(":dels"),K=_.type,G=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[lo(v,_).filter(function(Q){return Q}),_.values]:[],Y=G[0],G=G[1],q=_.trans._cache;return g(Y)?(W.addKeys(Y),(K=K==="delete"||Y.length===G.length?pi(Y,q):null)||U.addKeys(Y),(K||G)&&(E=x,O=K,P=G,p.indexes.forEach(function(Q){var ce=E(Q.name||"");function he(se){return se!=null?Q.extractKey(se):null}function ne(se){Q.multiEntry&&g(se)?se.forEach(function(ke){return ce.addKey(ke)}):ce.addKey(se)}(O||P).forEach(function(se,Fe){var Ge=O&&he(O[Fe]),Fe=P&&he(P[Fe]);ue(Ge,Fe)!==0&&(Ge!=null&&ne(Ge),Fe!=null)&&ne(Fe)})}))):Y?(G={from:(q=Y.lower)!=null?q:e.MIN_KEY,to:(K=Y.upper)!=null?K:e.MAX_KEY},U.add(G),W.add(G)):(W.add(o),U.add(o),p.indexes.forEach(function(Q){return x(Q.name).add(o)})),d.mutate(_).then(function(Q){return!Y||_.type!=="add"&&_.type!=="put"||(W.addKeys(Q.results),b&&b.forEach(function(ce){for(var he=_.values.map(function(Ge){return ce.extractKey(Ge)}),ne=ce.keyPath.findIndex(function(Ge){return Ge===v.keyPath}),se=0,ke=Q.results.length;se<ke;++se)he[se][ne]=Q.results[se];x(ce.name).addKeys(he)})),D.mutatedParts=tr(D.mutatedParts||{},L),Q})}}),M={get:function(_){return[v,new Le(_.key)]},getMany:function(_){return[v,new Le().addKeys(_.keys)]},count:c,query:c,openCursor:c};return f(M).forEach(function(_){j[_]=function(x){var E=J.subscr,O=!!E,P=mi(J,d)&&vi(_,x)?x.obsSet={}:E;if(O){var D,E=function(G){return G="idb://".concat(t,"/").concat(s,"/").concat(G),P[G]||(P[G]=new Le)},L=E(""),W=E(":dels"),O=M[_](x),U=O[0],O=O[1];if((_==="query"&&U.isPrimaryKey&&!x.values?W:E(U.name||"")).add(O),!U.isPrimaryKey){if(_!=="count")return D=_==="query"&&S&&x.values&&d.query(i(i({},x),{values:!1})),d[_].apply(this,arguments).then(function(G){if(_==="query"){if(S&&x.values)return D.then(function(he){return he=he.result,L.addKeys(he),G});var q=x.values?G.result.map(F):G.result;(x.values?L:W).addKeys(q)}else{var Q,ce;if(_==="openCursor")return ce=x.values,(Q=G)&&Object.create(Q,{key:{get:function(){return W.addKey(Q.primaryKey),Q.key}},primaryKey:{get:function(){var he=Q.primaryKey;return W.addKey(he),he}},value:{get:function(){return ce&&L.addKey(Q.primaryKey),Q.value}}})}return G});W.add(o)}}return d[_].apply(this,arguments)}}),j}})}};function gi(e,t,o){var s;return o.numFailures===0?t:t.type==="deleteRange"||(s=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1,o.numFailures===s)?null:(s=i({},t),g(s.keys)&&(s.keys=s.keys.filter(function(c,d){return!(d in o.failures)})),"values"in s&&g(s.values)&&(s.values=s.values.filter(function(c,d){return!(d in o.failures)})),s)}function uo(e,t){return o=e,((s=t).lower===void 0||(s.lowerOpen?0<ue(o,s.lower):0<=ue(o,s.lower)))&&(o=e,(s=t).upper===void 0||(s.upperOpen?ue(o,s.upper)<0:ue(o,s.upper)<=0));var o,s}function yi(e,t,o,s,c,d){var p,v,w,F,S,b;return!o||o.length===0||(p=t.query.index,v=p.multiEntry,w=t.query.range,F=s.schema.primaryKey.extractKey,S=p.extractKey,b=(p.lowLevelIndex||p).extractKey,(s=o.reduce(function(j,M){var _=j,x=[];if(M.type==="add"||M.type==="put")for(var E=new Le,O=M.values.length-1;0<=O;--O){var P,D=M.values[O],L=F(D);!E.hasKey(L)&&(P=S(D),v&&g(P)?P.some(function(G){return uo(G,w)}):uo(P,w))&&(E.addKey(L),x.push(D))}switch(M.type){case"add":var W=new Le().addKeys(t.values?j.map(function(q){return F(q)}):j),_=j.concat(t.values?x.filter(function(q){return q=F(q),!W.hasKey(q)&&(W.addKey(q),!0)}):x.map(function(q){return F(q)}).filter(function(q){return!W.hasKey(q)&&(W.addKey(q),!0)}));break;case"put":var U=new Le().addKeys(M.values.map(function(q){return F(q)}));_=j.filter(function(q){return!U.hasKey(t.values?F(q):q)}).concat(t.values?x:x.map(function(q){return F(q)}));break;case"delete":var K=new Le().addKeys(M.keys);_=j.filter(function(q){return!K.hasKey(t.values?F(q):q)});break;case"deleteRange":var Y=M.range;_=j.filter(function(q){return!uo(F(q),Y)})}return _},e))===e)?e:(s.sort(function(j,M){return ue(b(j),b(M))||ue(F(j),F(M))}),t.limit&&t.limit<1/0&&(s.length>t.limit?s.length=t.limit:e.length===t.limit&&s.length<t.limit&&(c.dirty=!0)),d?Object.freeze(s):s)}function bi(e,t){return ue(e.lower,t.lower)===0&&ue(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Qs(e,t){return((o,s,c,d)=>{if(o===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;if((o=ue(o,s))===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return o})(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=((o,s,c,d)=>{if(o===void 0)return s!==void 0?1:0;if(s===void 0)return-1;if((o=ue(o,s))===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return o})(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Xs(e,t,o,s){e.subscribers.add(o),s.addEventListener("abort",function(){var c,d;e.subscribers.delete(o),e.subscribers.size===0&&(c=e,d=t,setTimeout(function(){c.subscribers.size===0&&je(d,c)},3e3))})}var Zs={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return i(i({},e),{transaction:function(o,s,c){var d,p,v=e.transaction(o,s,c);return s==="readwrite"&&(c=(d=new AbortController).signal,v.addEventListener("abort",(p=function(w){return function(){if(d.abort(),s==="readwrite"){for(var F=new Set,S=0,b=o;S<b.length;S++){var j=b[S],M=Ot["idb://".concat(t,"/").concat(j)];if(M){var _=e.table(j),x=M.optimisticOps.filter(function(Q){return Q.trans===v});if(v._explicit&&w&&v.mutatedParts)for(var E=0,O=Object.values(M.queries.query);E<O.length;E++)for(var P=0,D=(U=O[E]).slice();P<D.length;P++)no((K=D[P]).obsSet,v.mutatedParts)&&(je(U,K),K.subscribers.forEach(function(Q){return F.add(Q)}));else if(0<x.length){M.optimisticOps=M.optimisticOps.filter(function(Q){return Q.trans!==v});for(var L=0,W=Object.values(M.queries.query);L<W.length;L++)for(var U,K,Y,G=0,q=(U=W[L]).slice();G<q.length;G++)(K=q[G]).res!=null&&v.mutatedParts&&(w&&!K.dirty?(Y=Object.isFrozen(K.res),Y=yi(K.res,K.req,x,_,K,Y),K.dirty?(je(U,K),K.subscribers.forEach(function(Q){return F.add(Q)})):Y!==K.res&&(K.res=Y,K.promise=H.resolve({result:Y}))):(K.dirty&&je(U,K),K.subscribers.forEach(function(Q){return F.add(Q)})))}}}F.forEach(function(Q){return Q()})}}})(!1),{signal:c}),v.addEventListener("error",p(!1),{signal:c}),v.addEventListener("complete",p(!0),{signal:c})),v},table:function(o){var s=e.table(o),c=s.schema.primaryKey;return i(i({},s),{mutate:function(d){var p,v=J.trans;return!c.outbound&&v.db._options.cache!=="disabled"&&!v.explicit&&v.idbtrans.mode==="readwrite"&&(p=Ot["idb://".concat(t,"/").concat(o)])?(v=s.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||lo(c,d).some(function(w){return w==null}))?(p.optimisticOps.push(d),d.mutatedParts&&nr(d.mutatedParts),v.then(function(w){0<w.numFailures&&(je(p.optimisticOps,d),(w=gi(0,d,w))&&p.optimisticOps.push(w),d.mutatedParts)&&nr(d.mutatedParts)}),v.catch(function(){je(p.optimisticOps,d),d.mutatedParts&&nr(d.mutatedParts)})):v.then(function(w){var F=gi(0,i(i({},d),{values:d.values.map(function(S,b){var j;return w.failures[b]?S:(Z(j=(j=c.keyPath)!=null&&j.includes(".")?te(S):i({},S),c.keyPath,w.results[b]),j)})}),w);p.optimisticOps.push(F),queueMicrotask(function(){return d.mutatedParts&&nr(d.mutatedParts)})}),v):s.mutate(d)},query:function(d){var p,v,w,F,S,b,j;return mi(J,s)&&vi("query",d)?(p=((w=J.trans)==null?void 0:w.db._options.cache)==="immutable",v=(w=J).requery,w=w.signal,b=((M,_,x,E)=>{var O=Ot["idb://".concat(M,"/").concat(_)];if(!O)return[];if(!(M=O.queries[x]))return[null,!1,O,null];var P=M[(E.query?E.query.index.name:null)||""];if(!P)return[null,!1,O,null];switch(x){case"query":var D=P.find(function(L){return L.req.limit===E.limit&&L.req.values===E.values&&bi(L.req.query.range,E.query.range)});return D?[D,!0,O,P]:[P.find(function(L){return("limit"in L.req?L.req.limit:1/0)>=E.limit&&(!E.values||L.req.values)&&Qs(L.req.query.range,E.query.range)}),!1,O,P];case"count":return D=P.find(function(L){return bi(L.req.query.range,E.query.range)}),[D,!!D,O,P]}})(t,o,"query",d),j=b[0],F=b[2],S=b[3],j&&b[1]?j.obsSet=d.obsSet:(b=s.query(d).then(function(M){var _=M.result;if(j&&(j.res=_),p){for(var x=0,E=_.length;x<E;++x)Object.freeze(_[x]);Object.freeze(_)}else M.result=te(_);return M}).catch(function(M){return S&&j&&je(S,j),Promise.reject(M)}),j={obsSet:d.obsSet,promise:b,subscribers:new Set,type:"query",req:d,dirty:!1},S?S.push(j):(S=[j],(F=F||(Ot["idb://".concat(t,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=S)),Xs(j,S,v,w),j.promise.then(function(M){return{result:yi(M.result,d,F?.optimisticOps,s,j,p)}})):s.query(d)}})}})}};function or(e,t){return new Proxy(e,{get:function(o,s,c){return s==="db"?t:Reflect.get(o,s,c)}})}Oe.prototype.version=function(e){if(isNaN(e)||e<.1)throw new z.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,o=t.filter(function(s){return s._cfg.version===e})[0];return o||(o=new this.Version(e),t.push(o),t.sort(Ks),o.stores({}),this._state.autoSchema=!1),o},Oe.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?e():new H(function(o,s){if(t._state.openComplete)return s(new z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void s(new z.DatabaseClosed);t.open().catch(re)}t._state.dbReadyPromise.then(o,s)}).then(e)},Oe.prototype.use=function(c){var t=c.stack,o=c.create,s=c.level,c=c.name,d=(c&&this.unuse({stack:t,name:c}),this._middlewares[t]||(this._middlewares[t]=[]));return d.push({stack:t,create:o,level:s??10,name:c}),d.sort(function(p,v){return p.level-v.level}),this},Oe.prototype.unuse=function(e){var t=e.stack,o=e.name,s=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(c){return s?c.create!==s:!!o&&c.name!==o})),this},Oe.prototype.open=function(){var e=this;return Pt(ht,function(){return Ws(e)})},Oe.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=zt.indexOf(this);if(0<=t&&zt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new H(function(o){e.dbReadyResolve=o}),e.openCanceller=new H(function(o,s){e.cancelOpen=s}))},Oe.prototype.close=function(t){var t=(t===void 0?{disableAutoOpen:!0}:t).disableAutoOpen,o=this._state;t?(o.isBeingOpened&&o.cancelOpen(new z.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new z.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},Oe.prototype.delete=function(e){var t=this,o=(e===void 0&&(e={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),s=this._state;return new H(function(c,d){function p(){t.close(e);var v=t._deps.indexedDB.deleteDatabase(t.name);v.onsuccess=_e(function(){var w,F,S;w=t._deps,F=t.name,Jr(S=w.indexedDB)||F===qn||Zr(S,w.IDBKeyRange).delete(F).catch(re),c()}),v.onerror=nt(d),v.onblocked=t._fireOnBlocked}if(o)throw new z.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(p):p()})},Oe.prototype.backendDB=function(){return this.idbdb},Oe.prototype.isOpen=function(){return this.idbdb!==null},Oe.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Oe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Oe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Oe.prototype,"tables",{get:function(){var e=this;return f(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Oe.prototype.transaction=function(){var e=(function(t,o,s){var c=arguments.length;if(c<2)throw new z.InvalidArgument("Too few arguments");for(var d=new Array(c-1);--c;)d[c-1]=arguments[c];return s=d.pop(),[t,ge(d),s]}).apply(this,arguments);return this._transaction.apply(this,e)},Oe.prototype._transaction=function(e,t,o){var s,c,d=this,p=J.trans,v=(p&&p.db===this&&e.indexOf("!")===-1||(p=null),e.indexOf("?")!==-1);e=e.replace("!","").replace("?","");try{if(c=t.map(function(F){if(F=F instanceof d.Table?F.name:F,typeof F!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return F}),e=="r"||e===Kr)s=Kr;else{if(e!="rw"&&e!=$r)throw new z.InvalidArgument("Invalid transaction mode: "+e);s=$r}if(p){if(p.mode===Kr&&s===$r){if(!v)throw new z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p=null}p&&c.forEach(function(F){if(p&&p.storeNames.indexOf(F)===-1){if(!v)throw new z.SubTransaction("Table "+F+" not included in parent transaction.");p=null}}),v&&p&&!p.active&&(p=null)}}catch(F){return p?p._promise(null,function(S,b){b(F)}):Ee(F)}var w=(function F(S,b,j,M,_){return H.resolve().then(function(){var P=J.transless||J,x=S._createTransaction(b,j,S._dbSchema,M),P=(x.explicit=!0,{trans:x,transless:P});if(M)x.idbtrans=M.idbtrans;else try{x.create(),x.idbtrans._explicit=!0,S._state.PR1398_maxLoop=3}catch(D){return D.name===ve.InvalidState&&S.isOpen()&&0<--S._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),S.close({disableAutoOpen:!1}),S.open().then(function(){return F(S,b,j,null,_)})):Ee(D)}var E,O=Te(_),P=(O&&qt(),H.follow(function(){var D;(E=_.call(x,x))&&(O?(D=mt.bind(null,null),E.then(D,D)):typeof E.next=="function"&&typeof E.throw=="function"&&(E=ao(E)))},P));return(E&&typeof E.then=="function"?H.resolve(E).then(function(D){return x.active?D:Ee(new z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):P.then(function(){return E})).then(function(D){return M&&x._resolve(),x._completion.then(function(){return D})}).catch(function(D){return x._reject(D),Ee(D)})})}).bind(null,this,s,c,p,o);return p?p._promise(s,w,"lock"):J.trans?Pt(J.transless,function(){return d._whenReady(w)}):this._whenReady(w)},Oe.prototype.table=function(e){if(C(this._allTables,e))return this._allTables[e];throw new z.InvalidTable("Table ".concat(e," does not exist"))};var ct=Oe;function Oe(e,t){var o,s,c,d,p,v=this,w=(this._middlewares={},this.verno=0,Oe.dependencies),w=(this._options=t=i({addons:Oe.addons,autoOpen:!0,indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},t.addons),F=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen}),S=(F.dbReadyPromise=new H(function(b){F.dbReadyResolve=b}),F.openCanceller=new H(function(b,j){F.cancelOpen=j}),this._state=F,this.name=e,this.on=mn(this,"populate","blocked","versionchange","close",{ready:[Ir,re]}),this.once=function(b,j){var M=function(){for(var _=[],x=0;x<arguments.length;x++)_[x]=arguments[x];v.on(b).unsubscribe(M),j.apply(v,_)};return v.on(b,M)},this.on.ready.subscribe=X(this.on.ready.subscribe,function(b){return function(j,M){Oe.vip(function(){var _,x=v._state;x.openComplete?(x.dbOpenError||H.resolve().then(j),M&&b(j)):x.onReadyBeingFired?(x.onReadyBeingFired.push(j),M&&b(j)):(b(j),_=v,M||b(function E(){_.on.ready.unsubscribe(j),_.on.ready.unsubscribe(E)}))})}}),this.Collection=(o=this,vn(As.prototype,function(E,x){this.db=o;var M=Go,_=null;if(x)try{M=x()}catch(P){_=P}var x=E._ctx,E=x.table,O=E.hook.reading.fire;this._ctx={table:E,index:x.index,isPrimKey:!x.index||E.schema.primKey.keyPath&&x.index===E.schema.primKey.name,range:M,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:x.or,valueMapper:O!==We?O:null}})),this.Table=(s=this,vn(ei.prototype,function(b,j,M){this.db=s,this._tx=M,this.name=b,this.schema=j,this.hook=s._allTables[b]?s._allTables[b].hook:mn(null,{creating:[ln,re],reading:[lt,We],updating:[Cs,re],deleting:[un,re]})})),this.Transaction=(c=this,vn(Ns.prototype,function(b,j,M,_,x){var E=this;b!=="readonly"&&j.forEach(function(O){O=(O=M[O])==null?void 0:O.yProps,O&&(j=j.concat(O.map(function(P){return P.updatesTable})))}),this.db=c,this.mode=b,this.storeNames=j,this.schema=M,this.chromeTransactionDurability=_,this.idbtrans=null,this.on=mn(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new H(function(O,P){E._resolve=O,E._reject=P}),this._completion.then(function(){E.active=!1,E.on.complete.fire()},function(O){var P=E.active;return E.active=!1,E.on.error.fire(O),E.parent?E.parent._reject(O):P&&E.idbtrans&&E.idbtrans.abort(),Ee(O)})})),this.Version=(d=this,vn(zs.prototype,function(b){this.db=d,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(p=this,vn(ii.prototype,function(b,j,M){if(this.db=p,this._ctx={table:b,index:j===":id"?null:j,or:M},this._cmp=this._ascending=ue,this._descending=function(_,x){return ue(x,_)},this._max=function(_,x){return 0<ue(_,x)?_:x},this._min=function(_,x){return ue(_,x)<0?_:x},this._IDBKeyRange=p._deps.IDBKeyRange,!this._IDBKeyRange)throw new z.MissingAPI})),this.on("versionchange",function(b){0<b.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=bn(t.IDBKeyRange),this._createTransaction=function(b,j,M,_){return new v.Transaction(b,j,M,v._options.chromeTransactionDurability,_)},this._fireOnBlocked=function(b){v.on("blocked").fire(b),zt.filter(function(j){return j.name===v.name&&j!==v&&!j._state.vcFired}).map(function(j){return j.on("versionchange").fire(b)})},this.use(Gs),this.use(Zs),this.use(Ys),this.use(Us),this.use(Hs),new Proxy(this,{get:function(b,j,M){var _;return j==="_vip"||(j==="table"?function(x){return or(v.table(x),S)}:(_=Reflect.get(b,j,M))instanceof ei?or(_,S):j==="tables"?_.map(function(x){return or(x,S)}):j==="_createTransaction"?function(){return or(_.apply(this,arguments),S)}:_)}}));this.vip=S,w.forEach(function(b){return b(v)})}var ir,Gt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Js=(co.prototype.subscribe=function(e,t,o){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:o})},co.prototype[Gt]=function(){return this},co);function co(e){this._subscribe=e}try{ir={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{ir={indexedDB:null,IDBKeyRange:null}}function xi(e){var t,o=!1,s=new Js(function(c){var d=Te(e),p,v=!1,w={},F={},S={get closed(){return v},unsubscribe:function(){v||(v=!0,p&&p.abort(),b&&yt.storagemutated.unsubscribe(M))}},b=(c.start&&c.start(S),!1),j=function(){return Lr(_)},M=function(x){tr(w,x),no(F,w)&&j()},_=function(){var x,E,O;!v&&ir.indexedDB&&(w={},x={},p&&p.abort(),p=new AbortController,O=(P=>{var D=Kt();try{d&&qt();var L=pt(e,P);return L=d?L.finally(mt):L}finally{D&&$t()}})(E={subscr:x,signal:p.signal,requery:j,querier:e,trans:null}),Promise.resolve(O).then(function(P){o=!0,t=P,v||E.signal.aborted||(w={},(D=>{for(var L in D)if(C(D,L))return;return 1})(F=x)||b||(yt(yn,M),b=!0),Lr(function(){return!v&&c.next&&c.next(P)}))},function(P){o=!1,["DatabaseClosedError","AbortError"].includes(P?.name)||v||Lr(function(){v||c.error&&c.error(P)})}))};return setTimeout(j,0),S});return s.hasValue=function(){return o},s.getValue=function(){return t},s}var It=ct;function fo(e){var t=bt;try{bt=!0,yt.storagemutated.fire(e),io(e,!0)}finally{bt=t}}V(It,i(i({},Ve),{delete:function(e){return new It(e,{addons:[]}).delete()},exists:function(e){return new It(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=It.dependencies,o=t.indexedDB,t=t.IDBKeyRange,(Jr(o)?Promise.resolve(o.databases()).then(function(s){return s.map(function(c){return c.name}).filter(function(c){return c!==qn})}):Zr(o,t).toCollection().primaryKeys()).then(e)}catch{return Ee(new z.MissingAPI)}var t,o},defineClass:function(){return function(e){m(this,e)}},ignoreTransaction:function(e){return J.trans?Pt(J.transless,e):e()},vip:eo,async:function(e){return function(){try{var t=ao(e.apply(this,arguments));return t&&typeof t.then=="function"?t:H.resolve(t)}catch(o){return Ee(o)}}},spawn:function(e,t,o){try{var s=ao(e.apply(o,t||[]));return s&&typeof s.then=="function"?s:H.resolve(s)}catch(c){return Ee(c)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(e,t){return e=H.resolve(typeof e=="function"?It.ignoreTransaction(e):e).timeout(t||6e4),J.trans?J.trans.waitFor(e):e},Promise:H,debug:{get:function(){return tt},set:function(e){Ko(e)}},derive:I,extend:m,props:V,override:X,Events:mn,on:yt,liveQuery:xi,extendObservabilitySet:tr,getByKeyPath:ae,setByKeyPath:Z,delByKeyPath:function(e,t){typeof t=="string"?Z(e,t,void 0):"length"in t&&[].map.call(t,function(o){Z(e,o,void 0)})},shallowClone:de,deepClone:te,getObjectDiff:so,cmp:ue,asap:oe,minKey:-1/0,addons:[],connections:zt,errnames:ve,dependencies:ir,cache:Ot,semVer:"4.3.0",version:"4.3.0".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,o){return e+t/Math.pow(10,2*o)})})),It.maxKey=bn(It.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(yt(yn,function(e){bt||(e=new CustomEvent(Wr,{detail:e}),bt=!0,dispatchEvent(e),bt=!1)}),addEventListener(Wr,function(e){e=e.detail,bt||fo(e)}));var Yt,bt=!1,wi=function(){};return typeof BroadcastChannel<"u"&&((wi=function(){(Yt=new BroadcastChannel(Wr)).onmessage=function(e){return e.data&&fo(e.data)}})(),typeof Yt.unref=="function"&&Yt.unref(),yt(yn,function(e){bt||Yt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!ct.disableBfCache&&e.persisted){tt&&console.debug("Dexie: handling persisted pagehide"),Yt?.close();for(var t=0,o=zt;t<o.length;t++)o[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!ct.disableBfCache&&e.persisted&&(tt&&console.debug("Dexie: handling persisted pageshow"),wi(),fo({all:new Le(-1/0,[[]])}))})),H.rejectionMapper=function(e,t){return!e||e instanceof Ke||e instanceof TypeError||e instanceof SyntaxError||!e.name||!be[e.name]?e:(t=new be[e.name](t||e.message,e),"stack"in e&&N(t,"stack",{get:function(){return this.inner.stack}}),t)},Ko(tt),i(ct,Object.freeze({__proto__:null,Dexie:ct,Entity:Yo,PropModification:pn,RangeSet:Le,add:function(e){return new pn({add:e})},cmp:ue,default:ct,liveQuery:xi,mergeRanges:Sn,rangesOverlap:ci,remove:function(e){return new pn({remove:e})},replacePrefix:function(e,t){return new pn({replacePrefix:[e,t]})}}),{default:ct}),ct})})(vr)),vr.exports}var zc=qc();const Eo=pl(zc),Li=Symbol.for("Dexie"),rn=globalThis[Li]||(globalThis[Li]=Eo);if(Eo.semVer!==rn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Eo.semVer} and ${rn.semVer}`);const{liveQuery:kd,mergeRanges:Md,rangesOverlap:Cd,RangeSet:Pd,cmp:Fd,Entity:Ed,PropModification:Od,replacePrefix:Id,add:Td,remove:Ad,DexieYProvider:Dd}=rn;function Wc(n,a,r){var i,l;typeof n=="function"?(i=a||[],l=r):(i=[],l=a);var u=xt.useRef({hasResult:!1,result:l,error:null}),f=xt.useReducer(function(y){return y+1},0);f[0];var g=f[1],m=xt.useMemo(function(){var y=typeof n=="function"?n():n;if(!y||typeof y.subscribe!="function")throw n===y?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!u.current.hasResult&&typeof window<"u"&&(typeof y.hasValue!="function"||y.hasValue()))if(typeof y.getValue=="function")u.current.result=y.getValue(),u.current.hasResult=!0;else{var k=y.subscribe(function(C){u.current.result=C,u.current.hasResult=!0});typeof k=="function"?k():k.unsubscribe()}return y},i);if(xt.useDebugValue(u.current.result),xt.useEffect(function(){var y=m.subscribe(function(k){var C=u.current;(C.error!==null||C.result!==k)&&(C.error=null,C.result=k,C.hasResult=!0,g())},function(k){var C=u.current;C.error!==k&&(C.error=k,g())});return typeof y=="function"?y:y.unsubscribe.bind(y)},i),u.current.error)throw u.current.error;return u.current.result}function Uc(n,a,r){return Wc(function(){return rn.liveQuery(n)},a||[],r)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var a=rn.DexieYProvider;a&&a.release(n)});const Mn=new rn("3d-print-calculator");Mn.version(1).stores({settings:"++id, name, sessionName, values",projects:"++id, name, settings"});function Hc({sessionKey:n,onValueLoaded:a}){const[r,i]=T.useState(""),[l,u]=T.useState(""),[f,g]=T.useState(!1),m=Uc(()=>Mn.settings.where("sessionName").equals(n).toArray(),[n]),y=m?.map(I=>({label:I.name,value:I.id.toString()}))||[];return{selectedPreset:r,setSelectedPreset:i,presetName:l,setPresetName:u,openDialog:f,setOpenDialog:g,presetOptions:y,handlePresetChange:I=>{if(i(I),I==="new"){u(""),g(!0);return}const R=m?.find(B=>B.id.toString()===I);R&&a(R.values)},handleCloseDialog:()=>{g(!1),i(""),u("")},handleSaveExistingPreset:I=>{const R=m?.find(B=>B.id.toString()===r);R&&Mn.settings.update(R.id,{values:I})},handleCreatePreset:I=>{l&&(Mn.settings.add({name:l,sessionName:n,values:I}),i(""),u(""),g(!1))},handleDeletePreset:()=>{if(!r||r==="new")return;const I=m?.find(R=>R.id.toString()===r);I&&(Mn.settings.delete(I.id),i(""))}}}function Gc({...n}){return h.jsx(lu,{"data-slot":"select",...n})}function Yc({...n}){return h.jsx(mu,{"data-slot":"select-group",...n})}function Qc({...n}){return h.jsx(cu,{"data-slot":"select-value",...n})}function Xc({className:n,size:a="default",children:r,...i}){return h.jsxs(uu,{"data-slot":"select-trigger","data-size":a,className:pe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...i,children:[r,h.jsx(du,{asChild:!0,children:h.jsx(ea,{className:"size-4 opacity-50"})})]})}function Zc({className:n,children:a,position:r="item-aligned",align:i="center",...l}){return h.jsx(fu,{children:h.jsxs(hu,{"data-slot":"select-content",className:pe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:r,align:i,...l,children:[h.jsx(td,{}),h.jsx(pu,{className:pe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),h.jsx(nd,{})]})})}function Jc({className:n,...a}){return h.jsx(vu,{"data-slot":"select-label",className:pe("text-muted-foreground px-2 py-1.5 text-xs",n),...a})}function ed({className:n,children:a,...r}){return h.jsxs(gu,{"data-slot":"select-item",className:pe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...r,children:[h.jsx("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:h.jsx(bu,{children:h.jsx(gl,{className:"size-4"})})}),h.jsx(yu,{children:a})]})}function td({className:n,...a}){return h.jsx(xu,{"data-slot":"select-scroll-up-button",className:pe("flex cursor-default items-center justify-center py-1",n),...a,children:h.jsx(yl,{className:"size-4"})})}function nd({className:n,...a}){return h.jsx(wu,{"data-slot":"select-scroll-down-button",className:pe("flex cursor-default items-center justify-center py-1",n),...a,children:h.jsx(ea,{className:"size-4"})})}function js({options:n,selectedPreset:a,onPresetChange:r,onSavePreset:i,onDeletePreset:l}){const u=[{label:"Novo",value:"new"},...n],f=a==="new",g=a!=="";return h.jsxs("div",{className:"flex flex-row gap-2 w-full",children:[h.jsx(nn,{variant:"ghost",size:"icon",disabled:!g,onClick:i,title:"Salvar configuraÃ§Ã£o",children:h.jsx(Lc,{})}),h.jsx(nn,{variant:"ghost",size:"icon",disabled:f||!g,onClick:l,title:"Deletar configuraÃ§Ã£o",children:h.jsx(Kc,{})}),h.jsxs(Gc,{onValueChange:r,value:a,children:[h.jsx(Xc,{className:"w-full",children:h.jsx(Qc,{placeholder:"Selecione uma configuraÃ§Ã£o"})}),h.jsx(Zc,{children:h.jsxs(Yc,{children:[h.jsx(Jc,{children:"ConfiguraÃ§Ãµes salvas"}),u.map(m=>h.jsx(ed,{value:m.value,children:m.label},m.value))]})})]})]})}js.displayName="PresetSelector";function rd(n){return Qe({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 0C229.232 0 0 229.232 0 512c0 282.784 229.232 512 512 512 282.784 0 512-229.216 512-512C1024 229.232 794.784 0 512 0zm0 961.008c-247.024 0-448-201.984-448-449.01 0-247.024 200.976-448 448-448s448 200.977 448 448-200.976 449.01-448 449.01zm181.008-630.016c-12.496-12.496-32.752-12.496-45.248 0L512 466.752l-135.76-135.76c-12.496-12.496-32.752-12.496-45.264 0-12.496 12.496-12.496 32.752 0 45.248L466.736 512l-135.76 135.76c-12.496 12.48-12.496 32.769 0 45.249 12.496 12.496 32.752 12.496 45.264 0L512 557.249l135.76 135.76c12.496 12.496 32.752 12.496 45.248 0 12.496-12.48 12.496-32.769 0-45.249L557.248 512l135.76-135.76c12.512-12.512 12.512-32.768 0-45.248z"},child:[]}]})(n)}function od(n){return Qe({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M595.344 64.72h.176-.176zm0 0l-72.207 379.377 261.584.88L428.657 959.28l72.208-417.376-261.568-.912zm.049-63.999c-1.728 0-3.455.063-5.151.19-11.296.913-18.785 4.689-27.664 10.657a64.304 64.304 0 0 0-13.392 11.936 56.688 56.688 0 0 0-3.297 4.288L187.281 502.4c-14.16 19.408-16.24 45.025-5.36 66.433 10.864 21.408 32.832 34.976 56.912 35.152l184.736 1.344-58.08 342.192c-5.52 29.408 10.16 58.72 37.76 70.528a64.19 64.19 0 0 0 25.391 5.216c20.112 0 36.64-9.408 49.041-26.4L836.737 482.56c14.16-19.409 16.225-45.057 5.36-66.433-10.864-21.408-32.832-34.977-56.912-35.152l-184.736-.32 57.456-300.88a62.46 62.46 0 0 0 1.825-15.056c0-34.624-27.569-62.848-62.065-63.968-.767-.032-1.52-.032-2.271-.032z"},child:[]}]})(n)}function id({...n}){return h.jsx(Tl,{"data-slot":"dialog",...n})}function ad({...n}){return h.jsx(Al,{"data-slot":"dialog-portal",...n})}function sd({...n}){return h.jsx(Ro,{"data-slot":"dialog-close",...n})}function ld({className:n,...a}){return h.jsx(Dl,{"data-slot":"dialog-overlay",className:pe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...a})}function ud({className:n,children:a,showCloseButton:r=!0,...i}){return h.jsxs(ad,{"data-slot":"dialog-portal",children:[h.jsx(ld,{}),h.jsxs(Vl,{"data-slot":"dialog-content",className:pe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",n),...i,children:[a,r&&h.jsxs(Ro,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[h.jsx(rd,{}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function cd({className:n,...a}){return h.jsx("div",{"data-slot":"dialog-header",className:pe("flex flex-col gap-2 text-center sm:text-left",n),...a})}function dd({className:n,showCloseButton:a=!1,children:r,...i}){return h.jsxs("div",{"data-slot":"dialog-footer",className:pe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),...i,children:[r,a&&h.jsx(Ro,{asChild:!0,children:h.jsx(nn,{variant:"outline",children:"Close"})})]})}function fd({className:n,...a}){return h.jsx(Nl,{"data-slot":"dialog-title",className:pe("text-lg leading-none font-semibold",n),...a})}function hd({className:n,...a}){return h.jsx(Rl,{"data-slot":"dialog-description",className:pe("text-muted-foreground text-sm",n),...a})}function ks({open:n,onOpenChange:a,onClose:r,presetName:i,onPresetNameChange:l,onCreatePreset:u,sessionTitle:f}){return h.jsx(id,{open:n,onOpenChange:a,children:h.jsxs(ud,{className:"sm:max-w-md",children:[h.jsxs(cd,{children:[h.jsx(fd,{children:"Nova ConfiguraÃ§Ã£o"}),h.jsxs(hd,{children:['VocÃª estÃ¡ prestes a criar uma nova configuraÃ§Ã£o para a sessÃ£o "',f,'". Por favor, insira um nome para a configuraÃ§Ã£o e clique em "Salvar".']})]}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("div",{className:"grid flex-1 gap-2",children:[h.jsx(es,{htmlFor:"preset-name",className:"sr-only",children:"Nome da ConfiguraÃ§Ã£o"}),h.jsx(Or,{id:"preset-name",placeholder:"Digite o nome da configuraÃ§Ã£o",onChange:g=>l(g.target.value),value:i})]})}),h.jsxs(dd,{className:"justify-start",children:[h.jsx(nn,{onClick:u,children:"Salvar"}),h.jsx(sd,{asChild:!0,children:h.jsx(nn,{variant:"outline",onClick:r,children:"Cancelar"})})]})]})})}ks.displayName="NewPresetDialog";function Ms({sessionKey:n,title:a,description:r,children:i,icon:l,getFieldValue:u,setValue:f}){const[g,m]=T.useState(!0),{selectedPreset:y,presetName:k,setPresetName:C,openDialog:V,presetOptions:A,handlePresetChange:N,handleCloseDialog:I,handleSaveExistingPreset:R,handleCreatePreset:B,handleDeletePreset:$}=Hc({sessionKey:n,onValueLoaded:f}),X=()=>{y==="new"||R(u())},ie=()=>{B(u())};return h.jsxs(h.Fragment,{children:[h.jsx(Dc,{open:g,onOpenChange:m,children:h.jsxs(Fc,{className:"border-0 shadow-md hover:shadow-lg transition-shadow duration-300 dark:shadow-blue-900/20 dark:hover:shadow-blue-900/40 py-0 gap-0",children:[h.jsxs(Ec,{className:"flex flex-col bg-gradient-to-r from-blue-50 to-purple-50 dark:from-slate-800/50 dark:to-blue-900/30 rounded-t-lg py-2",children:[h.jsxs("div",{className:"flex flex-row justify-between items-center w-full",children:[h.jsxs(Oc,{className:"flex items-center gap-3 text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent dark:from-blue-400 dark:to-purple-400",children:[l&&h.jsx("span",{className:"text-blue-600 dark:text-blue-400 text-2xl",children:l}),a]}),h.jsx(Tc,{className:"justify-end flex flex-row gap-2",children:h.jsx(Vc,{asChild:!0,children:h.jsx(nn,{variant:"ghost",size:"icon",className:"hover:bg-blue-100 dark:hover:bg-blue-900/40",children:g?h.jsx(Bc,{className:"text-blue-600"}):h.jsx(Rc,{className:"text-blue-600"})})})})]}),h.jsx(Ic,{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:r})]}),h.jsx(Nc,{children:h.jsx(Ac,{className:"bg-white/50 dark:bg-slate-900/50 rounded-xl",children:h.jsxs("div",{className:"flex flex-col gap-4 pt-6 pb-6",children:[h.jsx("div",{className:"flex items-center",children:h.jsx(js,{options:A,selectedPreset:y,onPresetChange:N,onSavePreset:X,onDeletePreset:$})}),i]})})})]})}),h.jsx(ks,{open:V,onOpenChange:I,onClose:I,presetName:k,onPresetNameChange:C,onCreatePreset:ie,sessionTitle:a})]})}Ms.displayName="RenderSession";function pd(n){return Qe({attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M16 14.176c-5.915 0-10.549-2.085-10.549-4.747s4.634-4.747 10.549-4.747 10.549 2.085 10.549 4.747c0 2.662-4.634 4.747-10.549 4.747zM16 5.737c-4.491 0-9.494 1.516-9.494 3.692s5.003 3.692 9.494 3.692c4.491 0 9.494-1.516 9.494-3.692s-5.004-3.692-9.494-3.692zM16 18.396c-5.915 0-10.549-2.085-10.549-4.747v-4.22c0-0.292 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.22c0 2.176 5.003 3.692 9.494 3.692s9.494-1.516 9.494-3.692v-4.22c0-0.292 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.22c0 2.662-4.634 4.747-10.549 4.747zM16 23.143c-5.915 0-10.549-2.085-10.549-4.747v-4.747c0-0.291 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.747c0 2.176 5.003 3.692 9.494 3.692s9.494-1.517 9.494-3.692v-4.747c0-0.291 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.747c0 2.662-4.634 4.747-10.549 4.747zM16 27.89c-5.915 0-10.549-2.085-10.549-4.747v-4.747c0-0.291 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.747c0 2.176 5.003 3.692 9.494 3.692s9.494-1.517 9.494-3.692v-4.747c0-0.291 0.236-0.527 0.527-0.527s0.527 0.236 0.527 0.527v4.747c0 2.662-4.634 4.747-10.549 4.747z"},child:[]}]})(n)}function md(n){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 30c-32 64-22.35 180.063 0 208 42.406 53.007 80 80 80 128 0 32-16 80-48 112v16H176v-16c-32.002-31.995-48-80-48-112 0-48 37.594-74.993 80-128 22.35-27.937 32-144 0-208 48-16 48-16 96 0z"},child:[]}]})(n)}const Ki=[{title:"DepreciaÃ§Ã£o da Impressora",key:"printerDepreciation",description:"Informe dados sobre a depreciaÃ§Ã£o da impressora.",icon:h.jsx(ml,{className:"text-3xl"}),form:bs},{title:"Filamento",key:"filament",description:"Informe dados sobre o filamento.",icon:h.jsx(pd,{className:"text-3xl"}),form:xs},{title:"Energia",key:"energy",description:"Informe dados sobre o consumo de energia.",icon:h.jsx(od,{className:"text-3xl"}),form:ws},{title:"ImpressÃ£o",key:"print",description:"Informe dados sobre a impressÃ£o.",icon:h.jsx(md,{className:"text-3xl"}),form:Ss},{title:"Lucro",key:"profit",description:"Informe dados sobre o lucro.",icon:h.jsx(vl,{className:"text-3xl"}),form:_s}],vd=sn({defaultValues:Lt,render:({form:n})=>h.jsx("form",{className:"flex flex-col gap-5 flex-1",onSubmit:a=>{a.preventDefault()},children:Ki.map(a=>{const r=a.form,i=a.key;return h.jsxs(T.Fragment,{children:[a.title!==Ki[0].title&&h.jsx(Lu,{className:"bg-gradient-to-r from-blue-200/0 via-blue-200 to-purple-200/0 dark:from-blue-900/0 dark:via-blue-900 dark:to-purple-900/0 my-2"}),h.jsx(Ms,{sessionKey:i,title:a.title,description:a.description,icon:a.icon,getFieldValue:()=>n.getFieldValue(i),setValue:l=>n.setFieldValue(i,l),children:h.jsx(r,{form:n})})]},i)})})});vd.displayName="Form";function $i({className:n,...a}){return h.jsx("div",{"data-slot":"skeleton",className:pe("bg-accent animate-pulse rounded-md",n),...a})}const gd=T.lazy(()=>Ji(()=>import("./index-BQezJGOC.js"),__vite__mapDeps([0,1,2,3])).then(n=>({default:n.PageIndex.Form}))),yd=T.lazy(()=>Ji(()=>import("./index-BQezJGOC.js"),__vite__mapDeps([0,1,2,3])).then(n=>({default:n.PageIndex.Result})));function bd(){const n=Cc({defaultValues:Lt}),a=it(n.store,r=>r.values);return h.jsx("div",{className:"flex flex-col min-h-screen bg-background",children:h.jsxs("main",{className:"flex-1",children:[h.jsx("div",{className:"border-b bg-gradient-to-r from-blue-50/50 via-purple-50/50 to-blue-50/50 dark:from-slate-900/50 dark:via-blue-950/50 dark:to-slate-900/50",children:h.jsx("div",{className:"container mx-auto px-4 py-8 md:py-12",children:h.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-4",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Calculadora de Custos de ImpressÃ£o 3D"}),h.jsx("p",{className:"text-base md:text-lg text-muted-foreground leading-relaxed",children:"Calcule de forma precisa o custo total das suas impressÃµes 3D. Considere filamento, energia elÃ©trica, tempo de impressÃ£o, custos fixos e margem de lucro para precificar seus projetos com exatidÃ£o."}),h.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm text-muted-foreground pt-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),h.jsx("span",{children:"Custos de Material"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"h-2 w-2 rounded-full bg-purple-500"}),h.jsx("span",{children:"Energia ElÃ©trica"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),h.jsx("span",{children:"Tempo & MÃ£o de Obra"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"h-2 w-2 rounded-full bg-purple-500"}),h.jsx("span",{children:"Margem de Lucro"})]})]})]})})}),h.jsxs("div",{className:"flex flex-col lg:flex-row w-full gap-4 p-4",children:[h.jsx(T.Suspense,{fallback:h.jsx($i,{className:"h-96 flex-1"}),children:h.jsx(gd,{form:n})}),h.jsx("div",{className:"flex flex-col gap-4 flex-1 lg:sticky lg:top-20 lg:h-fit",children:h.jsx(T.Suspense,{fallback:h.jsx($i,{className:"h-96 w-full"}),children:h.jsx(yd,{values:a})})})]})]})})}const Vd=Object.freeze(Object.defineProperty({__proto__:null,component:bd},Symbol.toStringTag,{value:"Module"}));export{Fc as C,vd as F,$i as S,st as T,Ec as a,Oc as b,_d as c,Ic as d,Ac as e,jd as f,Lu as g,Lt as h,Vd as i};
